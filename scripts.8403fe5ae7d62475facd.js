!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var i=[],n=t.document,a=Object.getPrototypeOf,s=i.slice,o=i.concat,r=i.push,l=i.indexOf,h={},c=h.toString,u=h.hasOwnProperty,d=u.toString,p=d.call(Object),f={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},g=function(t){return null!=t&&t===t.window},_={type:!0,src:!0,nonce:!0,noModule:!0};function v(t,e,i){var a,s,o=(i=i||n).createElement("script");if(o.text=t,e)for(a in _)(s=e[a]||e.getAttribute&&e.getAttribute(a))&&o.setAttribute(a,s);i.head.appendChild(o).parentNode.removeChild(o)}function y(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[c.call(t)]||"object":typeof t}var b="3.4.1",w=function(t,e){return new w.fn.init(t,e)},M=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function C(t){var e=!!t&&"length"in t&&t.length,i=y(t);return!m(t)&&!g(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}w.fn=w.prototype={jquery:b,constructor:w,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:i.sort,splice:i.splice},w.extend=w.fn.extend=function(){var t,e,i,n,a,s,o=arguments[0]||{},r=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[r]||{},r++),"object"==typeof o||m(o)||(o={}),r===l&&(o=this,r--);r<l;r++)if(null!=(t=arguments[r]))for(e in t)n=t[e],"__proto__"!==e&&o!==n&&(h&&n&&(w.isPlainObject(n)||(a=Array.isArray(n)))?(i=o[e],s=a&&!Array.isArray(i)?[]:a||w.isPlainObject(i)?i:{},a=!1,o[e]=w.extend(h,s,n)):void 0!==n&&(o[e]=n));return o},w.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==c.call(t)||(e=a(t))&&("function"!=typeof(i=u.call(e,"constructor")&&e.constructor)||d.call(i)!==p))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){v(t,{nonce:e&&e.nonce})},each:function(t,e){var i,n=0;if(C(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(M,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(C(Object(t))?w.merge(i,"string"==typeof t?[t]:t):r.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:l.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,a=t.length;n<i;n++)t[a++]=e[n];return t.length=a,t},grep:function(t,e,i){for(var n=[],a=0,s=t.length,o=!i;a<s;a++)!e(t[a],a)!==o&&n.push(t[a]);return n},map:function(t,e,i){var n,a,s=0,r=[];if(C(t))for(n=t.length;s<n;s++)null!=(a=e(t[s],s,i))&&r.push(a);else for(s in t)null!=(a=e(t[s],s,i))&&r.push(a);return o.apply([],r)},guid:1,support:f}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=i[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var x=function(t){var e,i,n,a,s,o,r,l,h,c,u,d,p,f,m,g,_,v,y,b="sizzle"+1*new Date,w=t.document,M=0,C=0,x=lt(),k=lt(),S=lt(),L=lt(),T=function(t,e){return t===e&&(u=!0),0},A={}.hasOwnProperty,I=[],P=I.pop,E=I.push,z=I.push,D=I.slice,O=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+R+"*("+B+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+R+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",W=new RegExp(R+"+","g"),Z=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),V=new RegExp("^"+R+"*,"+R+"*"),q=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),G=new RegExp(R+"|>"),H=new RegExp(j),U=new RegExp("^"+B+"$"),$={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),it=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,at=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=function(){d()},ot=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{z.apply(I=D.call(w.childNodes),w.childNodes)}catch(e){z={apply:I.length?function(t,e){E.apply(t,D.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function rt(t,e,n,a){var s,r,h,c,u,f,_,v=e&&e.ownerDocument,M=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==M&&9!==M&&11!==M)return n;if(!a&&((e?e.ownerDocument||e:w)!==p&&d(e),e=e||p,m)){if(11!==M&&(u=J.exec(t)))if(s=u[1]){if(9===M){if(!(h=e.getElementById(s)))return n;if(h.id===s)return n.push(h),n}else if(v&&(h=v.getElementById(s))&&y(e,h)&&h.id===s)return n.push(h),n}else{if(u[2])return z.apply(n,e.getElementsByTagName(t)),n;if((s=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return z.apply(n,e.getElementsByClassName(s)),n}if(i.qsa&&!L[t+" "]&&(!g||!g.test(t))&&(1!==M||"object"!==e.nodeName.toLowerCase())){if(_=t,v=e,1===M&&G.test(t)){for((c=e.getAttribute("id"))?c=c.replace(nt,at):e.setAttribute("id",c=b),r=(f=o(t)).length;r--;)f[r]="#"+c+" "+yt(f[r]);_=f.join(","),v=tt.test(t)&&_t(e.parentNode)||e}try{return z.apply(n,v.querySelectorAll(_)),n}catch(e){L(t,!0)}finally{c===b&&e.removeAttribute("id")}}}return l(t.replace(Z,"$1"),e,n,a)}function lt(){var t=[];return function e(i,a){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=a}}function ht(t){return t[b]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),a=i.length;a--;)n.attrHandle[i[a]]=e}function dt(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ht((function(e){return e=+e,ht((function(i,n){for(var a,s=t([],i.length,e),o=s.length;o--;)i[a=s[o]]&&(i[a]=!(n[a]=i[a]))}))}))}function _t(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=rt.support={},s=rt.isXML=function(t){var e=(t.ownerDocument||t).documentElement;return!Y.test(t.namespaceURI||e&&e.nodeName||"HTML")},d=rt.setDocument=function(t){var e,a,o=t?t.ownerDocument||t:w;return o!==p&&9===o.nodeType&&o.documentElement&&(f=(p=o).documentElement,m=!s(p),w!==p&&(a=p.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",st,!1):a.attachEvent&&a.attachEvent("onunload",st)),i.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=ct((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=X.test(p.getElementsByClassName),i.getById=ct((function(t){return f.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),i.getById?(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var i,n,a,s=e.getElementById(t);if(s){if((i=s.getAttributeNode("id"))&&i.value===t)return[s];for(a=e.getElementsByName(t),n=0;s=a[n++];)if((i=s.getAttributeNode("id"))&&i.value===t)return[s]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],a=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[a++];)1===i.nodeType&&n.push(i);return n}return s},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},_=[],g=[],(i.qsa=X.test(p.querySelectorAll))&&(ct((function(t){f.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+R+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+b+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+R+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=X.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ct((function(t){i.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),_.push("!=",j)})),g=g.length&&new RegExp(g.join("|")),_=_.length&&new RegExp(_.join("|")),e=X.test(f.compareDocumentPosition),y=e||X.test(f.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===p||t.ownerDocument===w&&y(w,t)?-1:e===p||e.ownerDocument===w&&y(w,e)?1:c?O(c,t)-O(c,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,n=0,a=t.parentNode,s=e.parentNode,o=[t],r=[e];if(!a||!s)return t===p?-1:e===p?1:a?-1:s?1:c?O(c,t)-O(c,e):0;if(a===s)return dt(t,e);for(i=t;i=i.parentNode;)o.unshift(i);for(i=e;i=i.parentNode;)r.unshift(i);for(;o[n]===r[n];)n++;return n?dt(o[n],r[n]):o[n]===w?-1:r[n]===w?1:0}),p},rt.matches=function(t,e){return rt(t,null,null,e)},rt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&d(t),i.matchesSelector&&m&&!L[e+" "]&&(!_||!_.test(e))&&(!g||!g.test(e)))try{var n=v.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){L(e,!0)}return 0<rt(e,p,null,[t]).length},rt.contains=function(t,e){return(t.ownerDocument||t)!==p&&d(t),y(t,e)},rt.attr=function(t,e){(t.ownerDocument||t)!==p&&d(t);var a=n.attrHandle[e.toLowerCase()],s=a&&A.call(n.attrHandle,e.toLowerCase())?a(t,e,!m):void 0;return void 0!==s?s:i.attributes||!m?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},rt.escape=function(t){return(t+"").replace(nt,at)},rt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},rt.uniqueSort=function(t){var e,n=[],a=0,s=0;if(u=!i.detectDuplicates,c=!i.sortStable&&t.slice(0),t.sort(T),u){for(;e=t[s++];)e===t[s]&&(a=n.push(s));for(;a--;)t.splice(n[a],1)}return c=null,t},a=rt.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=a(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=a(e);return i},(n=rt.selectors={cacheLength:50,createPseudo:ht,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||rt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&rt.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return $.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&H.test(i)&&(e=o(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var a=rt.attr(n,t);return null==a?"!="===e:!e||(a+="","="===e?a===i:"!="===e?a!==i:"^="===e?i&&0===a.indexOf(i):"*="===e?i&&-1<a.indexOf(i):"$="===e?i&&a.slice(-i.length)===i:"~="===e?-1<(" "+a.replace(W," ")+" ").indexOf(i):"|="===e&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,a){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),r="of-type"===e;return 1===n&&0===a?function(t){return!!t.parentNode}:function(e,i,l){var h,c,u,d,p,f,m=s!==o?"nextSibling":"previousSibling",g=e.parentNode,_=r&&e.nodeName.toLowerCase(),v=!l&&!r,y=!1;if(g){if(s){for(;m;){for(d=e;d=d[m];)if(r?d.nodeName.toLowerCase()===_:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&v){for(y=(p=(h=(c=(u=(d=g)[b]||(d[b]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===M&&h[1])&&h[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(y=p=0)||f.pop();)if(1===d.nodeType&&++y&&d===e){c[t]=[M,p,y];break}}else if(v&&(y=p=(h=(c=(u=(d=e)[b]||(d[b]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===M&&h[1]),!1===y)for(;(d=++p&&d&&d[m]||(y=p=0)||f.pop())&&((r?d.nodeName.toLowerCase()!==_:1!==d.nodeType)||!++y||(v&&((c=(u=d[b]||(d[b]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]=[M,y]),d!==e)););return(y-=a)===n||y%n==0&&0<=y/n}}},PSEUDO:function(t,e){var i,a=n.pseudos[t]||n.setFilters[t.toLowerCase()]||rt.error("unsupported pseudo: "+t);return a[b]?a(e):1<a.length?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?ht((function(t,i){for(var n,s=a(t,e),o=s.length;o--;)t[n=O(t,s[o])]=!(i[n]=s[o])})):function(t){return a(t,0,i)}):a}},pseudos:{not:ht((function(t){var e=[],i=[],n=r(t.replace(Z,"$1"));return n[b]?ht((function(t,e,i,a){for(var s,o=n(t,null,a,[]),r=t.length;r--;)(s=o[r])&&(t[r]=!(e[r]=s))})):function(t,a,s){return e[0]=t,n(e,null,s,i),e[0]=null,!i.pop()}})),has:ht((function(t){return function(e){return 0<rt(t,e).length}})),contains:ht((function(t){return t=t.replace(et,it),function(e){return-1<(e.textContent||a(e)).indexOf(t)}})),lang:ht((function(t){return U.test(t||"")||rt.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt((function(){return[0]})),last:gt((function(t,e){return[e-1]})),eq:gt((function(t,e,i){return[i<0?i+e:i]})),even:gt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:gt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:gt((function(t,e,i){for(var n=i<0?i+e:e<i?e:i;0<=--n;)t.push(n);return t})),gt:gt((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ft(e);function vt(){}function yt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function bt(t,e,i){var n=e.dir,a=e.next,s=a||n,o=i&&"parentNode"===s,r=C++;return e.first?function(e,i,a){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,a);return!1}:function(e,i,l){var h,c,u,d=[M,r];if(l){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||o)if(c=(u=e[b]||(e[b]={}))[e.uniqueID]||(u[e.uniqueID]={}),a&&a===e.nodeName.toLowerCase())e=e[n]||e;else{if((h=c[s])&&h[0]===M&&h[1]===r)return d[2]=h[2];if((c[s]=d)[2]=t(e,i,l))return!0}return!1}}function wt(t){return 1<t.length?function(e,i,n){for(var a=t.length;a--;)if(!t[a](e,i,n))return!1;return!0}:t[0]}function Mt(t,e,i,n,a){for(var s,o=[],r=0,l=t.length,h=null!=e;r<l;r++)(s=t[r])&&(i&&!i(s,n,a)||(o.push(s),h&&e.push(r)));return o}function Ct(t,e,i,n,a,s){return n&&!n[b]&&(n=Ct(n)),a&&!a[b]&&(a=Ct(a,s)),ht((function(s,o,r,l){var h,c,u,d=[],p=[],f=o.length,m=s||function(t,e,i){for(var n=0,a=e.length;n<a;n++)rt(t,e[n],i);return i}(e||"*",r.nodeType?[r]:r,[]),g=!t||!s&&e?m:Mt(m,d,t,r,l),_=i?a||(s?t:f||n)?[]:o:g;if(i&&i(g,_,r,l),n)for(h=Mt(_,p),n(h,[],r,l),c=h.length;c--;)(u=h[c])&&(_[p[c]]=!(g[p[c]]=u));if(s){if(a||t){if(a){for(h=[],c=_.length;c--;)(u=_[c])&&h.push(g[c]=u);a(null,_=[],h,l)}for(c=_.length;c--;)(u=_[c])&&-1<(h=a?O(s,u):d[c])&&(s[h]=!(o[h]=u))}}else _=Mt(_===o?_.splice(f,_.length):_),a?a(null,o,_,l):z.apply(o,_)}))}function xt(t){for(var e,i,a,s=t.length,o=n.relative[t[0].type],r=o||n.relative[" "],l=o?1:0,c=bt((function(t){return t===e}),r,!0),u=bt((function(t){return-1<O(e,t)}),r,!0),d=[function(t,i,n){var a=!o&&(n||i!==h)||((e=i).nodeType?c(t,i,n):u(t,i,n));return e=null,a}];l<s;l++)if(i=n.relative[t[l].type])d=[bt(wt(d),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[b]){for(a=++l;a<s&&!n.relative[t[a].type];a++);return Ct(1<l&&wt(d),1<l&&yt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(Z,"$1"),i,l<a&&xt(t.slice(l,a)),a<s&&xt(t=t.slice(a)),a<s&&yt(t))}d.push(i)}return wt(d)}return vt.prototype=n.filters=n.pseudos,n.setFilters=new vt,o=rt.tokenize=function(t,e){var i,a,s,o,r,l,h,c=k[t+" "];if(c)return e?0:c.slice(0);for(r=t,l=[],h=n.preFilter;r;){for(o in i&&!(a=V.exec(r))||(a&&(r=r.slice(a[0].length)||r),l.push(s=[])),i=!1,(a=q.exec(r))&&(i=a.shift(),s.push({value:i,type:a[0].replace(Z," ")}),r=r.slice(i.length)),n.filter)!(a=$[o].exec(r))||h[o]&&!(a=h[o](a))||(i=a.shift(),s.push({value:i,type:o,matches:a}),r=r.slice(i.length));if(!i)break}return e?r.length:r?rt.error(t):k(t,l).slice(0)},r=rt.compile=function(t,e){var i,a,s,r,l,c,u=[],f=[],g=S[t+" "];if(!g){for(e||(e=o(t)),i=e.length;i--;)(g=xt(e[i]))[b]?u.push(g):f.push(g);(g=S(t,(a=f,r=0<(s=u).length,l=0<a.length,c=function(t,e,i,o,c){var u,f,g,_=0,v="0",y=t&&[],b=[],w=h,C=t||l&&n.find.TAG("*",c),x=M+=null==w?1:Math.random()||.1,k=C.length;for(c&&(h=e===p||e||c);v!==k&&null!=(u=C[v]);v++){if(l&&u){for(f=0,e||u.ownerDocument===p||(d(u),i=!m);g=a[f++];)if(g(u,e||p,i)){o.push(u);break}c&&(M=x)}r&&((u=!g&&u)&&_--,t&&y.push(u))}if(_+=v,r&&v!==_){for(f=0;g=s[f++];)g(y,b,e,i);if(t){if(0<_)for(;v--;)y[v]||b[v]||(b[v]=P.call(o));b=Mt(b)}z.apply(o,b),c&&!t&&0<b.length&&1<_+s.length&&rt.uniqueSort(o)}return c&&(M=x,h=w),y},r?ht(c):c))).selector=t}return g},l=rt.select=function(t,e,i,a){var s,l,h,c,u,d="function"==typeof t&&t,p=!a&&o(t=d.selector||t);if(i=i||[],1===p.length){if(2<(l=p[0]=p[0].slice(0)).length&&"ID"===(h=l[0]).type&&9===e.nodeType&&m&&n.relative[l[1].type]){if(!(e=(n.find.ID(h.matches[0].replace(et,it),e)||[])[0]))return i;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(s=$.needsContext.test(t)?0:l.length;s--&&!n.relative[c=(h=l[s]).type];)if((u=n.find[c])&&(a=u(h.matches[0].replace(et,it),tt.test(l[0].type)&&_t(e.parentNode)||e))){if(l.splice(s,1),!(t=a.length&&yt(l)))return z.apply(i,a),i;break}}return(d||r(t,p))(a,e,!m,i,!e||tt.test(t)&&_t(e.parentNode)||e),i},i.sortStable=b.split("").sort(T).join("")===b,i.detectDuplicates=!!u,d(),i.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||ut(N,(function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),rt}(t);w.find=x,w.expr=x.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=x.uniqueSort,w.text=x.getText,w.isXMLDoc=x.isXML,w.contains=x.contains,w.escapeSelector=x.escape;var k=function(t,e,i){for(var n=[],a=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(a&&w(t).is(i))break;n.push(t)}return n},S=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},L=w.expr.match.needsContext;function T(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(t,e,i){return m(e)?w.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?w.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?w.grep(t,(function(t){return-1<l.call(e,t)!==i})):w.filter(e,t,i)}w.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?w.find.matchesSelector(n,t)?[n]:[]:w.find.matches(t,w.grep(e,(function(t){return 1===t.nodeType})))},w.fn.extend({find:function(t){var e,i,n=this.length,a=this;if("string"!=typeof t)return this.pushStack(w(t).filter((function(){for(e=0;e<n;e++)if(w.contains(a[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)w.find(t,a[e],i);return 1<n?w.uniqueSort(i):i},filter:function(t){return this.pushStack(I(this,t||[],!1))},not:function(t){return this.pushStack(I(this,t||[],!0))},is:function(t){return!!I(this,"string"==typeof t&&L.test(t)?w(t):t||[],!1).length}});var P,E=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,i){var a,s;if(!t)return this;if(i=i||P,"string"==typeof t){if(!(a="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:E.exec(t))||!a[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(a[1]){if(w.merge(this,w.parseHTML(a[1],(e=e instanceof w?e[0]:e)&&e.nodeType?e.ownerDocument||e:n,!0)),A.test(a[1])&&w.isPlainObject(e))for(a in e)m(this[a])?this[a](e[a]):this.attr(a,e[a]);return this}return(s=n.getElementById(a[2]))&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==i.ready?i.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,P=w(n);var z=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function O(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(w.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,a=this.length,s=[],o="string"!=typeof t&&w(t);if(!L.test(t))for(;n<a;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?-1<o.index(i):1===i.nodeType&&w.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(1<s.length?w.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?l.call(w(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,i){return k(t,"parentNode",i)},next:function(t){return O(t,"nextSibling")},prev:function(t){return O(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,i){return k(t,"nextSibling",i)},prevUntil:function(t,e,i){return k(t,"previousSibling",i)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(T(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},(function(t,e){w.fn[t]=function(i,n){var a=w.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(a=w.filter(n,a)),1<this.length&&(D[t]||w.uniqueSort(a),z.test(t)&&a.reverse()),this.pushStack(a)}}));var N=/[^\x20\t\r\n\f]+/g;function R(t){return t}function B(t){throw t}function F(t,e,i,n){var a;try{t&&m(a=t.promise)?a.call(t).done(e).fail(i):t&&m(a=t.then)?a.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}w.Callbacks=function(t){var e;t="string"==typeof t?(e={},w.each(t.match(N)||[],(function(t,i){e[i]=!0})),e):w.extend({},t);var i,n,a,s,o=[],r=[],l=-1,h=function(){for(s=s||t.once,a=i=!0;r.length;l=-1)for(n=r.shift();++l<o.length;)!1===o[l].apply(n[0],n[1])&&t.stopOnFalse&&(l=o.length,n=!1);t.memory||(n=!1),i=!1,s&&(o=n?[]:"")},c={add:function(){return o&&(n&&!i&&(l=o.length-1,r.push(n)),function e(i){w.each(i,(function(i,n){m(n)?t.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==y(n)&&e(n)}))}(arguments),n&&!i&&h()),this},remove:function(){return w.each(arguments,(function(t,e){for(var i;-1<(i=w.inArray(e,o,i));)o.splice(i,1),i<=l&&l--})),this},has:function(t){return t?-1<w.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return s=r=[],o=n="",this},disabled:function(){return!o},lock:function(){return s=r=[],n||i||(o=n=""),this},locked:function(){return!!s},fireWith:function(t,e){return s||(e=[t,(e=e||[]).slice?e.slice():e],r.push(e),i||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!a}};return c},w.extend({Deferred:function(e){var i=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var t=arguments;return w.Deferred((function(e){w.each(i,(function(i,n){var a=m(t[n[4]])&&t[n[4]];s[n[1]]((function(){var t=a&&a.apply(this,arguments);t&&m(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,a?[t]:arguments)}))})),t=null})).promise()},then:function(e,n,a){var s=0;function o(e,i,n,a){return function(){var r=this,l=arguments,h=function(){var t,h;if(!(e<s)){if((t=n.apply(r,l))===i.promise())throw new TypeError("Thenable self-resolution");m(h=t&&("object"==typeof t||"function"==typeof t)&&t.then)?a?h.call(t,o(s,i,R,a),o(s,i,B,a)):h.call(t,o(++s,i,R,a),o(s,i,B,a),o(s,i,R,i.notifyWith)):(n!==R&&(r=void 0,l=[t]),(a||i.resolveWith)(r,l))}},c=a?h:function(){try{h()}catch(h){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(h,c.stackTrace),s<=e+1&&(n!==B&&(r=void 0,l=[h]),i.rejectWith(r,l))}};e?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),t.setTimeout(c))}}return w.Deferred((function(t){i[0][3].add(o(0,t,m(a)?a:R,t.notifyWith)),i[1][3].add(o(0,t,m(e)?e:R)),i[2][3].add(o(0,t,m(n)?n:B))})).promise()},promise:function(t){return null!=t?w.extend(t,a):a}},s={};return w.each(i,(function(t,e){var o=e[2],r=e[5];a[e[1]]=o.add,r&&o.add((function(){n=r}),i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),o.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=o.fireWith})),a.promise(s),e&&e.call(s,s),s},when:function(t){var e=arguments.length,i=e,n=Array(i),a=s.call(arguments),o=w.Deferred(),r=function(t){return function(i){n[t]=this,a[t]=1<arguments.length?s.call(arguments):i,--e||o.resolveWith(n,a)}};if(e<=1&&(F(t,o.done(r(i)).resolve,o.reject,!e),"pending"===o.state()||m(a[i]&&a[i].then)))return o.then();for(;i--;)F(a[i],r(i),o.reject);return o.promise()}});var j=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&j.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},w.readyException=function(e){t.setTimeout((function(){throw e}))};var W=w.Deferred();function Z(){n.removeEventListener("DOMContentLoaded",Z),t.removeEventListener("load",Z),w.ready()}w.fn.ready=function(t){return W.then(t).catch((function(t){w.readyException(t)})),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0)!==t&&0<--w.readyWait||W.resolveWith(n,[w])}}),w.ready.then=W.then,"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?t.setTimeout(w.ready):(n.addEventListener("DOMContentLoaded",Z),t.addEventListener("load",Z));var V=function(t,e,i,n,a,s,o){var r=0,l=t.length,h=null==i;if("object"===y(i))for(r in a=!0,i)V(t,e,r,i[r],!0,s,o);else if(void 0!==n&&(a=!0,m(n)||(o=!0),h&&(o?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(w(t),i)})),e))for(;r<l;r++)e(t[r],i,o?n:n.call(t[r],r,e(t[r],i)));return a?t:h?e.call(t):l?e(t[0],i):s},q=/^-ms-/,G=/-([a-z])/g;function H(t,e){return e.toUpperCase()}function U(t){return t.replace(q,"ms-").replace(G,H)}var $=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Y(){this.expando=w.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},$(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,a=this.cache(t);if("string"==typeof e)a[U(e)]=i;else for(n in e)a[U(n)]=e[n];return a},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][U(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(U):(e=U(e))in n?[e]:e.match(N)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||w.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var K=new Y,Q=new Y,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function tt(t,e,i){var n,a;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===(a=i)||"false"!==a&&("null"===a?null:a===+a+""?+a:X.test(a)?JSON.parse(a):a)}catch(t){}Q.set(t,e,i)}else i=void 0;return i}w.extend({hasData:function(t){return Q.hasData(t)||K.hasData(t)},data:function(t,e,i){return Q.access(t,e,i)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,i){return K.access(t,e,i)},_removeData:function(t,e){K.remove(t,e)}}),w.fn.extend({data:function(t,e){var i,n,a,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(a=Q.get(s),1===s.nodeType&&!K.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=U(n.slice(5)),tt(s,n,a[n]));K.set(s,"hasDataAttrs",!0)}return a}return"object"==typeof t?this.each((function(){Q.set(this,t)})):V(this,(function(e){var i;if(s&&void 0===e)return void 0!==(i=Q.get(s,t))?i:void 0!==(i=tt(s,t))?i:void 0;this.each((function(){Q.set(this,t,e)}))}),null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each((function(){Q.remove(this,t)}))}}),w.extend({queue:function(t,e,i){var n;if(t)return n=K.get(t,e=(e||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=K.access(t,e,w.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){var i=w.queue(t,e=e||"fx"),n=i.length,a=i.shift(),s=w._queueHooks(t,e);"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===e&&i.unshift("inprogress"),delete s.stop,a.call(t,(function(){w.dequeue(t,e)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return K.get(t,i)||K.access(t,i,{empty:w.Callbacks("once memory").add((function(){K.remove(t,[e+"queue",i])}))})}}),w.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?w.queue(this[0],t):void 0===e?this:this.each((function(){var i=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&w.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){w.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,a=w.Deferred(),s=this,o=this.length,r=function(){--n||a.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(i=K.get(s[o],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),a.promise(e)}});var et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],at=n.documentElement,st=function(t){return w.contains(t.ownerDocument,t)},ot={composed:!0};at.getRootNode&&(st=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});var rt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&st(t)&&"none"===w.css(t,"display")},lt=function(t,e,i,n){var a,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];for(s in a=i.apply(t,n||[]),e)t.style[s]=o[s];return a};function ht(t,e,i,n){var a,s,o=20,r=n?function(){return n.cur()}:function(){return w.css(t,e,"")},l=r(),h=i&&i[3]||(w.cssNumber[e]?"":"px"),c=t.nodeType&&(w.cssNumber[e]||"px"!==h&&+l)&&it.exec(w.css(t,e));if(c&&c[3]!==h){for(h=h||c[3],c=+(l/=2)||1;o--;)w.style(t,e,c+h),(1-s)*(1-(s=r()/l||.5))<=0&&(o=0),c/=s;w.style(t,e,(c*=2)+h),i=i||[]}return i&&(c=+c||+l||0,a=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=c,n.end=a)),a}var ct={};function ut(t,e){for(var i,n,a,s,o,r,l,h=[],c=0,u=t.length;c<u;c++)(n=t[c]).style&&(i=n.style.display,e?("none"===i&&(h[c]=K.get(n,"display")||null,h[c]||(n.style.display="")),""===n.style.display&&rt(n)&&(h[c]=(l=o=s=void 0,o=(a=n).ownerDocument,(l=ct[r=a.nodeName])||(s=o.body.appendChild(o.createElement(r)),l=w.css(s,"display"),s.parentNode.removeChild(s),"none"===l&&(l="block"),ct[r]=l)))):"none"!==i&&(h[c]="none",K.set(n,"display",i)));for(c=0;c<u;c++)null!=h[c]&&(t[c].style.display=h[c]);return t}w.fn.extend({show:function(){return ut(this,!0)},hide:function(){return ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){rt(this)?w(this).show():w(this).hide()}))}});var dt=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ft=/^$|^module$|\/(?:java|ecma)script/i,mt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&T(t,e)?w.merge([t],i):i}function _t(t,e){for(var i=0,n=t.length;i<n;i++)K.set(t[i],"globalEval",!e||K.get(e[i],"globalEval"))}mt.optgroup=mt.option,mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td;var vt,yt,bt=/<|&#?\w+;/;function wt(t,e,i,n,a){for(var s,o,r,l,h,c,u=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((s=t[p])||0===s)if("object"===y(s))w.merge(d,s.nodeType?[s]:s);else if(bt.test(s)){for(o=o||u.appendChild(e.createElement("div")),r=(pt.exec(s)||["",""])[1].toLowerCase(),o.innerHTML=(l=mt[r]||mt._default)[1]+w.htmlPrefilter(s)+l[2],c=l[0];c--;)o=o.lastChild;w.merge(d,o.childNodes),(o=u.firstChild).textContent=""}else d.push(e.createTextNode(s));for(u.textContent="",p=0;s=d[p++];)if(n&&-1<w.inArray(s,n))a&&a.push(s);else if(h=st(s),o=gt(u.appendChild(s),"script"),h&&_t(o),i)for(c=0;s=o[c++];)ft.test(s.type||"")&&i.push(s);return u}vt=n.createDocumentFragment().appendChild(n.createElement("div")),(yt=n.createElement("input")).setAttribute("type","radio"),yt.setAttribute("checked","checked"),yt.setAttribute("name","t"),vt.appendChild(yt),f.checkClone=vt.cloneNode(!0).cloneNode(!0).lastChild.checked,vt.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!vt.cloneNode(!0).lastChild.defaultValue;var Mt=/^key/,Ct=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xt=/^([^.]*)(?:\.(.+)|)/;function kt(){return!0}function St(){return!1}function Lt(t,e){return t===function(){try{return n.activeElement}catch(t){}}()==("focus"===e)}function Tt(t,e,i,n,a,s){var o,r;if("object"==typeof e){for(r in"string"!=typeof i&&(n=n||i,i=void 0),e)Tt(t,r,i,n,e[r],s);return t}if(null==n&&null==a?(a=i,n=i=void 0):null==a&&("string"==typeof i?(a=n,n=void 0):(a=n,n=i,i=void 0)),!1===a)a=St;else if(!a)return t;return 1===s&&(o=a,(a=function(t){return w().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),t.each((function(){w.event.add(this,e,a,n,i)}))}function At(t,e,i){i?(K.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var n,a,o=K.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=s.call(arguments),K.set(this,e,o),n=i(this,e),this[e](),o!==(a=K.get(this,e))||n?K.set(this,e,!1):a={},o!==a)return t.stopImmediatePropagation(),t.preventDefault(),a.value}else o.length&&(K.set(this,e,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===K.get(t,e)&&w.event.add(t,e,kt)}w.event={global:{},add:function(t,e,i,n,a){var s,o,r,l,h,c,u,d,p,f,m,g=K.get(t);if(g)for(i.handler&&(i=(s=i).handler,a=s.selector),a&&w.find.matchesSelector(at,a),i.guid||(i.guid=w.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(N)||[""]).length;h--;)p=m=(r=xt.exec(e[h])||[])[1],f=(r[2]||"").split(".").sort(),p&&(u=w.event.special[p]||{},u=w.event.special[p=(a?u.delegateType:u.bindType)||p]||{},c=w.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:a,needsContext:a&&w.expr.match.needsContext.test(a),namespace:f.join(".")},s),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,f,o)||t.addEventListener&&t.addEventListener(p,o)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),a?d.splice(d.delegateCount++,0,c):d.push(c),w.event.global[p]=!0)},remove:function(t,e,i,n,a){var s,o,r,l,h,c,u,d,p,f,m,g=K.hasData(t)&&K.get(t);if(g&&(l=g.events)){for(h=(e=(e||"").match(N)||[""]).length;h--;)if(p=m=(r=xt.exec(e[h])||[])[1],f=(r[2]||"").split(".").sort(),p){for(u=w.event.special[p]||{},d=l[p=(n?u.delegateType:u.bindType)||p]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)c=d[s],!a&&m!==c.origType||i&&i.guid!==c.guid||r&&!r.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(s,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(t,c));o&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,g.handle)||w.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)w.event.remove(t,p+e[h],i,n,!0);w.isEmptyObject(l)&&K.remove(t,"handle events")}},dispatch:function(t){var e,i,n,a,s,o,r=w.event.fix(t),l=new Array(arguments.length),h=(K.get(this,"events")||{})[r.type]||[],c=w.event.special[r.type]||{};for(l[0]=r,e=1;e<arguments.length;e++)l[e]=arguments[e];if(r.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,r)){for(o=w.event.handlers.call(this,r,h),e=0;(a=o[e++])&&!r.isPropagationStopped();)for(r.currentTarget=a.elem,i=0;(s=a.handlers[i++])&&!r.isImmediatePropagationStopped();)r.rnamespace&&!1!==s.namespace&&!r.rnamespace.test(s.namespace)||(r.handleObj=s,r.data=s.data,void 0!==(n=((w.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,l))&&!1===(r.result=n)&&(r.preventDefault(),r.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,r),r.result}},handlers:function(t,e){var i,n,a,s,o,r=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&1<=t.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(s=[],o={},i=0;i<l;i++)void 0===o[a=(n=e[i]).selector+" "]&&(o[a]=n.needsContext?-1<w(a,this).index(h):w.find(a,this,null,[h]).length),o[a]&&s.push(n);s.length&&r.push({elem:h,handlers:s})}return h=this,l<e.length&&r.push({elem:h,handlers:e.slice(l)}),r},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return dt.test(e.type)&&e.click&&T(e,"input")&&At(e,"click",kt),!1},trigger:function(t){var e=this||t;return dt.test(e.type)&&e.click&&T(e,"input")&&At(e,"click"),!0},_default:function(t){var e=t.target;return dt.test(e.type)&&e.click&&T(e,"input")&&K.get(e,"click")||T(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?kt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=kt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=kt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=kt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Mt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Ct.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(t,e){w.event.special[t]={setup:function(){return At(this,t,Lt),!1},trigger:function(){return At(this,t),!0},delegateType:e}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,a=t.handleObj;return n&&(n===this||w.contains(this,n))||(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=e),i}}})),w.fn.extend({on:function(t,e,i,n){return Tt(this,t,e,i,n)},one:function(t,e,i,n){return Tt(this,t,e,i,n,1)},off:function(t,e,i){var n,a;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,w(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(a in t)this.off(a,e,t[a]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=St),this.each((function(){w.event.remove(this,t,i,e)}))}});var It=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Pt=/<script|<style|<link/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,zt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Dt(t,e){return T(t,"table")&&T(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Ot(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Rt(t,e){var i,n,a,s,o,r,l,h;if(1===e.nodeType){if(K.hasData(t)&&(s=K.access(t),o=K.set(e,s),h=s.events))for(a in delete o.handle,o.events={},h)for(i=0,n=h[a].length;i<n;i++)w.event.add(e,a,h[a][i]);Q.hasData(t)&&(r=Q.access(t),l=w.extend({},r),Q.set(e,l))}}function Bt(t,e,i,n){e=o.apply([],e);var a,s,r,l,h,c,u=0,d=t.length,p=d-1,g=e[0],_=m(g);if(_||1<d&&"string"==typeof g&&!f.checkClone&&Et.test(g))return t.each((function(a){var s=t.eq(a);_&&(e[0]=g.call(this,a,s.html())),Bt(s,e,i,n)}));if(d&&(s=(a=wt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===a.childNodes.length&&(a=s),s||n)){for(l=(r=w.map(gt(a,"script"),Ot)).length;u<d;u++)h=a,u!==p&&(h=w.clone(h,!0,!0),l&&w.merge(r,gt(h,"script"))),i.call(t[u],h,u);if(l)for(c=r[r.length-1].ownerDocument,w.map(r,Nt),u=0;u<l;u++)ft.test((h=r[u]).type||"")&&!K.access(h,"globalEval")&&w.contains(c,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?w._evalUrl&&!h.noModule&&w._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")}):v(h.textContent.replace(zt,""),h,c))}return t}function Ft(t,e,i){for(var n,a=e?w.filter(e,t):t,s=0;null!=(n=a[s]);s++)i||1!==n.nodeType||w.cleanData(gt(n)),n.parentNode&&(i&&st(n)&&_t(gt(n,"script")),n.parentNode.removeChild(n));return t}w.extend({htmlPrefilter:function(t){return t.replace(It,"<$1></$2>")},clone:function(t,e,i){var n,a,s,o,r,l,h,c=t.cloneNode(!0),u=st(t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(o=gt(c),n=0,a=(s=gt(t)).length;n<a;n++)r=s[n],"input"===(h=(l=o[n]).nodeName.toLowerCase())&&dt.test(r.type)?l.checked=r.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=r.defaultValue);if(e)if(i)for(s=s||gt(t),o=o||gt(c),n=0,a=s.length;n<a;n++)Rt(s[n],o[n]);else Rt(t,c);return 0<(o=gt(c,"script")).length&&_t(o,!u&&gt(t,"script")),c},cleanData:function(t){for(var e,i,n,a=w.event.special,s=0;void 0!==(i=t[s]);s++)if($(i)){if(e=i[K.expando]){if(e.events)for(n in e.events)a[n]?w.event.remove(i,n):w.removeEvent(i,n,e.handle);i[K.expando]=void 0}i[Q.expando]&&(i[Q.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Ft(this,t,!0)},remove:function(t){return Ft(this,t)},text:function(t){return V(this,(function(t){return void 0===t?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Bt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Dt(this,t).appendChild(t)}))},prepend:function(){return Bt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Dt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Bt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Bt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(gt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return w.clone(this,t,e)}))},html:function(t){return V(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!mt[(pt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(w.cleanData(gt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Bt(this,arguments,(function(e){var i=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(gt(this)),i&&i.replaceChild(e,this))}),t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){w.fn[t]=function(t){for(var i,n=[],a=w(t),s=a.length-1,o=0;o<=s;o++)i=o===s?this:this.clone(!0),w(a[o])[e](i),r.apply(n,i.get());return this.pushStack(n)}}));var jt=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),Wt=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Zt=new RegExp(nt.join("|"),"i");function Vt(t,e,i){var n,a,s,o,r=t.style;return(i=i||Wt(t))&&(""!==(o=i.getPropertyValue(e)||i[e])||st(t)||(o=w.style(t,e)),!f.pixelBoxStyles()&&jt.test(o)&&Zt.test(e)&&(n=r.width,a=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=n,r.minWidth=a,r.maxWidth=s)),void 0!==o?o+"":o}function qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(h).appendChild(c);var e=t.getComputedStyle(c);a="1%"!==e.top,l=12===i(e.marginLeft),c.style.right="60%",r=36===i(e.right),s=36===i(e.width),c.style.position="absolute",o=12===i(c.offsetWidth/3),at.removeChild(h),c=null}}function i(t){return Math.round(parseFloat(t))}var a,s,o,r,l,h=n.createElement("div"),c=n.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(f,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),r},pixelPosition:function(){return e(),a},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o}}))}();var Gt=["Webkit","Moz","ms"],Ht=n.createElement("div").style,Ut={};function $t(t){return w.cssProps[t]||Ut[t]||(t in Ht?t:Ut[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Gt.length;i--;)if((t=Gt[i]+e)in Ht)return t}(t)||t)}var Yt=/^(none|table(?!-c[ea]).+)/,Kt=/^--/,Qt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,i){var n=it.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function te(t,e,i,n,a,s){var o="width"===e?1:0,r=0,l=0;if(i===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(l+=w.css(t,i+nt[o],!0,a)),n?("content"===i&&(l-=w.css(t,"padding"+nt[o],!0,a)),"margin"!==i&&(l-=w.css(t,"border"+nt[o]+"Width",!0,a))):(l+=w.css(t,"padding"+nt[o],!0,a),"padding"!==i?l+=w.css(t,"border"+nt[o]+"Width",!0,a):r+=w.css(t,"border"+nt[o]+"Width",!0,a));return!n&&0<=s&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-r-.5))||0),l}function ee(t,e,i){var n=Wt(t),a=(!f.boxSizingReliable()||i)&&"border-box"===w.css(t,"boxSizing",!1,n),s=a,o=Vt(t,e,n),r="offset"+e[0].toUpperCase()+e.slice(1);if(jt.test(o)){if(!i)return o;o="auto"}return(!f.boxSizingReliable()&&a||"auto"===o||!parseFloat(o)&&"inline"===w.css(t,"display",!1,n))&&t.getClientRects().length&&(a="border-box"===w.css(t,"boxSizing",!1,n),(s=r in t)&&(o=t[r])),(o=parseFloat(o)||0)+te(t,e,i||(a?"border":"content"),s,n,o)+"px"}function ie(t,e,i,n,a){return new ie.prototype.init(t,e,i,n,a)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Vt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,s,o,r=U(e),l=Kt.test(e),h=t.style;if(l||(e=$t(r)),o=w.cssHooks[e]||w.cssHooks[r],void 0===i)return o&&"get"in o&&void 0!==(a=o.get(t,!1,n))?a:h[e];"string"==(s=typeof i)&&(a=it.exec(i))&&a[1]&&(i=ht(t,e,a),s="number"),null!=i&&i==i&&("number"!==s||l||(i+=a&&a[3]||(w.cssNumber[r]?"":"px")),f.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(l?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,n){var a,s,o,r=U(e);return Kt.test(e)||(e=$t(r)),(o=w.cssHooks[e]||w.cssHooks[r])&&"get"in o&&(a=o.get(t,!0,i)),void 0===a&&(a=Vt(t,e,n)),"normal"===a&&e in Xt&&(a=Xt[e]),""===i||i?(s=parseFloat(a),!0===i||isFinite(s)?s||0:a):a}}),w.each(["height","width"],(function(t,e){w.cssHooks[e]={get:function(t,i,n){if(i)return!Yt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ee(t,e,n):lt(t,Qt,(function(){return ee(t,e,n)}))},set:function(t,i,n){var a,s=Wt(t),o=!f.scrollboxSize()&&"absolute"===s.position,r=(o||n)&&"border-box"===w.css(t,"boxSizing",!1,s),l=n?te(t,e,n,r,s):0;return r&&o&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-te(t,e,"border",!1,s)-.5)),l&&(a=it.exec(i))&&"px"!==(a[3]||"px")&&(t.style[e]=i,i=w.css(t,e)),Jt(0,i,l)}}})),w.cssHooks.marginLeft=qt(f.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Vt(t,"marginLeft"))||t.getBoundingClientRect().left-lt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(t,e){w.cssHooks[t+e]={expand:function(i){for(var n=0,a={},s="string"==typeof i?i.split(" "):[i];n<4;n++)a[t+nt[n]+e]=s[n]||s[n-2]||s[0];return a}},"margin"!==t&&(w.cssHooks[t+e].set=Jt)})),w.fn.extend({css:function(t,e){return V(this,(function(t,e,i){var n,a,s={},o=0;if(Array.isArray(e)){for(n=Wt(t),a=e.length;o<a;o++)s[e[o]]=w.css(t,e[o],!1,n);return s}return void 0!==i?w.style(t,e,i):w.css(t,e)}),t,e,1<arguments.length)}}),((w.Tween=ie).prototype={constructor:ie,init:function(t,e,i,n,a,s){this.elem=t,this.prop=i,this.easing=a||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(w.cssNumber[i]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,i=ie.propHooks[this.prop];return this.pos=e=this.options.duration?w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ie.propHooks._default.set(this),this}}).init.prototype=ie.prototype,(ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[$t(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=ie.prototype.init,w.fx.step={};var ne,ae,se,oe,re=/^(?:toggle|show|hide)$/,le=/queueHooks$/;function he(){ae&&(!1===n.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(he):t.setTimeout(he,w.fx.interval),w.fx.tick())}function ce(){return t.setTimeout((function(){ne=void 0})),ne=Date.now()}function ue(t,e){var i,n=0,a={height:t};for(e=e?1:0;n<4;n+=2-e)a["margin"+(i=nt[n])]=a["padding"+i]=t;return e&&(a.opacity=a.width=t),a}function de(t,e,i){for(var n,a=(pe.tweeners[e]||[]).concat(pe.tweeners["*"]),s=0,o=a.length;s<o;s++)if(n=a[s].call(i,e,t))return n}function pe(t,e,i){var n,a,s=0,o=pe.prefilters.length,r=w.Deferred().always((function(){delete l.elem})),l=function(){if(a)return!1;for(var e=ne||ce(),i=Math.max(0,h.startTime+h.duration-e),n=1-(i/h.duration||0),s=0,o=h.tweens.length;s<o;s++)h.tweens[s].run(n);return r.notifyWith(t,[h,n,i]),n<1&&o?i:(o||r.notifyWith(t,[h,1,0]),r.resolveWith(t,[h]),!1)},h=r.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},i),originalProperties:e,originalOptions:i,startTime:ne||ce(),duration:i.duration,tweens:[],createTween:function(e,i){var n=w.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(a)return this;for(a=!0;i<n;i++)h.tweens[i].run(1);return e?(r.notifyWith(t,[h,1,0]),r.resolveWith(t,[h,e])):r.rejectWith(t,[h,e]),this}}),c=h.props;for(function(t,e){var i,n,a,s,o;for(i in t)if(a=e[n=U(i)],s=t[i],Array.isArray(s)&&(a=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),(o=w.cssHooks[n])&&"expand"in o)for(i in s=o.expand(s),delete t[n],s)i in t||(t[i]=s[i],e[i]=a);else e[n]=a}(c,h.opts.specialEasing);s<o;s++)if(n=pe.prefilters[s].call(h,t,c,h.opts))return m(n.stop)&&(w._queueHooks(h.elem,h.opts.queue).stop=n.stop.bind(n)),n;return w.map(c,de,h),m(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),w.fx.timer(w.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}w.Animation=w.extend(pe,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return ht(i.elem,t,it.exec(e),i),i}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(N);for(var i,n=0,a=t.length;n<a;n++)(pe.tweeners[i=t[n]]=pe.tweeners[i]||[]).unshift(e)},prefilters:[function(t,e,i){var n,a,s,o,r,l,h,c,u="width"in e||"height"in e,d=this,p={},f=t.style,m=t.nodeType&&rt(t),g=K.get(t,"fxshow");for(n in i.queue||(null==(o=w._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,r=o.empty.fire,o.empty.fire=function(){o.unqueued||r()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,w.queue(t,"fx").length||o.empty.fire()}))}))),e)if(re.test(a=e[n])){if(delete e[n],s=s||"toggle"===a,a===(m?"hide":"show")){if("show"!==a||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||w.style(t,n)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(p))for(n in u&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(h=g&&g.display)&&(h=K.get(t,"display")),"none"===(c=w.css(t,"display"))&&(h?c=h:(ut([t],!0),h=t.style.display||h,c=w.css(t,"display"),ut([t]))),("inline"===c||"inline-block"===c&&null!=h)&&"none"===w.css(t,"float")&&(l||(d.done((function(){f.display=h})),null==h&&(h="none"===(c=f.display)?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=K.access(t,"fxshow",{display:h}),s&&(g.hidden=!m),m&&ut([t],!0),d.done((function(){for(n in m||ut([t]),K.remove(t,"fxshow"),p)w.style(t,n,p[n])}))),l=de(m?g[n]:0,n,d),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?pe.prefilters.unshift(t):pe.prefilters.push(t)}}),w.speed=function(t,e,i){var n=t&&"object"==typeof t?w.extend({},t):{complete:i||!i&&e||m(t)&&t,duration:t,easing:i&&e||e&&!m(e)&&e};return w.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in w.fx.speeds?w.fx.speeds[n.duration]:w.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){m(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.fn.extend({fadeTo:function(t,e,i,n){return this.filter(rt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var a=w.isEmptyObject(t),s=w.speed(e,i,n),o=function(){var e=pe(this,w.extend({},t),s);(a||K.get(this,"finish"))&&e.stop(!0)};return o.finish=o,a||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,a=null!=t&&t+"queueHooks",s=w.timers,o=K.get(this);if(a)o[a]&&o[a].stop&&n(o[a]);else for(a in o)o[a]&&o[a].stop&&le.test(a)&&n(o[a]);for(a=s.length;a--;)s[a].elem!==this||null!=t&&s[a].queue!==t||(s[a].anim.stop(i),e=!1,s.splice(a,1));!e&&i||w.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=K.get(this),n=i[t+"queue"],a=i[t+"queueHooks"],s=w.timers,o=n?n.length:0;for(i.finish=!0,w.queue(this,t,[]),a&&a.stop&&a.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),w.each(["toggle","show","hide"],(function(t,e){var i=w.fn[e];w.fn[e]=function(t,n,a){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ue(e,!0),t,n,a)}})),w.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){w.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),w.timers=[],w.fx.tick=function(){var t,e=0,i=w.timers;for(ne=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||w.fx.stop(),ne=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ae||(ae=!0,he())},w.fx.stop=function(){ae=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,i){return e=w.fx&&w.fx.speeds[e]||e,this.queue(i=i||"fx",(function(i,n){var a=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(a)}}))},se=n.createElement("input"),oe=n.createElement("select").appendChild(n.createElement("option")),se.type="checkbox",f.checkOn=""!==se.value,f.optSelected=oe.selected,(se=n.createElement("input")).value="t",se.type="radio",f.radioValue="t"===se.value;var fe,me=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return V(this,w.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each((function(){w.removeAttr(this,t)}))}}),w.extend({attr:function(t,e,i){var n,a,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?w.prop(t,e,i):(1===s&&w.isXMLDoc(t)||(a=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?fe:void 0)),void 0!==i?null===i?void w.removeAttr(t,e):a&&"set"in a&&void 0!==(n=a.set(t,i,e))?n:(t.setAttribute(e,i+""),i):a&&"get"in a&&null!==(n=a.get(t,e))?n:null==(n=w.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&T(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,a=e&&e.match(N);if(a&&1===t.nodeType)for(;i=a[n++];)t.removeAttribute(i)}}),fe={set:function(t,e,i){return!1===e?w.removeAttr(t,i):t.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=me[e]||w.find.attr;me[e]=function(t,e,n){var a,s,o=e.toLowerCase();return n||(s=me[o],me[o]=a,a=null!=i(t,e,n)?o:null,me[o]=s),a}}));var ge=/^(?:input|select|textarea|button)$/i,_e=/^(?:a|area)$/i;function ve(t){return(t.match(N)||[]).join(" ")}function ye(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(N)||[]}w.fn.extend({prop:function(t,e){return V(this,w.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each((function(){delete this[w.propFix[t]||t]}))}}),w.extend({prop:function(t,e,i){var n,a,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&w.isXMLDoc(t)||(a=w.propHooks[e=w.propFix[e]||e]),void 0!==i?a&&"set"in a&&void 0!==(n=a.set(t,i,e))?n:t[e]=i:a&&"get"in a&&null!==(n=a.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||_e.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(w.propHooks.selected={get:function(t){return null},set:function(t){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(t){var e,i,n,a,s,o,r,l=0;if(m(t))return this.each((function(e){w(this).addClass(t.call(this,e,ye(this)))}));if((e=be(t)).length)for(;i=this[l++];)if(a=ye(i),n=1===i.nodeType&&" "+ve(a)+" "){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a!==(r=ve(n))&&i.setAttribute("class",r)}return this},removeClass:function(t){var e,i,n,a,s,o,r,l=0;if(m(t))return this.each((function(e){w(this).removeClass(t.call(this,e,ye(this)))}));if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;i=this[l++];)if(a=ye(i),n=1===i.nodeType&&" "+ve(a)+" "){for(o=0;s=e[o++];)for(;-1<n.indexOf(" "+s+" ");)n=n.replace(" "+s+" "," ");a!==(r=ve(n))&&i.setAttribute("class",r)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):m(t)?this.each((function(i){w(this).toggleClass(t.call(this,i,ye(this),e),e)})):this.each((function(){var e,a,s,o;if(n)for(a=0,s=w(this),o=be(t);e=o[a++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==i||((e=ye(this))&&K.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":K.get(this,"__className__")||""))}))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+ve(ye(i))+" ").indexOf(e))return!0;return!1}});var we=/\r/g;w.fn.extend({val:function(t){var e,i,n,a=this[0];return arguments.length?(n=m(t),this.each((function(i){var a;1===this.nodeType&&(null==(a=n?t.call(this,i,w(this).val()):t)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=w.map(a,(function(t){return null==t?"":t+""}))),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,a,"value")||(this.value=a))}))):a?(e=w.valHooks[a.type]||w.valHooks[a.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(a,"value"))?i:"string"==typeof(i=a.value)?i.replace(we,""):null==i?"":i:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ve(w.text(t))}},select:{get:function(t){var e,i,n,a=t.options,s=t.selectedIndex,o="select-one"===t.type,r=o?null:[],l=o?s+1:a.length;for(n=s<0?l:o?s:0;n<l;n++)if(((i=a[n]).selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!T(i.parentNode,"optgroup"))){if(e=w(i).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var i,n,a=t.options,s=w.makeArray(e),o=a.length;o--;)((n=a[o]).selected=-1<w.inArray(w.valHooks.option.get(n),s))&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<w.inArray(w(t).val(),e)}},f.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),f.focusin="onfocusin"in t;var Me=/^(?:focusinfocus|focusoutblur)$/,Ce=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,i,a,s){var o,r,l,h,c,d,p,f,_=[a||n],v=u.call(e,"type")?e.type:e,y=u.call(e,"namespace")?e.namespace.split("."):[];if(r=f=l=a=a||n,3!==a.nodeType&&8!==a.nodeType&&!Me.test(v+w.event.triggered)&&(-1<v.indexOf(".")&&(v=(y=v.split(".")).shift(),y.sort()),c=v.indexOf(":")<0&&"on"+v,(e=e[w.expando]?e:new w.Event(v,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=a),i=null==i?[e]:w.makeArray(i,[e]),p=w.event.special[v]||{},s||!p.trigger||!1!==p.trigger.apply(a,i))){if(!s&&!p.noBubble&&!g(a)){for(Me.test((h=p.delegateType||v)+v)||(r=r.parentNode);r;r=r.parentNode)_.push(r),l=r;l===(a.ownerDocument||n)&&_.push(l.defaultView||l.parentWindow||t)}for(o=0;(r=_[o++])&&!e.isPropagationStopped();)f=r,e.type=1<o?h:p.bindType||v,(d=(K.get(r,"events")||{})[e.type]&&K.get(r,"handle"))&&d.apply(r,i),(d=c&&r[c])&&d.apply&&$(r)&&(e.result=d.apply(r,i),!1===e.result&&e.preventDefault());return e.type=v,s||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(_.pop(),i)||!$(a)||c&&m(a[v])&&!g(a)&&((l=a[c])&&(a[c]=null),w.event.triggered=v,e.isPropagationStopped()&&f.addEventListener(v,Ce),a[v](),e.isPropagationStopped()&&f.removeEventListener(v,Ce),w.event.triggered=void 0,l&&(a[c]=l)),e.result}},simulate:function(t,e,i){var n=w.extend(new w.Event,i,{type:t,isSimulated:!0});w.event.trigger(n,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each((function(){w.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return w.event.trigger(t,e,i,!0)}}),f.focusin||w.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var n=this.ownerDocument||this,a=K.access(n,e);a||n.addEventListener(t,i,!0),K.access(n,e,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this,a=K.access(n,e)-1;a?K.access(n,e,a):(n.removeEventListener(t,i,!0),K.remove(n,e))}}}));var xe=t.location,ke=Date.now(),Se=/\?/;w.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),i};var Le=/\[\]$/,Te=/\r?\n/g,Ae=/^(?:submit|button|image|reset|file)$/i,Ie=/^(?:input|select|textarea|keygen)/i;function Pe(t,e,i,n){var a;if(Array.isArray(e))w.each(e,(function(e,a){i||Le.test(t)?n(t,a):Pe(t+"["+("object"==typeof a&&null!=a?e:"")+"]",a,i,n)}));else if(i||"object"!==y(e))n(t,e);else for(a in e)Pe(t+"["+a+"]",e[a],i,n)}w.param=function(t,e){var i,n=[],a=function(t,e){var i=m(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,(function(){a(this.name,this.value)}));else for(i in t)Pe(i,t[i],e,a);return n.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Ie.test(this.nodeName)&&!Ae.test(t)&&(this.checked||!dt.test(t))})).map((function(t,e){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,(function(t){return{name:e.name,value:t.replace(Te,"\r\n")}})):{name:e.name,value:i.replace(Te,"\r\n")}})).get()}});var Ee=/%20/g,ze=/#.*$/,De=/([?&])_=[^&]*/,Oe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ne=/^(?:GET|HEAD)$/,Re=/^\/\//,Be={},Fe={},je="*/".concat("*"),We=n.createElement("a");function Ze(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,a=0,s=e.toLowerCase().match(N)||[];if(m(i))for(;n=s[a++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Ve(t,e,i,n){var a={},s=t===Fe;function o(r){var l;return a[r]=!0,w.each(t[r]||[],(function(t,r){var h=r(e,i,n);return"string"!=typeof h||s||a[h]?s?!(l=h):void 0:(e.dataTypes.unshift(h),o(h),!1)})),l}return o(e.dataTypes[0])||!a["*"]&&o("*")}function qe(t,e){var i,n,a=w.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((a[i]?t:n||(n={}))[i]=e[i]);return n&&w.extend(!0,t,n),t}We.href=xe.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?qe(qe(t,w.ajaxSettings),e):qe(w.ajaxSettings,t)},ajaxPrefilter:Ze(Be),ajaxTransport:Ze(Fe),ajax:function(e,i){"object"==typeof e&&(i=e,e=void 0);var a,s,o,r,l,h,c,u,d,p,f=w.ajaxSetup({},i=i||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?w(m):w.event,_=w.Deferred(),v=w.Callbacks("once memory"),y=f.statusCode||{},b={},M={},C="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(c){if(!r)for(r={};e=Oe.exec(o);)r[e[1].toLowerCase()+" "]=(r[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=r[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=M[t.toLowerCase()]=M[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)x.always(t[x.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||C;return a&&a.abort(e),k(0,e),this}};if(_.promise(x),f.url=((e||f.url||xe.href)+"").replace(Re,xe.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(N)||[""],null==f.crossDomain){h=n.createElement("a");try{h.href=f.url,h.href=h.href,f.crossDomain=We.protocol+"//"+We.host!=h.protocol+"//"+h.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),Ve(Be,f,i,x),c)return x;for(d in(u=w.event&&f.global)&&0==w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ne.test(f.type),s=f.url.replace(ze,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ee,"+")):(p=f.url.slice(s.length),f.data&&(f.processData||"string"==typeof f.data)&&(s+=(Se.test(s)?"&":"?")+f.data,delete f.data),!1===f.cache&&(s=s.replace(De,"$1"),p=(Se.test(s)?"&":"?")+"_="+ke+++p),f.url=s+p),f.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+je+"; q=0.01":""):f.accepts["*"]),f.headers)x.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(m,x,f)||c))return x.abort();if(C="abort",v.add(f.complete),x.done(f.success),x.fail(f.error),a=Ve(Fe,f,i,x)){if(x.readyState=1,u&&g.trigger("ajaxSend",[x,f]),c)return x;f.async&&0<f.timeout&&(l=t.setTimeout((function(){x.abort("timeout")}),f.timeout));try{c=!1,a.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,i,n,r){var h,d,p,b,M,C=i;c||(c=!0,l&&t.clearTimeout(l),a=void 0,o=r||"",x.readyState=0<e?4:0,h=200<=e&&e<300||304===e,n&&(b=function(t,e,i){for(var n,a,s,o,r=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(a in r)if(r[a]&&r[a].test(n)){l.unshift(a);break}if(l[0]in i)s=l[0];else{for(a in i){if(!l[0]||t.converters[a+" "+l[0]]){s=a;break}o||(o=a)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),i[s]}(f,x,n)),b=function(t,e,i,n){var a,s,o,r,l,h={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];for(s=c.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=h[l+" "+s]||h["* "+s]))for(a in h)if((r=a.split(" "))[1]===s&&(o=h[l+" "+r[0]]||h["* "+r[0]])){!0===o?o=h[a]:!0!==h[a]&&(s=r[0],c.unshift(r[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(f,b,x,h),h?(f.ifModified&&((M=x.getResponseHeader("Last-Modified"))&&(w.lastModified[s]=M),(M=x.getResponseHeader("etag"))&&(w.etag[s]=M)),204===e||"HEAD"===f.type?C="nocontent":304===e?C="notmodified":(C=b.state,d=b.data,h=!(p=b.error))):(p=C,!e&&C||(C="error",e<0&&(e=0))),x.status=e,x.statusText=(i||C)+"",h?_.resolveWith(m,[d,C,x]):_.rejectWith(m,[x,C,p]),x.statusCode(y),y=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[x,f,h?d:p]),v.fireWith(m,[x,C]),u&&(g.trigger("ajaxComplete",[x,f]),--w.active||w.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,i){return w.get(t,e,i,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],(function(t,e){w[e]=function(t,i,n,a){return m(i)&&(a=a||n,n=i,i=void 0),w.ajax(w.extend({url:t,type:e,dataType:a,data:i,success:n},w.isPlainObject(t)&&t))}})),w._evalUrl=function(t,e){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){w(this).wrapInner(t.call(this,e))})):this.each((function(){var e=w(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(i){w(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Ge={0:200,1223:204},He=w.ajaxSettings.xhr();f.cors=!!He&&"withCredentials"in He,f.ajax=He=!!He,w.ajaxTransport((function(e){var i,n;if(f.cors||He&&!e.crossDomain)return{send:function(a,s){var o,r=e.xhr();if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)r[o]=e.xhrFields[o];for(o in e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)r.setRequestHeader(o,a[o]);i=function(t){return function(){i&&(i=n=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===t?r.abort():"error"===t?"number"!=typeof r.status?s(0,"error"):s(r.status,r.statusText):s(Ge[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),n=r.onerror=r.ontimeout=i("error"),void 0!==r.onabort?r.onabort=n:r.onreadystatechange=function(){4===r.readyState&&t.setTimeout((function(){i&&n()}))},i=i("abort");try{r.send(e.hasContent&&e.data||null)}catch(a){if(i)throw a}},abort:function(){i&&i()}}})),w.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),w.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(a,s){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),n.head.appendChild(e[0])},abort:function(){i&&i()}}}));var Ue,$e=[],Ye=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=$e.pop()||w.expando+"_"+ke++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",(function(e,i,n){var a,s,o,r=!1!==e.jsonp&&(Ye.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(e.data)&&"data");if(r||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(Ye,"$1"+a):!1!==e.jsonp&&(e.url+=(Se.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return o||w.error(a+" was not called"),o[0]},e.dataTypes[0]="json",s=t[a],t[a]=function(){o=arguments},n.always((function(){void 0===s?w(t).removeProp(a):t[a]=s,e[a]&&(e.jsonpCallback=i.jsonpCallback,$e.push(a)),o&&m(s)&&s(o[0]),o=s=void 0})),"script"})),f.createHTMLDocument=((Ue=n.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ue.childNodes.length),w.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(f.createHTMLDocument?((a=(e=n.implementation.createHTMLDocument("")).createElement("base")).href=n.location.href,e.head.appendChild(a)):e=n),o=!i&&[],(s=A.exec(t))?[e.createElement(s[1])]:(s=wt([t],e,o),o&&o.length&&w(o).remove(),w.merge([],s.childNodes)));var a,s,o},w.fn.load=function(t,e,i){var n,a,s,o=this,r=t.indexOf(" ");return-1<r&&(n=ve(t.slice(r)),t=t.slice(0,r)),m(e)?(i=e,e=void 0):e&&"object"==typeof e&&(a="POST"),0<o.length&&w.ajax({url:t,type:a||"GET",dataType:"html",data:e}).done((function(t){s=arguments,o.html(n?w("<div>").append(w.parseHTML(t)).find(n):t)})).always(i&&function(t,e){o.each((function(){i.apply(this,s||[t.responseText,e,t])}))}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){w.fn[e]=function(t){return this.on(e,t)}})),w.expr.pseudos.animated=function(t){return w.grep(w.timers,(function(e){return t===e.elem})).length},w.offset={setOffset:function(t,e,i){var n,a,s,o,r,l,h=w.css(t,"position"),c=w(t),u={};"static"===h&&(t.style.position="relative"),r=c.offset(),s=w.css(t,"top"),l=w.css(t,"left"),("absolute"===h||"fixed"===h)&&-1<(s+l).indexOf("auto")?(o=(n=c.position()).top,a=n.left):(o=parseFloat(s)||0,a=parseFloat(l)||0),m(e)&&(e=e.call(t,i,w.extend({},r))),null!=e.top&&(u.top=e.top-r.top+o),null!=e.left&&(u.left=e.left-r.left+a),"using"in e?e.using.call(t,u):c.css(u)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){w.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?{top:(e=n.getBoundingClientRect()).top+(i=n.ownerDocument.defaultView).pageYOffset,left:e.left+i.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],a={top:0,left:0};if("fixed"===w.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((a=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),a.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-a.top-w.css(n,"marginTop",!0),left:e.left-a.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||at}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;w.fn[t]=function(n){return V(this,(function(t,n,a){var s;if(g(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===a)return s?s[e]:t[n];s?s.scrollTo(i?s.pageXOffset:a,i?a:s.pageYOffset):t[n]=a}),t,n,arguments.length)}})),w.each(["top","left"],(function(t,e){w.cssHooks[e]=qt(f.pixelPosition,(function(t,i){if(i)return i=Vt(t,e),jt.test(i)?w(t).position()[e]+"px":i}))})),w.each({Height:"height",Width:"width"},(function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){w.fn[n]=function(a,s){var o=arguments.length&&(i||"boolean"!=typeof a),r=i||(!0===a||!0===s?"margin":"border");return V(this,(function(e,i,a){var s;return g(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===a?w.css(e,i,r):w.style(e,i,a,r)}),e,o?a:void 0,o)}}))})),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){w.fn[e]=function(t,i){return 0<arguments.length?this.on(e,null,t,i):this.trigger(e)}})),w.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),w.proxy=function(t,e){var i,n,a;if("string"==typeof e&&(i=t[e],e=t,t=i),m(t))return n=s.call(arguments,2),(a=function(){return t.apply(e||this,n.concat(s.call(arguments)))}).guid=t.guid=t.guid||w.guid++,a},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=T,w.isFunction=m,w.isWindow=g,w.camelCase=U,w.type=y,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return w}));var Ke=t.jQuery,Qe=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Qe),e&&t.jQuery===w&&(t.jQuery=Ke),w},e||(t.jQuery=t.$=w),w})),function(t){"function"==typeof define&&define.amd?define(["jquery","../version","../keycode"],t):t(jQuery)}((function(t){var e;function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,(function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",i,a)}function a(){t.datepicker._isDisabledDatepicker(e.inline?e.dpDiv.parent()[0]:e.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function s(e,i){for(var n in t.extend(e,i),i)null==i[n]&&(e[n]=i[n]);return e}return t.extend(t.ui,{datepicker:{version:"1.12.1"}}),t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return s(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,a,s;a="div"===(n=e.nodeName.toLowerCase())||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(s=this._newInst(t(e),a)).settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,s):a&&this._inlineDatepicker(e,s)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,a,s,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=t("<span class='"+this._appendClass+"'>"+o+"</span>"),e[r?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||e.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(a=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:s,alt:a,title:a}):t("<button type='button'></button>").addClass(this._triggerClass).html(s?t("<img/>").attr({src:s,alt:a,title:a}):a)),e[r?"before":"after"](i.trigger),i.trigger.on("click",(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1})))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,a,s=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(s.setMonth((e=function(t){for(i=0,n=0,a=0;a<t.length;a++)t[a].length>i&&(i=t[a].length,n=a);return n})(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),t.input.attr("size",this._formatDate(t,s).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,a,o){var r,l,h,c,u=this._dialogInst;return u||(this.uuid+=1,this._dialogInput=t("<input type='text' id='dp"+this.uuid+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),(u=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",u)),s(u.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(u,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(r=document.documentElement.clientWidth,l=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[r/2-100+h,l/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",u),this},_destroyDatepicker:function(i){var n,a=t(i),s=t.data(i,"datepicker");a.hasClass(this.markerClassName)&&(n=i.nodeName.toLowerCase(),t.removeData(i,"datepicker"),"input"===n?(s.append.remove(),s.trigger.remove(),a.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==n&&"span"!==n||a.removeClass(this.markerClassName).empty(),e===s&&(e=null))},_enableDatepicker:function(e){var i,n,a=t(e),s=t.data(e,"datepicker");a.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,s.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((n=a.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var i,n,a=t(e),s=t.data(e,"datepicker");a.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,s.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((n=a.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var a,o,r,l,h=this._getInst(e);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?t.extend({},t.datepicker._defaults):h?"all"===i?t.extend({},h.settings):this._get(h,i):null;a=i||{},"string"==typeof i&&((a={})[i]=n),h&&(this._curInst===h&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(h,"min"),l=this._getMinMaxDate(h,"max"),s(h.settings,a),null!==r&&void 0!==a.dateFormat&&void 0===a.minDate&&(h.settings.minDate=this._formatDate(h,r)),null!==l&&void 0!==a.dateFormat&&void 0===a.maxDate&&(h.settings.maxDate=this._formatDate(h,l)),"disabled"in a&&(a.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),h),this._autoSize(h),this._setDate(h,o),this._updateAlternate(h),this._updateDatepicker(h))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,a,s=t.datepicker._getInst(e.target),o=!0,r=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),o=!1;break;case 13:return(a=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",s.dpDiv))[0]&&t.datepicker._selectDay(e.target,s.selectedMonth,s.selectedYear,a[0]),(i=t.datepicker._get(s,"onSelect"))?(n=t.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[n,s])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(s,"stepBigMonths"):-t.datepicker._get(s,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(s,"stepBigMonths"):+t.datepicker._get(s,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(s,"stepBigMonths"):-t.datepicker._get(s,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(s,"stepBigMonths"):+t.datepicker._get(s,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,a=t.datepicker._getInst(e.target);if(t.datepicker._get(a,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(a,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(n){}return!0},_showDatepicker:function(e){var i,n,a,o,r,l,h;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e||(i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(a=(n=t.datepicker._get(i,"beforeShow"))?n.apply(e,[e,i]):{})&&(s(i.settings,a),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each((function(){return!(o|="fixed"===t(this).css("position"))})),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,o),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=t.datepicker._get(i,"showAnim"),h=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?i.dpDiv.show(l,t.datepicker._get(i,"showOptions"),h):i.dpDiv[l||"show"](l?h:null),t.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),t.datepicker._curInst=i)))},_updateDatepicker:function(i){this.maxRows=4,e=i,i.dpDiv.empty().append(this._generateHTML(i)),this._attachHandlers(i);var n,s=this._getNumberOfMonths(i),o=s[1],r=i.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&a.apply(r.get(0)),i.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&i.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",17*o+"em"),i.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),i.dpDiv[(this._get(i,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),i===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),i.yearshtml&&(n=i.yearshtml,setTimeout((function(){n===i.yearshtml&&i.yearshtml&&i.dpDiv.find("select.ui-datepicker-year:first").replaceWith(i.yearshtml),n=i.yearshtml=null}),0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var a=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?a-o:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+a>l&&l>a?Math.abs(i.left+a-l):0),i.top-=Math.min(i.top,i.top+s>h&&h>s?Math.abs(s+r):0),i},_findPos:function(e){for(var i,n=this._getInst(e),a=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[a?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,n,a,s,o=this._curInst;!o||e&&o!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),n=this._get(o,"duration"),a=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),n,a):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,a),i||a(),this._datepickerShowing=!1,(s=this._get(o,"onClose"))&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id===t.datepicker._mainDivId||0!==i.parents("#"+t.datepicker._mainDivId).length||i.hasClass(t.datepicker.markerClassName)||i.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===n)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var a=t(e),s=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(s,i+("M"===n?this._get(s,"showCurrentAtPos"):0),n),this._updateDatepicker(s))},_gotoToday:function(e){var i,n=t(e),a=this._getInst(n[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(i=new Date,a.selectedDay=i.getDate(),a.drawMonth=a.selectedMonth=i.getMonth(),a.drawYear=a.selectedYear=i.getFullYear()),this._notifyChange(a),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var a=t(e),s=this._getInst(a[0]);s["selected"+("M"===n?"Month":"Year")]=s["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(a)},_selectDay:function(e,i,n,a){var s,o=t(e);t(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((s=this._getInst(o[0])).selectedDay=s.currentDay=t("a",a).html(),s.selectedMonth=s.currentMonth=i,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,a=t(e),s=this._getInst(a[0]);i=null!=i?i:this._formatDate(s),s.input&&s.input.val(i),this._updateAlternate(s),(n=this._get(s,"onSelect"))?n.apply(s.input?s.input[0]:null,[i,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,n,a,s=this._get(e,"altField");s&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),a=this.formatDate(i,n,this._getFormatConfig(e)),t(s).val(a))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var a,s,o,r,l=0,h=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,_=-1,v=-1,y=!1,b=function(t){var i=a+1<e.length&&e.charAt(a+1)===t;return i&&a++,i},w=function(t){var e=b(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,a=new RegExp("^\\d{"+("y"===t?n:1)+","+n+"}"),s=i.substring(l).match(a);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},M=function(e,n,a){var s=-1,o=t.map(b(e)?a:n,(function(t,e){return[[e,t]]})).sort((function(t,e){return-(t[1].length-e[1].length)}));if(t.each(o,(function(t,e){var n=e[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return s=e[0],l+=n.length,!1})),-1!==s)return s+1;throw"Unknown name at position "+l},C=function(){if(i.charAt(l)!==e.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;a<e.length;a++)if(y)"'"!==e.charAt(a)||b("'")?C():y=!1;else switch(e.charAt(a)){case"d":_=w("d");break;case"D":M("D",u,d);break;case"o":v=w("o");break;case"m":g=w("m");break;case"M":g=M("M",p,f);break;case"y":m=w("y");break;case"@":m=(r=new Date(w("@"))).getFullYear(),g=r.getMonth()+1,_=r.getDate();break;case"!":m=(r=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),g=r.getMonth()+1,_=r.getDate();break;case"'":b("'")?C():y=!0;break;default:C()}if(l<i.length&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=c?0:-100)),v>-1)for(g=1,_=v;!(_<=(s=this._getDaysInMonth(m,g-1)));)g++,_-=s;if((r=this._daylightSavingAdjust(new Date(m,g-1,_))).getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==_)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},h=function(t,e,i){var n=""+e;if(l(t))for(;n.length<i;)n="0"+n;return n},c=function(t,e,i,n){return l(t)?n[e]:i[e]},u="",d=!1;if(e)for(n=0;n<t.length;n++)if(d)"'"!==t.charAt(n)||l("'")?u+=t.charAt(n):d=!1;else switch(t.charAt(n)){case"d":u+=h("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),a,s);break;case"o":u+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=h("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),o,r);break;case"y":u+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":d=!0;break;default:u+=t.charAt(n)}return u},_possibleChars:function(t){var e,i="",n=!1,a=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||a("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":a("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,a=this._getDefaultDate(t),s=a,o=this._getFormatConfig(t);try{s=this.parseDate(i,n,o)||a}catch(r){n=e?"":n}t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),t.currentDay=n?s.getDate():0,t.currentMonth=n?s.getMonth():0,t.currentYear=n?s.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var a=null==i||""===i?n:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(h){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=n.getFullYear(),s=n.getMonth(),o=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,s));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,s))}l=r.exec(i)}return new Date(a,s,o)}(i):"number"==typeof i?isNaN(i)?n:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(i):new Date(i.getTime());return(a=a&&"Invalid Date"===a.toString()?n:a)&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,a=t.selectedMonth,s=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),a===t.selectedMonth&&s===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var e,i,n,a,s,o,r,l,h,c,u,d,p,f,m,g,_,v,y,b,w,M,C,x,k,S,L,T,A,I,P,E,z,D,O,N,R,B,F,j=new Date,W=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),Z=this._get(t,"isRTL"),V=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),G=this._get(t,"navigationAsDateFormat"),H=this._getNumberOfMonths(t),U=this._get(t,"showCurrentAtPos"),$=this._get(t,"stepMonths"),Y=1!==H[0]||1!==H[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),X=this._getMinMaxDate(t,"max"),J=t.drawMonth-U,tt=t.drawYear;if(J<0&&(J+=12,tt--),X)for(e=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-H[0]*H[1]+1,X.getDate())),e=Q&&e<Q?Q:e;this._daylightSavingAdjust(new Date(tt,J,1))>e;)--J<0&&(J=11,tt--);for(t.drawMonth=J,t.drawYear=tt,i=this._get(t,"prevText"),i=G?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,J-$,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Z?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Z?"e":"w")+"'>"+i+"</span></a>",a=this._get(t,"nextText"),a=G?this.formatDate(a,this._daylightSavingAdjust(new Date(tt,J+$,1)),this._getFormatConfig(t)):a,s=this._canAdjustMonth(t,1,tt,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Z?"w":"e")+"'>"+a+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(Z?"w":"e")+"'>"+a+"</span></a>",o=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?K:W,o=G?this.formatDate(o,r,this._getFormatConfig(t)):o,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=V?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Z?l:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Z?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),y=this._getDefaultDate(t),b="",M=0;M<H[0];M++){for(C="",this.maxRows=4,x=0;x<H[1];x++){if(k=this._daylightSavingAdjust(new Date(tt,J,t.selectedDay)),S=" ui-corner-all",L="",Y){if(L+="<div class='ui-datepicker-group",H[1]>1)switch(x){case 0:L+=" ui-datepicker-group-first",S=" ui-corner-"+(Z?"right":"left");break;case H[1]-1:L+=" ui-datepicker-group-last",S=" ui-corner-"+(Z?"left":"right");break;default:L+=" ui-datepicker-group-middle",S=""}L+="'>"}for(L+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===M?Z?s:n:"")+(/all|right/.test(S)&&0===M?Z?n:s:"")+this._generateMonthYearHeader(t,J,tt,Q,X,M>0||x>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)T+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[A=(w+c)%7]+"'>"+p[A]+"</span></th>";for(L+=T+"</tr></thead><tbody>",I=this._getDaysInMonth(tt,J),tt===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,I)),P=(this._getFirstDayOfMonth(tt,J)-c+7)%7,E=Math.ceil((P+I)/7),this.maxRows=z=Y&&this.maxRows>E?this.maxRows:E,D=this._daylightSavingAdjust(new Date(tt,J,1-P)),O=0;O<z;O++){for(L+="<tr>",N=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(D)+"</td>":"",w=0;w<7;w++)R=g?g.apply(t.input?t.input[0]:null,[D]):[!0,""],F=(B=D.getMonth()!==J)&&!v||!R[0]||Q&&D<Q||X&&D>X,N+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(D.getTime()===k.getTime()&&J===t.selectedMonth&&t._keyEvent||y.getTime()===D.getTime()&&y.getTime()===k.getTime()?" "+this._dayOverClass:"")+(F?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!_?"":" "+R[1]+(D.getTime()===K.getTime()?" "+this._currentClass:"")+(D.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(B&&!_||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(F?"":" data-handler='selectDay' data-event='click' data-month='"+D.getMonth()+"' data-year='"+D.getFullYear()+"'")+">"+(B&&!_?"&#xa0;":F?"<span class='ui-state-default'>"+D.getDate()+"</span>":"<a class='ui-state-default"+(D.getTime()===W.getTime()?" ui-state-highlight":"")+(D.getTime()===K.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+D.getDate()+"</a>")+"</td>",D.setDate(D.getDate()+1),D=this._daylightSavingAdjust(D);L+=N+"</tr>"}++J>11&&(J=0,tt++),C+=L+="</tbody></table>"+(Y?"</div>"+(H[0]>0&&x===H[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}b+=C}return b+=h,t._keyEvent=!1,b},_generateMonthYearHeader:function(t,e,i,n,a,s,o,r){var l,h,c,u,d,p,f,m,g=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",b="";if(s||!g)b+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=n&&n.getFullYear()===i,h=a&&a.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=n.getMonth())&&(!h||c<=a.getMonth())&&(b+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");b+="</select>"}if(v||(y+=b+(!s&&g&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",s||!_)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),f=(p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e})(u[0]),m=Math.max(f,p(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=a?Math.min(m,a.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",y+=t.yearshtml,t.yearshtml=null}return y+=this._get(t,"yearSuffix"),v&&(y+=(!s&&g&&_?"":"&#xa0;")+b),y+"</div>"},_adjustInstDate:function(t,e,i){var n=t.selectedYear+("Y"===i?e:0),a=t.selectedMonth+("M"===i?e:0),s=Math.min(t.selectedDay,this._getDaysInMonth(n,a))+("D"===i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,a,s)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),a=i&&e<i?i:e;return n&&a>n?n:a},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var a=this._getNumberOfMonths(t),s=this._daylightSavingAdjust(new Date(i,n+(e<0?e:a[0]*a[1]),1));return e<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(t,s)},_isInRange:function(t,e){var i,n,a=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),o=null,r=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!a||e.getTime()>=a.getTime())&&(!s||e.getTime()<=s.getTime())&&(!o||e.getFullYear()>=o)&&(!r||e.getFullYear()<=r)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var a=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),a,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)})):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker})),function(t){"function"==typeof define&&define.amd?define(["../widgets/datepicker"],t):t(jQuery.datepicker)}((function(t){return t.regional.it={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","LunedÃ¬","MartedÃ¬","MercoledÃ¬","GiovedÃ¬","VenerdÃ¬","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.setDefaults(t.regional.it),t.regional.it})),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){var e,i="ui-effects-animated",n=t;return t.effects={effect:{}},function(t,e){var i,n=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],s=t.Color=function(e,i,n,a){return new t.Color.fn.parse(e,i,n,a)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},r={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=s.support={},h=t("<p>")[0],c=t.each;function u(t,e,i){var n=r[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function d(e){var n=s(),r=n._rgba=[];return e=e.toLowerCase(),c(a,(function(t,i){var a,s=i.re.exec(e),l=s&&i.parse(s),h=i.space||"rgba";if(l)return a=n[h](l),n[o[h].cache]=a[o[h].cache],r=n._rgba=a._rgba,!1})),r.length?("0,0,0,0"===r.join()&&t.extend(r,i.transparent),n):i[e]}function p(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}h.style.cssText="background-color:rgba(1,1,1,.5)",l.rgba=h.style.backgroundColor.indexOf("rgba")>-1,c(o,(function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}})),s.fn=t.extend(s.prototype,{parse:function(e,n,a,r){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(n),n=void 0);var l=this,h=t.type(e),p=this._rgba=[];return void 0!==n&&(e=[e,n,a,r],h="array"),"string"===h?this.parse(d(e)||i._default):"array"===h?(c(o.rgba.props,(function(t,i){p[i.idx]=u(e[i.idx],i)})),this):"object"===h?(c(o,e instanceof s?function(t,i){e[i.cache]&&(l[i.cache]=e[i.cache].slice())}:function(i,n){var a=n.cache;c(n.props,(function(t,i){if(!l[a]&&n.to){if("alpha"===t||null==e[t])return;l[a]=n.to(l._rgba)}l[a][i.idx]=u(e[t],i,!0)})),l[a]&&t.inArray(null,l[a].slice(0,3))<0&&(l[a][3]=1,n.from&&(l._rgba=n.from(l[a])))}),this):void 0},is:function(t){var e=s(t),i=!0,n=this;return c(o,(function(t,a){var s,o=e[a.cache];return o&&(s=n[a.cache]||a.to&&a.to(n._rgba)||[],c(a.props,(function(t,e){if(null!=o[e.idx])return i=o[e.idx]===s[e.idx]}))),i})),i},_space:function(){var t=[],e=this;return c(o,(function(i,n){e[n.cache]&&t.push(i)})),t.pop()},transition:function(t,e){var i=s(t),n=i._space(),a=o[n],l=0===this.alpha()?s("transparent"):this,h=l[a.cache]||a.to(l._rgba),d=h.slice();return i=i[a.cache],c(a.props,(function(t,n){var a=n.idx,s=h[a],o=i[a],l=r[n.type]||{};null!==o&&(null===s?d[a]=o:(l.mod&&(o-s>l.mod/2?s+=l.mod:s-o>l.mod/2&&(s-=l.mod)),d[a]=u((o-s)*e+s,n)))})),this[n](d)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),a=s(e)._rgba;return s(t.map(i,(function(t,e){return(1-n)*a[e]+n*t})))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,(function(t,e){return null==t?e>2?1:0:t}));return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),(function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t}));return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,(function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i=t[0]/255,n=t[1]/255,a=t[2]/255,s=t[3],o=Math.max(i,n,a),r=Math.min(i,n,a),l=o-r,h=o+r,c=.5*h;return e=0===l?0:c<=.5?l/h:l/(2-h),[Math.round(r===o?0:i===o?60*(n-a)/l+360:n===o?60*(a-i)/l+120:60*(i-n)/l+240)%360,e,c,null==s?1:s]},o.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],a=t[3],s=n<=.5?n*(1+i):n+i-n*i,o=2*n-s;return[Math.round(255*p(o,s,e+1/3)),Math.round(255*p(o,s,e)),Math.round(255*p(o,s,e-1/3)),a]},c(o,(function(e,i){var a=i.props,o=i.cache,r=i.to,l=i.from;s.fn[e]=function(e){if(r&&!this[o]&&(this[o]=r(this._rgba)),void 0===e)return this[o].slice();var i,n=t.type(e),h="array"===n||"object"===n?e:arguments,d=this[o].slice();return c(a,(function(t,e){var i=h["object"===n?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=u(i,e)})),l?((i=s(l(d)))[o]=d,i):s(d)},c(a,(function(i,a){s.fn[i]||(s.fn[i]=function(s){var o,r=t.type(s),l="alpha"===i?this._hsla?"hsla":"rgba":e,h=this[l](),c=h[a.idx];return"undefined"===r?c:("function"===r&&(s=s.call(this,c),r=t.type(s)),null==s&&a.empty?this:("string"===r&&(o=n.exec(s))&&(s=c+parseFloat(o[2])*("+"===o[1]?1:-1)),h[a.idx]=s,this[l](h)))})}))})),s.hook=function(e){var i=e.split(" ");c(i,(function(e,i){t.cssHooks[i]={set:function(e,n){var a,o,r="";if("transparent"!==n&&("string"!==t.type(n)||(a=d(n)))){if(n=s(a||n),!l.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&o&&o.style;)try{r=t.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=s(e.elem,i),e.end=s(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}}))},s.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return c(["Top","Right","Bottom","Left"],(function(i,n){e["border"+n+"Color"]=t})),e}},i=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(n),function(){var e,i=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function s(e){var i,n,a=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,s={};if(a&&a.length&&a[0]&&a[a[0]])for(n=a.length;n--;)"string"==typeof a[i=a[n]]&&(s[t.camelCase(i)]=a[i]);else for(i in a)"string"==typeof a[i]&&(s[i]=a[i]);return s}t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(n.style(t.elem,i,t.end),t.setAttr=!0)}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,n,o,r){var l=t.speed(n,o,r);return this.queue((function(){var n,o=t(this),r=o.attr("class")||"",h=l.children?o.find("*").addBack():o;h=h.map((function(){return{el:t(this),start:s(this)}})),(n=function(){t.each(i,(function(t,i){e[i]&&o[i+"Class"](e[i])}))})(),h=h.map((function(){return this.end=s(this.el[0]),this.diff=function(e,i){var n,s,o={};for(n in i)e[n]!==(s=i[n])&&(a[n]||!t.fx.step[n]&&isNaN(parseFloat(s))||(o[n]=s));return o}(this.start,this.end),this})),o.attr("class",r),h=h.map((function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()})),t.when.apply(t,h.get()).done((function(){n(),t.each(arguments,(function(){var e=this.el;t.each(this.diff,(function(t){e.css(t,"")}))})),l.complete.call(o[0])}))}))},t.fn.extend({addClass:(e=t.fn.addClass,function(i,n,a,s){return n?t.effects.animateClass.call(this,{add:i},n,a,s):e.apply(this,arguments)}),removeClass:function(e){return function(i,n,a,s){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,a,s):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,a,s,o){return"boolean"==typeof n||void 0===n?a?t.effects.animateClass.call(this,n?{add:i}:{remove:i},a,s,o):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,a,s)}}(t.fn.toggleClass),switchClass:function(e,i,n,a,s){return t.effects.animateClass.call(this,{add:i,remove:e},n,a,s)}})}(),function(){var e;function n(e,i,n,a){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(a=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(a=n,n=i,i={}),t.isFunction(n)&&(a=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=a||i.complete,e}function a(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]||!!t.isFunction(e)||"object"==typeof e&&!e.effect}function s(t,e){var i=e.outerWidth(),n=e.outerHeight(),a=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,n,0];return{top:parseFloat(a[1])||0,right:"auto"===a[2]?i:parseFloat(a[2]),bottom:"auto"===a[3]?n:parseFloat(a[3]),left:parseFloat(a[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=(e=t.expr.filters.animated,function(n){return!!t(n).data(i)||e(n)})),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var i=0,n=e.length;i<n;i++)null!==e[i]&&t.data("ui-effects-"+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,n=0,a=e.length;n<a;n++)null!==e[n]&&(i=t.data("ui-effects-"+e[n]),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:e.width(),height:e.height()},s=document.activeElement;return e.wrap(n),(e[0]===s||t.contains(e[0],s))&&t(s).trigger("focus"),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],(function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")})),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(a),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,n){return n||(n=i,i="effect"),t.effects.effect[e]=n,t.effects.effect[e].mode=i,n},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(e||100)/100:1,a="vertical"!==i?(e||100)/100:1;return{height:t.height()*a,width:t.width()*n,outerHeight:t.outerHeight()*a,outerWidth:t.outerWidth()*n}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var n=t.queue();e>1&&n.splice.apply(n,[1,0].concat(n.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data("ui-effects-style",t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data("ui-effects-style")||"",t.removeData("ui-effects-style")},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createPlaceholder:function(e){var i,n=e.css("position"),a=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data("ui-effects-placeholder",i)),e.css({position:n,left:a.left,top:a.top}),i},removePlaceholder:function(t){var e="ui-effects-placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,n,a){return a=a||{},t.each(i,(function(t,i){var s=e.cssUnit(i);s[0]>0&&(a[i]=s[0]*n+s[1])})),a}}),t.fn.extend({effect:function(){var e=n.apply(this,arguments),a=t.effects.effect[e.effect],s=a.mode,o=e.queue,r=o||"fx",l=e.complete,h=e.mode,c=[],u=function(e){var n=t(this),a=t.effects.mode(n,h)||s;n.data(i,!0),c.push(a),s&&("show"===a||a===s&&"hide"===a)&&n.show(),s&&"none"===a||t.effects.saveStyle(n),t.isFunction(e)&&e()};if(t.fx.off||!a)return h?this[h](e.duration,l):this.each((function(){l&&l.call(this)}));function d(n){var o=t(this);function r(){t.isFunction(l)&&l.call(o[0]),t.isFunction(n)&&n()}e.mode=c.shift(),!1===t.uiBackCompat||s?"none"===e.mode?(o[h](),r()):a.call(o[0],e,(function(){o.removeData(i),t.effects.cleanUp(o),"hide"===e.mode&&o.hide(),r()})):(o.is(":hidden")?"hide"===h:"show"===h)?(o[h](),r()):a.call(o[0],e,r)}return!1===o?this.each(u).each(d):this.queue(r,u).queue(r,d)},show:function(t){return function(e){if(a(e))return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(a(e))return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(a(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],(function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])})),n},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):s(this.css("clip"),this)},transfer:function(e,i){var n=t(this),a=t(e.to),s="fixed"===a.css("position"),o=t("body"),r=s?o.scrollTop():0,l=s?o.scrollLeft():0,h=a.offset(),c={top:h.top-r,left:h.left-l,height:a.innerHeight(),width:a.innerWidth()},u=n.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:u.top-r,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:s?"fixed":"absolute"}).animate(c,e.duration,e.easing,(function(){d.remove(),t.isFunction(i)&&i()}))}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=s(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),e={},t.each(["Quad","Cubic","Quart","Quint","Expo"],(function(t,i){e[i]=function(e){return Math.pow(e,t+2)}})),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,(function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})),t.effects})),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){var e,i=0,n=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(i){var n,a,s;for(s=0;null!=(a=i[s]);s++)try{(n=t._data(a,"events"))&&n.remove&&t(a).triggerHandler("remove")}catch(o){}e(i)}),t.widget=function(e,i,n){var a,s,o,r={},l=e.split(".")[0],h=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},a=t[l][e],s=t[l][e]=function(t,e){if(!this._createWidget)return new s(t,e);arguments.length&&this._createWidget(t,e)},t.extend(s,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(o=new i).options=t.widget.extend({},o.options),t.each(n,(function(e,n){r[e]=t.isFunction(n)?function(){function t(){return i.prototype[e].apply(this,arguments)}function a(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=a,e=n.apply(this,arguments),this._super=i,this._superApply=s,e}}():n})),s.prototype=t.widget.extend(o,{widgetEventPrefix:a&&o.widgetEventPrefix||e},r,{constructor:s,namespace:l,widgetName:e,widgetFullName:h}),a?(t.each(a._childConstructors,(function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,s,i._proto)})),delete a._childConstructors):i._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var i,a,s=n.call(arguments,1),o=0,r=s.length;o<r;o++)for(i in s[o])a=s[o][i],s[o].hasOwnProperty(i)&&void 0!==a&&(e[i]=t.isPlainObject(a)?t.isPlainObject(e[i])?t.widget.extend({},e[i],a):t.widget.extend({},a):a);return e},t.widget.bridge=function(e,i){var a=i.prototype.widgetFullName||e;t.fn[e]=function(s){var o="string"==typeof s,r=n.call(arguments,1),l=this;return o?this.length||"instance"!==s?this.each((function(){var i,n=t.data(this,a);return"instance"===s?(l=n,!1):n?t.isFunction(n[s])&&"_"!==s.charAt(0)?(i=n[s].apply(n,r))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+s+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+s+"'")})):l=void 0:(r.length&&(s=t.widget.extend.apply(null,[s].concat(r))),this.each((function(){var e=t.data(this,a);e?(e.option(s||{}),e._init&&e._init()):t.data(this,a,new i(s,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,a,s,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},n=e.split("."),e=n.shift(),n.length){for(a=o[e]=t.widget.extend({},this.options[e]),s=0;s<n.length-1;s++)a[n[s]]=a[n[s]]||{},a=a[n[s]];if(e=n.pop(),1===arguments.length)return void 0===a[e]?null:a[e];a[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,a;for(i in e)a=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&a&&a.length&&(n=t(a.get()),this._removeClass(a,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],n=this;function a(a,s){var o,r;for(r=0;r<a.length;r++)o=n.classesElementLookup[a[r]]||t(),o=t(e.add?t.unique(o.get().concat(e.element.get())):o.not(e.element).get()),n.classesElementLookup[a[r]]=o,i.push(a[r]),s&&e.classes[a[r]]&&i.push(e.classes[a[r]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&a(e.keys.match(/\S+/g)||[],!0),e.extra&&a(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(n,a){-1!==t.inArray(e.target,a)&&(i.classesElementLookup[n]=t(a.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){var a="string"==typeof t||null===t,s={extra:a?e:i,keys:a?t:e,element:a?this.element:t,add:n="boolean"==typeof n?n:i};return s.element.toggleClass(this._classes(s),n),this},_on:function(e,i,n){var a,s=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=a=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,a=this.widget()),t.each(n,(function(n,o){function r(){if(e||!0!==s.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+s.eventNamespace,c=l[2];c?a.on(h,c,r):i.on(h,r)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var a,s,o=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(a in s)a in i||(i[a]=s[a]);return this.element.trigger(i,n),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(n,a,s){var o;"string"==typeof a&&(a={effect:a});var r=a?!0===a||"number"==typeof a?i:a.effect||i:e;"number"==typeof(a=a||{})&&(a={duration:a}),o=!t.isEmptyObject(a),a.complete=s,a.delay&&n.delay(a.delay),o&&t.effects&&t.effects.effect[r]?n[e](a):r!==e&&n[r]?n[r](a.duration,a.easing,s):n.queue((function(i){t(this)[e](),s&&s.call(n[0]),i()}))}})),t.widget})),function(t){"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){return t.fn.extend({uniqueId:(e=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++e)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}});var e})),function(t){"function"==typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],t):t(jQuery)}((function(t){var e=!1;return t(document).on("mouseup",(function(){e=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,a=1===i.which,s=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&t(i.target).closest(this.options.cancel).length;return!(a&&!s&&this._mouseCapture(i)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){n.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&t.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,i.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})),function(t){"function"==typeof define&&define.amd?define(["jquery","./mouse","../keycode","../version","../widget"],t):t(jQuery)}((function(t){return t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,a=this.element.find(".ui-slider-handle"),s=[];for(a.length>(i=n.values&&n.values.length||1)&&(a.slice(i).remove(),a=a.slice(0,i)),e=a.length;e<i;e++)s.push("<span tabindex='0'></span>");this.handles=a.add(t(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,a,s,o,r,l=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i=this._normValueFromMouse({x:e.pageX,y:e.pageY}),n=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var o=Math.abs(i-l.values(e));(n>o||n===o&&(e===l._lastChangedValue||l.values(e)===h.min))&&(n=o,a=t(this),s=e)})),!1!==this._start(e,s)&&(this._mouseSliding=!0,this._handleIndex=s,this._addClass(a,null,"ui-state-active"),a.trigger("focus"),o=a.offset(),r=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=r?{left:0,top:0}:{left:e.pageX-o.left-a.width()/2,top:e.pageY-o.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e=this._normValueFromMouse({x:t.pageX,y:t.pageY});return this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,a,s;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/e)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),a=this._valueMax()-this._valueMin(),s=this._valueMin()+n*a,this._trimAlignValue(s)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,a=this.value(),s=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),a=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),s[e]=i),i!==a&&!1!==this._trigger("slide",t,this._uiHash(e,i,s))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,a,s;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(n=this.options.values,a=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(a[s]),this._change(null,s);this._refreshValue()},_setOption:function(e,i){var n,a=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(a=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=a-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){return this._trimAlignValue(this.options.value)},_values:function(t){var e,i;if(arguments.length)return this._trimAlignValue(this.options.values[t]);if(this._hasMultipleValues()){for(e=this.options.values.slice(),i=0;i<e.length;i+=1)e[i]=this._trimAlignValue(e[i]);return e}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,a,s,o=this.options.range,r=this.options,l=this,h=!this._animateOff&&r.animate,c={};this._hasMultipleValues()?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i})):(n=this.value(),a=this._valueMin(),s=this._valueMax(),c["horizontal"===this.orientation?"left":"bottom"]=(i=s!==a?(n-a)/(s-a)*100:0)+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},r.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(e){var i,n,a,s=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,s)))return}switch(a=this.options.step,i=n=this._hasMultipleValues()?this.values(s):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-a)}this._slide(e,s,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}})})),function(t){"function"==typeof define&&define.amd?define(["jquery","./controlgroup","./checkboxradio","../keycode","../widget"],t):t(jQuery)}((function(t){var e;return t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var n="iconPosition"!==e,a=n?this.options.iconPosition:i,s="top"===a||"bottom"===a;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,i),this._attachIcon(a),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(a))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){(void 0===t.showLabel?this.options.showLabel:t.showLabel)||(void 0===t.icon?this.options.icon:t.icon)||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),t.fn.button=(e=t.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button})),function(t){"function"==typeof define&&define.amd?define(["jquery","../escape-selector","../keycode","../safe-active-element","../unique-id","../version","../widget"],t):t(jQuery)}((function(t){var e;return t.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(e=/#.*$/,function(t){var i,n;i=t.href.replace(e,""),n=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(a){}try{n=decodeURIComponent(n)}catch(a){}return t.hash.length>1&&i===n}),_create:function(){var e=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),(function(t){return e.tabs.index(t)})))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===e&&(n&&this.tabs.each((function(i,a){if(t(a).attr("aria-controls")===n)return e=i,!1})),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==e&&-1!==e||(e=!!this.tabs.length&&0)),!1!==e&&-1===(e=this.tabs.index(this.tabs.eq(e)))&&(e=!i&&0),!i&&!1===e&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(t.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(i),a=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:a=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,a),e.ctrlKey||e.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",n)}),this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){for(var n=this.tabs.length-1;-1!==t.inArray((e>n&&(e=0),e<0&&(e=n),e),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){"active"!==t?(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),(function(t){return i.index(t)})),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,i=this.tabs,n=this.anchors,a=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return t("a",this)[0]})).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each((function(i,n){var a,s,o,r=t(n).uniqueId().attr("id"),l=t(n).closest("li"),h=l.attr("aria-controls");e._isLocal(n)?(o=(a=n.hash).substring(1),s=e.element.find(e._sanitizeSelector(a))):(o=l.attr("aria-controls")||t({}).uniqueId()[0].id,(s=e.element.find(a="#"+o)).length||(s=e._createPanel(o)).insertAfter(e.panels[i-1]||e.tablist),s.attr("aria-live","polite")),s.length&&(e.panels=e.panels.add(s)),h&&l.data("ui-tabs-aria-controls",h),l.attr({"aria-controls":o,"aria-labelledby":r}),s.attr("aria-labelledby",r)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(a.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var i,n,a;for(t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),a=0;n=this.tabs[a];a++)i=t(n),!0===e||-1!==t.inArray(a,e)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===e)},_setupEvents:function(e){var i={};e&&t.each(e.split(" "),(function(t,e){i[e]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){i-=t(this).outerHeight(!0)})),this.panels.each((function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))})).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each((function(){i=Math.max(i,t(this).height("").height())})).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,a=t(e.currentTarget).closest("li"),s=a[0]===n[0],o=s&&i.collapsible,r=o?t():this._getPanelForTab(a),l=n.length?this._getPanelForTab(n):t(),h={oldTab:n,oldPanel:l,newTab:o?t():a,newPanel:r};e.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||!1===this._trigger("beforeActivate",e,h)||(i.active=!o&&this.tabs.index(a),this.active=s?t():a,this.xhr&&this.xhr.abort(),l.length||r.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),r.length&&this.load(this.tabs.index(a),e),this._toggle(e,h))},_toggle:function(e,i){var n=this,a=i.newPanel,s=i.oldPanel;function o(){n.running=!1,n._trigger("activate",e,i)}function r(){n._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),a.length&&n.options.show?n._show(a,n.options.show,o):(a.show(),o())}this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,(function(){n._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r()})):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s.hide(),r()),s.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&s.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter((function(){return 0===t(this).attr("tabIndex")})).attr("tabIndex",-1),a.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;!1!==i&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,(function(t){return t!==e?t:null})):t.map(this.tabs,(function(t,i){return i!==e?i:null}))),this._setOptionDisabled(i))},disable:function(e){var i=this.options.disabled;if(!0!==i){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setOptionDisabled(i)}},load:function(e,i){e=this._getIndex(e);var n=this,a=this.tabs.eq(e),s=a.find(".ui-tabs-anchor"),o=this._getPanelForTab(a),r={tab:a,panel:o},l=function(t,e){"abort"===e&&n.panels.stop(!1,!0),n._removeClass(a,"ui-tabs-loading"),o.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr};this._isLocal(s[0])||(this.xhr=t.ajax(this._ajaxSettings(s,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(a,"ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done((function(t,e,a){setTimeout((function(){o.html(t),n._trigger("load",i,r),l(a,e)}),1)})).fail((function(t,e){setTimeout((function(){l(t,e)}),1)}))))},_ajaxSettings:function(e,i,n){var a=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,s){return a._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:s},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==t.uiBackCompat&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),t.ui.tabs})),function(t){void 0===t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var i=t([0]),n=-1,a=this.length;++n<a&&(i.context=i[0]=this[n])&&!1!==e.call(i[0],n,i););return this}})}(jQuery),function(t,e){"use strict";if(window.Select2===e){var i,n,a,s,o,r,l,h,c={x:0,y:0},u={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case u.LEFT:case u.RIGHT:case u.UP:case u.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case u.SHIFT:case u.CTRL:case u.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return(t=t.which?t.which:t)>=112&&t<=123}},d={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"};r=t(document),h=1,s=function(){return h++},i=P(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var n,a,o,r;this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+s()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=t("body"),M(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(A(i.containerCss,this.opts.element)),this.container.addClass(A(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",w),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),M(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(A(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",w),this.results=n=this.container.find(".select2-results"),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",w),this.results.on("mousemove",(function(i){c!==e&&c.x===i.pageX&&c.y===i.pageY||t(i.target).trigger("mousemove-filtered",i)})),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind((function(t){this._touchEvent=!0,this.highlightUnderEvent(t)}))),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),o=this.results,r=b(80,(function(t){o.trigger("scroll-debounced",t)})),o.on("scroll",(function(t){m(t.target,o.get())>=0&&r(t)})),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",(function(t){t.stopPropagation()})),t(this.dropdown).on("change",".select2-input",(function(t){t.stopPropagation()})),t.fn.mousewheel&&n.mousewheel((function(t,e,i,a){var s=n.scrollTop();a>0&&s-a<=0?(n.scrollTop(0),w(t)):a<0&&n.get(0).scrollHeight-n.scrollTop()+a<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),w(t))})),y(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",(function(){a.addClass("select2-focused")})),a.on("blur",(function(){a.removeClass("select2-focused")})),this.dropdown.on("mouseup",".select2-results",this.bind((function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(t){t.stopPropagation()})),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var h=i.element.prop("disabled");h===e&&(h=!1),this.enable(!h);var u=i.element.prop("readonly");u===e&&(u=!1),this.readonly(u),l=l||function(){var e=t("<div class='select2-measure-scrollbar'></div>");e.appendTo("body");var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i}(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,i=t.data("select2"),n=this;this.close(),t.length&&t[0].detachEvent&&t.each((function(){this.detachEvent("onpropertychange",n._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==e&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),I.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:g(t.attr("locked"),"locked")||g(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(i){var n,a,o,r,l=this;if("select"===(n=i.element).get(0).tagName.toLowerCase()&&(this.select=a=i.element),a&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(i=t.extend({},{populateResults:function(n,a,o){var r,h=this.opts.id,c=this.liveRegion;(r=function(n,a,u){var d,p,f,m,g,_,v,y,b,w,M=[];for(d=0,p=(n=i.sortResults(n,a,o)).length;d<p;d+=1)m=!(g=!0===(f=n[d]).disabled)&&h(f)!==e,_=f.children&&f.children.length>0,(v=t("<li></li>")).addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(m?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),_&&v.addClass("select2-result-with-children"),v.addClass(l.opts.formatResultCssClass(f)),v.attr("role","presentation"),(y=t(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+s()),y.attr("role","option"),(w=i.formatResult(f,y,o,l.opts.escapeMarkup))!==e&&(y.html(w),v.append(y)),_&&((b=t("<ul></ul>")).addClass("select2-result-sub"),r(f.children,b,u+1),v.append(b)),v.data("select2-data",f),M.push(v[0]);a.append(M),c.text(i.formatMatches(n.length))})(a,n,0)}},t.fn.select2.defaults,i)).id&&(o=i.id,i.id=function(t){return t[o]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(a?(i.query=this.bind((function(t){var i,a,s,o={results:[],more:!1},r=t.term;s=function(e,i){var n;e.is("option")?t.matcher(r,e.text(),e)&&i.push(l.optionToData(e)):e.is("optgroup")&&(n=l.optionToData(e),e.children().each2((function(t,e){s(e,n.children)})),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==e&&i.length>0&&(a=this.getPlaceholderOption())&&(i=i.not(a)),i.each2((function(t,e){s(e,o.results)})),t.callback(o)})),i.id=function(t){return t.id}):"query"in i||("ajax"in i?((r=i.element.data("ajax-url"))&&r.length>0&&(i.ajax.url=r),i.query=k.call(i.element,i.ajax)):"data"in i?i.query=S(i.data):"tags"in i&&(i.query=L(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),i.initSelection===e&&(i.initSelection=function(e,n){var a=[];t(_(e.val(),i.separator)).each((function(){var e={id:this,text:this},n=i.tags;t.isFunction(n)&&(n=n()),t(n).each((function(){if(g(this.id,e.id))return e=this,!1})),a.push(e)})),n(a)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,n=this.opts.element,a=this;n.on("change.select2",this.bind((function(t){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var t=n.prop("disabled");t===e&&(t=!1),this.enable(!t);var i=n.prop("readonly");i===e&&(i=!1),this.readonly(i),M(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(A(this.opts.containerCssClass,this.opts.element)),M(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(A(this.opts.dropdownCssClass,this.opts.element))})),n.length&&n[0].attachEvent&&n.each((function(){this.attachEvent("onpropertychange",a._sync)})),(i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i((function(e){t.each(e,a._sync)})),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var i=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(e){e=t.extend({},e=e||{},{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var t=this._enabled&&!this._readonly;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",!t),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,i,n,a,s,o=this.dropdown,r=this.container.offset(),h=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=o.outerHeight(!1),d=t(window),p=d.width(),f=d.height(),m=d.scrollLeft()+p,g=d.scrollTop()+f,_=r.top+h,v=r.left,y=_+u<=g,b=r.top-u>=d.scrollTop(),w=o.outerWidth(!1),M=v+w<=m;o.hasClass("select2-drop-above")?(i=!0,!b&&y&&(n=!0,i=!1)):(i=!1,!y&&b&&(n=!0,i=!0)),n&&(o.hide(),r=this.container.offset(),h=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=o.outerHeight(!1),m=d.scrollLeft()+p,g=d.scrollTop()+f,_=r.top+h,M=(v=r.left)+(w=o.outerWidth(!1))<=m,o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(s=t(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),(w=o.outerWidth(!1)+(s.scrollHeight===s.clientHeight?0:l.width))>c?c=w:w=c,u=o.outerHeight(!1),M=v+w<=m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(_-=(e=this.body.offset()).top,v-=e.left),M||(v=r.left+this.container.outerWidth(!1)-w),a={left:v,width:c},i?(a.top=r.top-u,a.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(a.top=_,a.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),a=t.extend(a,A(this.opts.dropdownCss,this.opts.element)),o.css(a)},shouldOpen:function(){var e;return!this.opened()&&!1!==this._enabled&&!0!==this._readonly&&(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),r.on("mousemove.select2Event",(function(t){c.x=t.pageX,c.y=t.pageY})),!0)},opening:function(){var e,i=this.containerEventName,n="scroll."+i,a="resize."+i,s="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(e=t("#select2-drop-mask")).length&&((e=t(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",(function(i){p(e);var n,a=t("#select2-drop");a.length>0&&((n=a.data("select2")).opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),i.preventDefault(),i.stopPropagation())}))),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each((function(){t(this).on(a+" "+n+" "+s,(function(t){o.opened()&&o.positionDropdown()}))}))},close:function(){if(this.opened()){var e=this.containerEventName,i="scroll."+e,n="resize."+e,a="orientationchange."+e;this.container.parents().add(window).each((function(){t(this).off(i).off(n).off(a)})),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),r.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return A(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,i,n,a,s,o,r,l,h=this.results;(i=this.highlight())<0||(0!=i?(e=this.findHighlightableChoices().find(".select2-result-label"),a=(l=((n=t(e[i])).offset()||{}).top||0)+n.outerHeight(!0),i===e.length-1&&(r=h.find("li.select2-more-results")).length>0&&(a=r.offset().top+r.outerHeight(!0)),a>(s=h.offset().top+h.outerHeight(!0))&&h.scrollTop(h.scrollTop()+(a-s)),(o=l-h.offset().top)<0&&"none"!=n.css("display")&&h.scrollTop(h.scrollTop()+o)):h.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){var a=t(i[n+=e]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")&&!a.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(e){var i,n,a=this.findHighlightableChoices();if(0===arguments.length)return m(a.filter(".select2-highlighted")[0],a.get());e>=a.length&&(e=a.length-1),e<0&&(e=0),this.removeHighlight(),(i=t(a[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),(n=i.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,e=t.find("li.select2-more-results"),i=this.resultsPage+1,n=this,a=this.search.val(),s=this.context;0!==e.length&&e.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(e.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:i,context:s,matcher:this.opts.matcher,callback:this.bind((function(o){n.opened()&&(n.opts.populateResults.call(this,t,o.results,{term:a,page:i,context:s}),n.postprocessResults(o,!1,!1),!0===o.more?(e.detach().appendTo(t).text(A(n.opts.formatLoadMore,n.opts.element,i+1)),window.setTimeout((function(){n.loadMoreIfNeeded()}),10)):e.remove(),n.positionDropdown(),n.resultsPage=i,n.context=o.context,this.opts.element.trigger({type:"select2-loaded",items:o}))}))}))},tokenize:function(){},updateResults:function(i){var n,a,s,o=this.search,r=this.results,l=this.opts,h=this,c=o.val(),u=t.data(this.container,"select2-last-term");if((!0===i||!u||!g(c,u))&&(t.data(this.container,"select2-last-term",c),!0===i||!1!==this.showSearchInput&&this.opened())){s=++this.queryCount;var d=this.getMaximumSelectionSize();if(!(d>=1&&(n=this.data(),t.isArray(n)&&n.length>=d&&T(l.formatSelectionTooBig,"formatSelectionTooBig"))))return o.val().length<l.minimumInputLength?(T(l.formatInputTooShort,"formatInputTooShort")?f("<li class='select2-no-results'>"+A(l.formatInputTooShort,l.element,o.val(),l.minimumInputLength)+"</li>"):f(""),void(i&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&o.val().length>l.maximumInputLength?T(l.formatInputTooLong,"formatInputTooLong")?f("<li class='select2-no-results'>"+A(l.formatInputTooLong,l.element,o.val(),l.maximumInputLength)+"</li>"):f(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&f("<li class='select2-searching'>"+A(l.formatSearching,l.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),(a=this.tokenize())!=e&&null!=a&&o.val(a),this.resultsPage=1,l.query({element:l.element,term:o.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(n){var a;s==this.queryCount&&(this.opened()?n.hasError!==e&&T(l.formatAjaxError,"formatAjaxError")?f("<li class='select2-ajax-error'>"+A(l.formatAjaxError,l.element,n.jqXHR,n.textStatus,n.errorThrown)+"</li>"):(this.context=n.context===e?null:n.context,this.opts.createSearchChoice&&""!==o.val()&&(a=this.opts.createSearchChoice.call(h,o.val(),n.results))!==e&&null!==a&&h.id(a)!==e&&null!==h.id(a)&&0===t(n.results).filter((function(){return g(h.id(this),h.id(a))})).length&&this.opts.createSearchChoicePosition(n.results,a),0===n.results.length&&T(l.formatNoMatches,"formatNoMatches")?f("<li class='select2-no-results'>"+A(l.formatNoMatches,l.element,o.val())+"</li>"):(r.empty(),h.opts.populateResults.call(this,r,n.results,{term:o.val(),page:this.resultsPage,context:null}),!0===n.more&&T(l.formatLoadMore,"formatLoadMore")&&(r.append("<li class='select2-more-results'>"+l.escapeMarkup(A(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){h.loadMoreIfNeeded()}),10)),this.postprocessResults(n,i),p(),this.opts.element.trigger({type:"select2-loaded",items:n}))):this.search.removeClass("select2-active"))}))})));f("<li class='select2-selection-limit'>"+A(l.formatSelectionTooBig,l.element,d)+"</li>")}function p(){o.removeClass("select2-active"),h.positionDropdown(),r.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?h.liveRegion.text(r.text()):h.liveRegion.text(h.opts.formatMatches(r.find(".select2-result-selectable").length))}function f(t){r.html(t),p()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var t;(t=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var e,i=t[0],n=t.val().length;t.focus(),(i.offsetWidth>0||i.offsetHeight>0)&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&((e=i.createTextRange()).collapse(!1),e.select()))}),0)},selectHighlighted:function(t){if(this._touchMoved)this.clearTouchMoved();else{var e=this.highlight(),i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");i?(this.highlight(e),this.onSelect(i,t)):t&&t.noFocus&&this.close()}},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){var i=(function(){var i,n,a,s,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((i=this.opts.element.attr("style"))!==e)for(s=0,o=(n=i.split(";")).length;s<o;s+=1)if(null!==(a=n[s].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&a.length>=1)return a[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width")).indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}).call(this);null!==i&&this.container.css("width",i)}}),n=P(i,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,n,a;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(i=this.search.get(0)).createTextRange?((n=i.createTextRange()).collapse(!1),n.select()):i.setSelectionRange&&(a=this.search.val().length,i.setSelectionRange(a,a))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"selection","focusser")},initContainer:function(){var e,i,n=this.container,a=this.dropdown,o=s();this.showSearch(!(this.opts.minimumResultsForSearch<0)),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),i=t("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode)if(t.which!==u.PAGE_UP&&t.which!==u.PAGE_DOWN)switch(t.which){case u.UP:case u.DOWN:return this.moveHighlight(t.which===u.UP?-1:1),void w(t);case u.ENTER:return this.selectHighlighted(),void w(t);case u.TAB:return void this.selectHighlighted({noFocus:!0});case u.ESC:return this.cancel(t),void w(t)}else w(t)}))),this.search.on("blur",this.bind((function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&t.which!==u.TAB&&!u.isControl(t)&&!u.isFunctionKey(t)&&t.which!==u.ESC){if(!1!==this.opts.openOnEnter||t.which!==u.ENTER){if(t.which==u.DOWN||t.which==u.UP||t.which==u.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void w(t)}return t.which==u.DELETE||t.which==u.BACKSPACE?(this.opts.allowClear&&this.clear(),void w(t)):void 0}w(t)}}))),y(this.focusser),this.focusser.on("keyup-change input",this.bind((function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}}))),e.on("mousedown touchstart","abbr",this.bind((function(t){var e;this.isInterfaceEnabled()&&(this.clear(),(e=t).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection.focus())}))),e.on("mousedown touchstart",this.bind((function(i){p(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),w(i)}))),a.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),e.on("focus",this.bind((function(t){w(t)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var i=this.selection.data("select2-data");if(i){var n=t.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var a=this.getPlaceholderOption();this.opts.element.val(a?a.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,(function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(i,t.search.val()))}))}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==e&&((t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val())},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=t.find("option").filter((function(){return this.selected&&!this.disabled}));e(i.optionToData(n))}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var a=i.val(),s=null;e.query({matcher:function(t,i,n){var o=g(a,e.id(n));return o&&(s=n),o},callback:t.isFunction(n)?function(){n(s)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,i,n){var a=0,s=this;if(this.findHighlightableChoices().each2((function(t,e){if(g(s.id(e.data("select2-data")),s.opts.element.val()))return a=t,!1})),!1!==n&&this.highlight(!0===i&&a>=0?a:0),!0===i){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(function e(i){var n=0;return t.each(i,(function(t,i){i.children?n+=e(i.children):n++})),n}(e.results)>=o)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(i,this.id(t))||this.triggerChange({added:t,removed:n})}},updateSelection:function(t){var i,n,a=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),a.empty(),null!==t&&(i=this.opts.formatSelection(t,a,this.opts.escapeMarkup)),i!==e&&a.append(i),(n=this.opts.formatSelectionCssClass(t,a))!==e&&a.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,i=!1,n=null,a=this,s=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(t).find("option").filter((function(){return this.selected})).each2((function(t,e){return n=a.optionToData(e),!1})),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:s});else{if(!t&&0!==t)return void this.clear(i);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,(function(t){a.opts.element.val(t?a.id(t):""),a.updateSelection(t),a.setPlaceholder(),i&&a.triggerChange({added:t,removed:s})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var i,n=!1;if(0===arguments.length)return(i=this.selection.data("select2-data"))==e&&(i=null),i;arguments.length>1&&(n=arguments[1]),t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),n&&this.triggerChange({added:t,removed:i})):this.clear(n)}}),a=P(i,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=[];t.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(t,e){n.push(i.optionToData(e))})),e(n)}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var a=_(i.val(),e.separator),s=[];e.query({matcher:function(i,n,o){var r=t.grep(a,(function(t){return g(t,e.id(o))})).length;return r&&s.push(o),r},callback:t.isFunction(n)?function(){for(var t=[],i=0;i<a.length;i++)for(var o=a[i],r=0;r<s.length;r++){var l=s[r];if(g(o,e.id(l))){t.push(l),s.splice(r,1);break}}n(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"searchContainer","selection")},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i);var n=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",(function(e){n.search[0].focus(),n.selectChoice(t(this))})),this.search.attr("id","s2id_autogen"+s()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(i){if(this.isInterfaceEnabled()){++this.keydowns;var n=e.find(".select2-search-choice-focus"),a=n.prev(".select2-search-choice:not(.select2-locked)"),s=n.next(".select2-search-choice:not(.select2-locked)"),o=function(e){var i=0,n=0;if("selectionStart"in(e=t(e)[0]))n=e.selectionEnd-(i=e.selectionStart);else if("selection"in document){e.focus();var a=document.selection.createRange();n=document.selection.createRange().text.length,a.moveStart("character",-e.value.length),i=a.text.length-n}return{offset:i,length:n}}(this.search);if(n.length&&(i.which==u.LEFT||i.which==u.RIGHT||i.which==u.BACKSPACE||i.which==u.DELETE||i.which==u.ENTER)){var r=n;return i.which==u.LEFT&&a.length?r=a:i.which==u.RIGHT?r=s.length?s:null:i.which===u.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),r=a.length?a:s):i.which==u.DELETE?this.unselect(n.first())&&(this.search.width(10),r=s.length?s:null):i.which==u.ENTER&&(r=null),this.selectChoice(r),w(i),void(r&&r.length||this.open())}if((i.which===u.BACKSPACE&&1==this.keydowns||i.which==u.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void w(i);if(this.selectChoice(null),this.opened())switch(i.which){case u.UP:case u.DOWN:return this.moveHighlight(i.which===u.UP?-1:1),void w(i);case u.ENTER:return this.selectHighlighted(),void w(i);case u.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case u.ESC:return this.cancel(i),void w(i)}if(i.which!==u.TAB&&!u.isControl(i)&&!u.isFunctionKey(i)&&i.which!==u.BACKSPACE&&i.which!==u.ESC){if(i.which===u.ENTER){if(!1===this.opts.openOnEnter)return;if(i.altKey||i.ctrlKey||i.shiftKey||i.metaKey)return}this.open(),i.which!==u.PAGE_UP&&i.which!==u.PAGE_DOWN||w(i),i.which===u.ENTER&&w(i)}}}))),this.search.on("keyup",this.bind((function(t){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))}))),this.container.on("click",i,this.bind((function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))}))),this.container.on("focus",i,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,(function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())}))}},clearSearch:function(){var t=this.getPlaceholder(),i=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],n=[],a=this;t(e).each((function(){m(a.id(this),i)<0&&(i.push(a.id(this)),n.push(this))})),e=n,this.selection.find(".select2-search-choice").remove(),t(e).each((function(){a.addSelectedChoice(this)})),a.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts))&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,i){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(t,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),i&&i.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,a,s=!i.locked,o=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=s?o:r,h=this.id(i),c=this.getVal();(n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup))!=e&&l.find("div").replaceWith("<div>"+n+"</div>"),(a=this.opts.formatSelectionCssClass(i,l.find("div")))!=e&&l.addClass(a),s&&l.find(".select2-search-choice-close").on("mousedown",w).on("click dblclick",this.bind((function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),w(e),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",i),l.insertBefore(this.searchContainer),c.push(h),this.setVal(c)},unselect:function(e){var i,n,a=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(i=e.data("select2-data")){var s=t.Event("select2-removing");if(s.val=this.id(i),s.choice=i,this.opts.element.trigger(s),s.isDefaultPrevented())return!1;for(;(n=m(this.id(i),a))>=0;)a.splice(n,1),this.setVal(a),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(t,e,i){var n=this.getVal(),a=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),o=this;a.each2((function(t,e){m(o.id(e.data("select2-data")),n)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))})),s.each2((function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")})),-1==this.highlight()&&!1!==i&&o.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&T(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+A(o.opts.formatNoMatches,o.opts.element,o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-v(this.search)},resizeSearch:function(){var e,i,n,a,s=v(this.search);e=function(e){if(!o){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);(o=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),t("body").append(o)}return o.text(e.val()),o.width()}(this.search)+10,i=this.search.offset().left,(a=(n=this.selection.width())-(i-this.selection.offset().left)-s)<e&&(a=n-s),a<40&&(a=n-s),a<=0&&(a=e),this.search.width(Math.floor(a))},getVal:function(){var t;return this.select?null===(t=this.select.val())?[]:t:_(t=this.opts.element.val(),this.opts.separator)},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each((function(){m(this,i)<0&&i.push(this)})),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(t,e){e=e.slice(0),t=t.slice(0);for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)g(this.opts.id(e[i]),this.opts.id(t[n]))&&(e.splice(i,1),i>0&&i--,t.splice(n,1),n--);return{added:e,removed:t}},val:function(i,n){var a,s=this;if(0===arguments.length)return this.getVal();if((a=this.data()).length||(a=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:a}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(a,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(e){var i=t.map(e,s.id);s.setVal(i),s.updateSelection(e),s.clearSearch(),n&&s.triggerChange(s.buildChangeDetails(a,s.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){e.push(i.opts.id(t(this).data("select2-data")))})),this.setVal(e),this.triggerChange()},data:function(e,i){var n,a,s=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return t(this).data("select2-data")})).get();a=this.data(),e||(e=[]),n=t.map(e,(function(t){return s.opts.id(t)})),this.setVal(n),this.updateSelection(e),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(a,this.data()))}}),t.fn.select2=function(){var i,n,a,s,o,r=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],h=["opened","isFocused","container","dropdown"],c=["val","data"],u={search:"externalSearch"};return this.each((function(){if(0===r.length||"object"==typeof r[0])(i=0===r.length?{}:t.extend({},r[0])).element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?o=i.element.prop("multiple"):(o=i.multiple||!1,"tags"in i&&(i.multiple=o=!0)),(n=o?new window.Select2.class.multi:new window.Select2.class.single).init(i);else{if("string"!=typeof r[0])throw"Invalid arguments to select2 plugin: "+r;if(m(r[0],l)<0)throw"Unknown method: "+r[0];if(s=e,(n=t(this).data("select2"))===e)return;if("container"===(a=r[0])?s=n.container:"dropdown"===a?s=n.dropdown:(u[a]&&(a=u[a]),s=n[a].apply(n,r.slice(1))),m(r[0],h)>=0||m(r[0],c)>=0&&1==r.length)return!1}})),s===e?this:s},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,n){var a=[];return C(t.text,i.term,a,n),a.join("")},formatSelection:function(t,i,n){return t?n(t.text):e},sortResults:function(t,e,i){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,i){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},matcher:function(t,e){return f(""+e).toUpperCase().indexOf(f(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(t,i,n,a){var s,o,r,l,h,c=t,u=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return e;for(;;){for(o=-1,r=0,l=a.tokenSeparators.length;r<l&&!((o=t.indexOf(h=a.tokenSeparators[r]))>=0);r++);if(o<0)break;if(s=t.substring(0,o),t=t.substring(o+h.length),s.length>0&&(s=a.createSearchChoice.call(this,s,i))!==e&&null!==s&&a.id(s)!==e&&null!==a.id(s)){for(u=!1,r=0,l=i.length;r<l;r++)if(g(a.id(s),a.id(i[r]))){u=!0;break}u||n(s)}}return c!==t?t:void 0},escapeMarkup:x,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,i){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){return!(("ontouchstart"in window||navigator.msMaxTouchPoints>0)&&t.opts.minimumResultsForSearch<0)}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,i){return"Loading failed"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more resultsâ¦"},formatSearching:function(){return"Searchingâ¦"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:k,local:S,tags:L},util:{debounce:b,markMatch:C,escapeMarkup:x,stripDiacritics:f},class:{abstract:i,single:n,multi:a}}}function p(e){var i=t(document.createTextNode(""));e.before(i),i.before(e),i.remove()}function f(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return d[t]||t}))}function m(t,e){for(var i=0,n=e.length;i<n;i+=1)if(g(t,e[i]))return i;return-1}function g(t,i){return t===i||t!==e&&i!==e&&null!==t&&null!==i&&(t.constructor===String?t+""==i+"":i.constructor===String&&i+""==t+"")}function _(e,i){var n,a,s;if(null===e||e.length<1)return[];for(a=0,s=(n=e.split(i)).length;a<s;a+=1)n[a]=t.trim(n[a]);return n}function v(t){return t.outerWidth(!1)-t.width()}function y(i){var n="keyup-change-value";i.on("keydown",(function(){t.data(i,n)===e&&t.data(i,n,i.val())})),i.on("keyup",(function(){var a=t.data(i,n);a!==e&&i.val()!==a&&(t.removeData(i,n),i.trigger("keyup-change"))}))}function b(t,i,n){var a;return n=n||e,function(){var e=arguments;window.clearTimeout(a),a=window.setTimeout((function(){i.apply(n,e)}),t)}}function w(t){t.preventDefault(),t.stopPropagation()}function M(e,i,n){var a,s,o=[];(a=t.trim(e.attr("class")))&&t((a=""+a).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&o.push(this)})),(a=t.trim(i.attr("class")))&&t((a=""+a).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(s=n(this))&&o.push(s)})),e.attr("class",o.join(" "))}function C(t,e,i,n){var a=f(t.toUpperCase()).indexOf(f(e.toUpperCase())),s=e.length;a<0?i.push(n(t)):(i.push(n(t.substring(0,a))),i.push("<span class='select2-match'>"),i.push(n(t.substring(a,a+s))),i.push("</span>"),i.push(n(t.substring(a+s,t.length))))}function x(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))}function k(i){var n,a=null,s=i.quietMillis||100,o=i.url,r=this;return function(l){window.clearTimeout(n),n=window.setTimeout((function(){var n=i.data,s=o,h=i.transport||t.fn.select2.ajaxDefaults.transport,c=t.extend({},t.fn.select2.ajaxDefaults.params,{type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||e,dataType:i.dataType||"json"});n=n?n.call(r,l.term,l.page,l.context):null,s="function"==typeof s?s.call(r,l.term,l.page,l.context):s,a&&"function"==typeof a.abort&&a.abort(),i.params&&(t.isFunction(i.params)?t.extend(c,i.params.call(r)):t.extend(c,i.params)),t.extend(c,{url:s,dataType:i.dataType,data:n,success:function(t){var e=i.results(t,l.page,l);l.callback(e)},error:function(t,e,i){l.callback({hasError:!0,jqXHR:t,textStatus:e,errorThrown:i})}}),a=h.call(r,c)}),s)}}function S(e){var i,n,a=e,s=function(t){return""+t.text};t.isArray(a)&&(a={results:n=a}),!1===t.isFunction(a)&&(n=a,a=function(){return n});var o=a();return o.text&&(t.isFunction(s=o.text)||(i=o.text,s=function(t){return t[i]})),function(e){var i,n=e.term,o={results:[]};""!==n?(i=function(a,o){var r,l;if((a=a[0]).children){for(l in r={},a)a.hasOwnProperty(l)&&(r[l]=a[l]);r.children=[],t(a.children).each2((function(t,e){i(e,r.children)})),(r.children.length||e.matcher(n,s(r),a))&&o.push(r)}else e.matcher(n,s(a),a)&&o.push(a)},t(a().results).each2((function(t,e){i(e,o.results)})),e.callback(o)):e.callback(a())}}function L(i){var n=t.isFunction(i);return function(a){var s=a.term,o={results:[]},r=n?i(a):i;t.isArray(r)&&(t(r).each((function(){var t=this.text!==e;(""===s||a.matcher(s,t?this.text:this))&&o.results.push(t?this:{id:this,text:this})})),a.callback(o))}}function T(e,i){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(i+" must be a string, function, or falsy value")}function A(e,i){if(t.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return e.apply(i,n)}return e}function I(){var e=this;t.each(arguments,(function(t,i){e[i].remove(),e[i]=null}))}function P(e,i){var n=function(){};return(n.prototype=new e).constructor=n,n.prototype.parent=e.prototype,n.prototype=t.extend(n.prototype,i),n}}(jQuery),function(t){"use strict";t.fn.select2.locales.it={formatNoMatches:function(){return"Nessuna corrispondenza trovata"},formatInputTooShort:function(t,e){var i=e-t.length;return"Inserisci ancora "+i+" caratter"+(1==i?"e":"i")},formatInputTooLong:function(t,e){var i=t.length-e;return"Inserisci "+i+" caratter"+(1==i?"e":"i")+" in meno"},formatSelectionTooBig:function(t){return"Puoi selezionare solo "+t+" element"+(1==t?"o":"i")},formatLoadMore:function(t){return"Caricamento in corsoâ¦"},formatSearching:function(){return"Ricercaâ¦"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.it)}(jQuery),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).IMask={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t,e){return t(e={exports:{}},e.exports),e.exports}var n,a,s,o="object",r=function(t){return t&&t.Math==Math&&t},l=r(typeof globalThis==o&&globalThis)||r(typeof window==o&&window)||r(typeof self==o&&self)||r(typeof e==o&&e)||Function("return this")(),h=function(t){try{return!!t()}catch(e){return!0}},c=!h((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),u={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,p={f:d&&!u.call({1:2},1)?function(t){var e=d(this,t);return!!e&&e.enumerable}:u},f=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},m={}.toString,g="".split,_=h((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==function(t){return m.call(t).slice(8,-1)}(t)?g.call(t,""):Object(t)}:Object,v=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},y=function(t){return _(v(t))},b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},w=function(t,e){if(!b(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!b(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!b(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!b(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},M={}.hasOwnProperty,C=function(t,e){return M.call(t,e)},x=l.document,k=b(x)&&b(x.createElement),S=!c&&!h((function(){return 7!=Object.defineProperty(k?x.createElement("div"):{},"a",{get:function(){return 7}}).a})),L=Object.getOwnPropertyDescriptor,T={f:c?L:function(t,e){if(t=y(t),e=w(e,!0),S)try{return L(t,e)}catch(i){}if(C(t,e))return f(!p.f.call(t,e),t[e])}},A=function(t){if(!b(t))throw TypeError(String(t)+" is not an object");return t},I=Object.defineProperty,P={f:c?I:function(t,e,i){if(A(t),e=w(e,!0),A(i),S)try{return I(t,e,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},E=c?function(t,e,i){return P.f(t,e,f(1,i))}:function(t,e,i){return t[e]=i,t},z=function(t,e){try{E(l,t,e)}catch(i){l[t]=e}return e},D=i((function(t){var e=l["__core-js_shared__"]||z("__core-js_shared__",{});(t.exports=function(t,i){return e[t]||(e[t]=void 0!==i?i:{})})("versions",[]).push({version:"3.1.3",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),O=D("native-function-to-string",Function.toString),N=l.WeakMap,R="function"==typeof N&&/native code/.test(O.call(N)),B=0,F=Math.random(),j=D("keys"),W={};if(R){var Z=new(0,l.WeakMap),V=Z.get,q=Z.has,G=Z.set;n=function(t,e){return G.call(Z,t,e),e},a=function(t){return V.call(Z,t)||{}},s=function(t){return q.call(Z,t)}}else{var H=j.state||(j.state="Symbol("+String("state")+")_"+(++B+F).toString(36));W[H]=!0,n=function(t,e){return E(t,H,e),e},a=function(t){return C(t,H)?t[H]:{}},s=function(t){return C(t,H)}}var U={set:n,get:a,has:s,enforce:function(t){return s(t)?a(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!b(e)||(i=a(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},$=i((function(t){var e=U.get,i=U.enforce,n=String(O).split("toString");D("inspectSource",(function(t){return O.call(t)})),(t.exports=function(t,e,a,s){var o=!!s&&!!s.unsafe,r=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof a&&("string"!=typeof e||C(a,"name")||E(a,"name",e),i(a).source=n.join("string"==typeof e?e:"")),t!==l?(o?!h&&t[e]&&(r=!0):delete t[e],r?t[e]=a:E(t,e,a)):r?t[e]=a:z(e,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||O.call(this)}))})),Y=l,K=function(t){return"function"==typeof t?t:void 0},Q=function(t,e){return arguments.length<2?K(Y[t])||K(l[t]):Y[t]&&Y[t][e]||l[t]&&l[t][e]},X=Math.ceil,J=Math.floor,tt=function(t){return isNaN(t=+t)?0:(t>0?J:X)(t)},et=Math.min,it=function(t){return t>0?et(tt(t),9007199254740991):0},nt=Math.max,at=Math.min,st=function(t){return function(e,i,n){var a,s=y(e),o=it(s.length),r=function(t,e){var i=tt(t);return i<0?nt(i+e,0):at(i,e)}(n,o);if(t&&i!=i){for(;o>r;)if((a=s[r++])!=a)return!0}else for(;o>r;r++)if((t||r in s)&&s[r]===i)return t||r||0;return!t&&-1}},ot=(st(!0),st(!1)),rt=function(t,e){var i,n=y(t),a=0,s=[];for(i in n)!C(W,i)&&C(n,i)&&s.push(i);for(;e.length>a;)C(n,i=e[a++])&&(~ot(s,i)||s.push(i));return s},lt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ht=lt.concat("length","prototype"),ct={f:Object.getOwnPropertyNames||function(t){return rt(t,ht)}},ut={f:Object.getOwnPropertySymbols},dt=Q("Reflect","ownKeys")||function(t){var e=ct.f(A(t)),i=ut.f;return i?e.concat(i(t)):e},pt=function(t,e){for(var i=dt(e),n=P.f,a=T.f,s=0;s<i.length;s++){var o=i[s];C(t,o)||n(t,o,a(e,o))}},ft=/#|\.prototype\./,mt=function(t,e){var i=_t[gt(t)];return i==yt||i!=vt&&("function"==typeof e?h(e):!!e)},gt=mt.normalize=function(t){return String(t).replace(ft,".").toLowerCase()},_t=mt.data={},vt=mt.NATIVE="N",yt=mt.POLYFILL="P",bt=mt,wt=T.f,Mt=function(t,e){var i,n,a,s,o,r=t.target,h=t.global,c=t.stat;if(i=h?l:c?l[r]||z(r,{}):(l[r]||{}).prototype)for(n in e){if(s=e[n],a=t.noTargetGet?(o=wt(i,n))&&o.value:i[n],!bt(h?n:r+(c?".":"#")+n,t.forced)&&void 0!==a){if(typeof s==typeof a)continue;pt(s,a)}(t.sham||a&&a.sham)&&E(s,"sham",!0),$(i,n,s,t)}},Ct=Object.keys||function(t){return rt(t,lt)},xt=function(t){return Object(v(t))},kt=Object.assign,St=!kt||h((function(){var t={},e={},i=Symbol();return t[i]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=kt({},t)[i]||"abcdefghijklmnopqrst"!=Ct(kt({},e)).join("")}))?function(t,e){for(var i=xt(t),n=arguments.length,a=1,s=ut.f,o=p.f;n>a;)for(var r,l=_(arguments[a++]),h=s?Ct(l).concat(s(l)):Ct(l),u=h.length,d=0;u>d;)r=h[d++],c&&!o.call(l,r)||(i[r]=l[r]);return i}:kt;Mt({target:"Object",stat:!0,forced:Object.assign!==St},{assign:St});var Lt="".repeat||function(t){var e=String(v(this)),i="",n=tt(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i},Tt=Math.ceil,At=function(t){return function(e,i,n){var a,s,o=String(v(e)),r=o.length,l=void 0===n?" ":String(n),h=it(i);return h<=r||""==l?o:((s=Lt.call(l,Tt((a=h-r)/l.length))).length>a&&(s=s.slice(0,a)),t?o+s:s+o)}},It={start:At(!1),end:At(!0)},Pt=Q("navigator","userAgent")||"",Et=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Pt),zt=It.end;Mt({target:"String",proto:!0,forced:Et},{padEnd:function(t){return zt(this,t,arguments.length>1?arguments[1]:void 0)}});var Dt=It.start;function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bt(t,e,i){return e&&Rt(t.prototype,e),i&&Rt(t,i),t}function Ft(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wt(t,e){if(null==t)return{};var i,n,a=function(t,e){if(null==t)return{};var i,n,a={},s=Object.keys(t);for(n=0;n<s.length;n++)e.indexOf(i=s[n])>=0||(a[i]=t[i]);return a}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)e.indexOf(i=s[n])>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(a[i]=t[i])}return a}function Zt(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jt(t)););return t}function qt(t,e,i){return(qt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=Vt(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(i):a.value}})(t,e,i||t)}function Gt(t,e,i,n){return(Gt="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,i,n){var a,s=Vt(t,e);if(s){if((a=Object.getOwnPropertyDescriptor(s,e)).set)return a.set.call(n,i),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(n,e)){if(!a.writable)return!1;a.value=i,Object.defineProperty(n,e,a)}else!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(n,e,i);return!0})(t,e,i,n)}function Ht(t,e,i,n,a){if(!Gt(t,e,i,n||t)&&a)throw new Error("failed to set property");return i}function Ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(l){a=!0,s=l}finally{try{n||null==r.return||r.return()}finally{if(a)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $t(t){return"string"==typeof t||t instanceof String}Mt({target:"String",proto:!0,forced:Et},{padStart:function(t){return Dt(this,t,arguments.length>1?arguments[1]:void 0)}}),Mt({target:"String",proto:!0},{repeat:Lt});var Yt={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function Kt(t){switch(t){case Yt.LEFT:return Yt.FORCE_LEFT;case Yt.RIGHT:return Yt.FORCE_RIGHT;default:return t}}function Qt(t){return t.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}var Xt="undefined"!=typeof window&&window||"undefined"!=typeof global&&global.global===global&&global||"undefined"!=typeof self&&self.self===self&&self||{},Jt=function(){function t(e,i,n,a){for(Nt(this,t),this.value=e,this.cursorPos=i,this.oldValue=n,this.oldSelection=a;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return Bt(t,[{key:"startChangePos",get:function(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function(){return!this.removedCount||this.insertedCount?Yt.NONE:this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos?Yt.RIGHT:Yt.LEFT}}]),t}(),te=function(){function t(e){Nt(this,t),Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},e)}return Bt(t,[{key:"aggregate",value:function(t){return this.rawInserted+=t.rawInserted,this.skip=this.skip||t.skip,this.inserted+=t.inserted,this.tailShift+=t.tailShift,this}},{key:"offset",get:function(){return this.tailShift+this.inserted.length}}]),t}(),ee=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;Nt(this,t),this.value=e,this.from=i,this.stop=n}return Bt(t,[{key:"toString",value:function(){return this.value}},{key:"extend",value:function(t){this.value+=String(t)}},{key:"appendTo",value:function(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}},{key:"shiftBefore",value:function(t){if(this.from>=t||!this.value.length)return"";var e=this.value[0];return this.value=this.value.slice(1),e}},{key:"state",get:function(){return{value:this.value,from:this.from,stop:this.stop}},set:function(t){Object.assign(this,t)}}]),t}(),ie=function(){function t(e){Nt(this,t),this._value="",this._update(e),this.isInitialized=!0}return Bt(t,[{key:"updateOptions",value:function(t){Object.keys(t).length&&this.withValueRefresh(this._update.bind(this,t))}},{key:"_update",value:function(t){Object.assign(this,t)}},{key:"reset",value:function(){this._value=""}},{key:"resolve",value:function(t){return this.reset(),this.append(t,{input:!0},""),this.doCommit(),this.value}},{key:"nearestInputPos",value:function(t,e){return t}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.value.slice(t,e)}},{key:"extractTail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return new ee(this.extractInput(t,e),t)}},{key:"appendTail",value:function(t){return $t(t)&&(t=new ee(String(t))),t.appendTo(this)}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t=this.doPrepare(t,e))?(this._value+=t,new te({inserted:t,rawInserted:t})):new te}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,n=this.state,a=this._appendCharRaw(t,e);if(a.inserted){var s,o=!1!==this.doValidate(e);if(o&&null!=i){var r=this.state;this.overwrite&&(s=i.state,i.shiftBefore(this.value.length));var l=this.appendTail(i);(o=l.rawInserted===i.toString())&&l.inserted&&(this.state=r)}o||(a.rawInserted=a.inserted="",this.state=n,i&&s&&(i.state=s))}return a}},{key:"_appendPlaceholder",value:function(){return new te}},{key:"append",value:function(t,e,i){if(!$t(t))throw new Error("value should be string");var n=new te,a=$t(i)?new ee(String(i)):i;e.tail&&(e._beforeTailState=this.state);for(var s=0;s<t.length;++s)n.aggregate(this._appendChar(t[s],e,a));return null!=a&&(n.tailShift+=this.appendTail(a).tailShift),n}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this._value=this.value.slice(0,t)+this.value.slice(e),new te}},{key:"withValueRefresh",value:function(t){if(this._refreshing||!this.isInitialized)return t();this._refreshing=!0;var e=this.unmaskedValue,i=this.value,n=t();return this.resolve(i)!==i&&(this.unmaskedValue=e),delete this._refreshing,n}},{key:"doPrepare",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.prepare?this.prepare(t,this,e):t}},{key:"doValidate",value:function(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}},{key:"doCommit",value:function(){this.commit&&this.commit(this.value,this)}},{key:"splice",value:function(t,e,i,n){var a=this.extractTail(t+e),s=this.nearestInputPos(t,n);return new te({tailShift:s-t}).aggregate(this.remove(s)).aggregate(this.append(i,{input:!0},a))}},{key:"state",get:function(){return{_value:this.value}},set:function(t){this._value=t._value}},{key:"value",get:function(){return this._value},set:function(t){this.resolve(t)}},{key:"unmaskedValue",get:function(){return this.value},set:function(t){this.reset(),this.append(t,{},""),this.doCommit()}},{key:"typedValue",get:function(){return this.unmaskedValue},set:function(t){this.unmaskedValue=t}},{key:"rawInputValue",get:function(){return this.extractInput(0,this.value.length,{raw:!0})},set:function(t){this.reset(),this.append(t,{raw:!0},""),this.doCommit()}},{key:"isComplete",get:function(){return!0}}]),t}();function ne(t){if(null==t)throw new Error("mask property should be defined");return t instanceof RegExp?Xt.IMask.MaskedRegExp:$t(t)?Xt.IMask.MaskedPattern:t instanceof Date||t===Date?Xt.IMask.MaskedDate:t instanceof Number||"number"==typeof t||t===Number?Xt.IMask.MaskedNumber:Array.isArray(t)||t===Array?Xt.IMask.MaskedDynamic:t.prototype instanceof Xt.IMask.Masked?t:t instanceof Function?Xt.IMask.MaskedFunction:(console.warn("Mask not found for mask",t),Xt.IMask.Masked)}function ae(t){var e=(t=Object.assign({},t)).mask;return e instanceof Xt.IMask.Masked?e:new(ne(e))(t)}var se={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},oe=function(){function t(e){Nt(this,t);var i=e.mask,n=Wt(e,["mask"]);this.masked=ae({mask:i}),Object.assign(this,n)}return Bt(t,[{key:"reset",value:function(){this._isFilled=!1,this.masked.reset()}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return 0===t&&e>=1?(this._isFilled=!1,this.masked.remove(t,e)):new te}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._isFilled)return new te;var i=this.masked.state,n=this.masked._appendChar(t,e);return n.inserted&&!1===this.doValidate(e)&&(n.inserted=n.rawInserted="",this.masked.state=i),n.inserted||this.isOptional||this.lazy||e.input||(n.inserted=this.placeholderChar),n.skip=!n.inserted&&!this.isOptional,this._isFilled=Boolean(n.inserted),n}},{key:"append",value:function(){var t;return(t=this.masked).append.apply(t,arguments)}},{key:"_appendPlaceholder",value:function(){var t=new te;return this._isFilled||this.isOptional?t:(this._isFilled=!0,t.inserted=this.placeholderChar,t)}},{key:"extractTail",value:function(){var t;return(t=this.masked).extractTail.apply(t,arguments)}},{key:"appendTail",value:function(){var t;return(t=this.masked).appendTail.apply(t,arguments)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=arguments.length>2?arguments[2]:void 0;return this.masked.extractInput(t,e,i)}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yt.NONE,i=0,n=this.value.length,a=Math.min(Math.max(t,i),n);switch(e){case Yt.LEFT:case Yt.FORCE_LEFT:return this.isComplete?a:i;case Yt.RIGHT:case Yt.FORCE_RIGHT:return this.isComplete?a:n;case Yt.NONE:default:return a}}},{key:"doValidate",value:function(){var t,e;return(t=this.masked).doValidate.apply(t,arguments)&&(!this.parent||(e=this.parent).doValidate.apply(e,arguments))}},{key:"doCommit",value:function(){this.masked.doCommit()}},{key:"value",get:function(){return this.masked.value||(this._isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function(){return this.masked.unmaskedValue}},{key:"isComplete",get:function(){return Boolean(this.masked.value)||this.isOptional}},{key:"state",get:function(){return{masked:this.masked.state,_isFilled:this._isFilled}},set:function(t){this.masked.state=t.masked,this._isFilled=t._isFilled}}]),t}(),re=function(){function t(e){Nt(this,t),Object.assign(this,e),this._value=""}return Bt(t,[{key:"reset",value:function(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length;return this._value=this._value.slice(0,t)+this._value.slice(e),this._value||(this._isRawInput=!1),new te}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yt.NONE,i=0,n=this._value.length;switch(e){case Yt.LEFT:case Yt.FORCE_LEFT:return i;case Yt.NONE:case Yt.RIGHT:case Yt.FORCE_RIGHT:default:return n}}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.raw&&this._isRawInput&&this._value.slice(t,e)||""}},{key:"_appendChar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new te;if(this._value)return i;var n=this.char===t[0],a=n&&(this.isUnmasking||e.input||e.raw)&&!e.tail;return a&&(i.rawInserted=this.char),this._value=i.inserted=this.char,this._isRawInput=a&&(e.raw||e.input),i}},{key:"_appendPlaceholder",value:function(){var t=new te;return this._value?t:(this._value=t.inserted=this.char,t)}},{key:"extractTail",value:function(){return new ee("")}},{key:"appendTail",value:function(t){return $t(t)&&(t=new ee(String(t))),t.appendTo(this)}},{key:"append",value:function(t,e,i){var n=this._appendChar(t,e);return null!=i&&(n.tailShift+=this.appendTail(i).tailShift),n}},{key:"doCommit",value:function(){}},{key:"value",get:function(){return this._value}},{key:"unmaskedValue",get:function(){return this.isUnmasking?this.value:""}},{key:"isComplete",get:function(){return!0}},{key:"state",get:function(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function(t){Object.assign(this,t)}}]),t}(),le=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Nt(this,t),this.chunks=e,this.from=i}return Bt(t,[{key:"toString",value:function(){return this.chunks.map(String).join("")}},{key:"extend",value:function(e){if(String(e)){$t(e)&&(e=new ee(String(e)));var i=this.chunks[this.chunks.length-1],n=i&&(i.stop===e.stop||null==e.stop)&&e.from===i.from+i.toString().length;if(e instanceof ee)n?i.extend(e.toString()):this.chunks.push(e);else if(e instanceof t){if(null==e.stop)for(var a;e.chunks.length&&null==e.chunks[0].stop;)(a=e.chunks.shift()).from+=e.from,this.extend(a);e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}}},{key:"appendTo",value:function(e){if(!(e instanceof Xt.IMask.MaskedPattern))return new ee(this.toString()).appendTo(e);for(var i=new te,n=0;n<this.chunks.length&&!i.skip;++n){var a=this.chunks[n],s=e._mapPosToBlock(e.value.length),o=a.stop,r=void 0;if(o&&(!s||s.index<=o)&&((a instanceof t||e._stops.indexOf(o)>=0)&&i.aggregate(e._appendPlaceholder(o)),r=a instanceof t&&e._blocks[o]),r){var l=r.appendTail(a);l.skip=!1,i.aggregate(l),e._value+=l.inserted;var h=a.toString().slice(l.rawInserted.length);h&&i.aggregate(e.append(h,{tail:!0}))}else i.aggregate(e.append(a.toString(),{tail:!0}))}return i}},{key:"shiftBefore",value:function(t){if(this.from>=t||!this.chunks.length)return"";for(var e=t-this.from,i=0;i<this.chunks.length;){var n=this.chunks[i],a=n.shiftBefore(e);if(n.toString()){if(!a)break;++i}else this.chunks.splice(i,1);if(a)return a}return""}},{key:"state",get:function(){return{chunks:this.chunks.map((function(t){return t.state})),from:this.from,stop:this.stop,blockIndex:this.blockIndex}},set:function(e){var i=e.chunks,n=Wt(e,["chunks"]);Object.assign(this,n),this.chunks=i.map((function(e){var i="chunks"in e?new t:new ee;return i.state=e,i}))}}]),t}(),he=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Nt(this,e),t.definitions=Object.assign({},se,t.definitions),Zt(this,jt(e).call(this,Object.assign({},e.DEFAULTS,{},t)))}return Ft(e,t),Bt(e,[{key:"_update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.definitions=Object.assign({},this.definitions,t.definitions),qt(jt(e.prototype),"_update",this).call(this,t),this._rebuildMask()}},{key:"_rebuildMask",value:function(){var t=this,i=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};var n=this.mask;if(n&&i)for(var a=!1,s=!1,o=0;o<n.length;++o)if(!this.blocks||"continue"!==function(){var e=n.slice(o),i=Object.keys(t.blocks).filter((function(t){return 0===e.indexOf(t)}));i.sort((function(t,e){return e.length-t.length}));var a=i[0];if(a){var s=ae(Object.assign({parent:t,lazy:t.lazy,placeholderChar:t.placeholderChar,overwrite:t.overwrite},t.blocks[a]));return s&&(t._blocks.push(s),t._maskedBlocks[a]||(t._maskedBlocks[a]=[]),t._maskedBlocks[a].push(t._blocks.length-1)),o+=a.length-1,"continue"}}()){var r=n[o],l=r in i;if(r!==e.STOP_CHAR)if("{"!==r&&"}"!==r)if("["!==r&&"]"!==r){if(r===e.ESCAPE_CHAR){if(!(r=n[++o]))break;l=!1}var h=l?new oe({parent:this,lazy:this.lazy,placeholderChar:this.placeholderChar,mask:i[r],isOptional:s}):new re({char:r,isUnmasking:a});this._blocks.push(h)}else s=!s;else a=!a;else this._stops.push(this._blocks.length)}}},{key:"reset",value:function(){qt(jt(e.prototype),"reset",this).call(this),this._blocks.forEach((function(t){return t.reset()}))}},{key:"doCommit",value:function(){this._blocks.forEach((function(t){return t.doCommit()})),qt(jt(e.prototype),"doCommit",this).call(this)}},{key:"appendTail",value:function(t){return qt(jt(e.prototype),"appendTail",this).call(this,t).aggregate(this._appendPlaceholder())}},{key:"_appendCharRaw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=this.doPrepare(t,e);var i=this._mapPosToBlock(this.value.length),n=new te;if(!i)return n;for(var a=i.index;;++a){var s=this._blocks[a];if(!s)break;var o=s._appendChar(t,e),r=o.skip;if(n.aggregate(o),r||o.rawInserted)break}return n}},{key:"extractTail",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=new le;return e===i?n:(this._forEachBlocksInRange(e,i,(function(e,i,a,s){var o=e.extractTail(a,s);o.stop=t._findStopBefore(i),o.from=t._blockStartPos(i),o instanceof le&&(o.blockIndex=i),n.extend(o)})),n)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t===e)return"";var n="";return this._forEachBlocksInRange(t,e,(function(t,e,a,s){n+=t.extractInput(a,s,i)})),n}},{key:"_findStopBefore",value:function(t){for(var e,i=0;i<this._stops.length;++i){var n=this._stops[i];if(!(n<=t))break;e=n}return e}},{key:"_appendPlaceholder",value:function(t){var e=this,i=new te;if(this.lazy&&null==t)return i;var n=this._mapPosToBlock(this.value.length);return n?(this._blocks.slice(n.index,null!=t?t:this._blocks.length).forEach((function(n){if(!n.lazy||null!=t){var a=n._appendPlaceholder.apply(n,null!=n._blocks?[n._blocks.length]:[]);e._value+=a.inserted,i.aggregate(a)}})),i):i}},{key:"_mapPosToBlock",value:function(t){for(var e="",i=0;i<this._blocks.length;++i){var n=e.length;if(t<=(e+=this._blocks[i].value).length)return{index:i,offset:t-n}}}},{key:"_blockStartPos",value:function(t){return this._blocks.slice(0,t).reduce((function(t,e){return t+e.value.length}),0)}},{key:"_forEachBlocksInRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=arguments.length>2?arguments[2]:void 0,n=this._mapPosToBlock(t);if(n){var a=this._mapPosToBlock(e),s=a&&n.index===a.index,o=n.offset,r=a&&s?a.offset:this._blocks[n.index].value.length;if(i(this._blocks[n.index],n.index,o,r),a&&!s){for(var l=n.index+1;l<a.index;++l)i(this._blocks[l],l,0,this._blocks[l].value.length);i(this._blocks[a.index],a.index,0,a.offset)}}}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=qt(jt(e.prototype),"remove",this).call(this,t,i);return this._forEachBlocksInRange(t,i,(function(t,e,i,a){n.aggregate(t.remove(i,a))})),n}},{key:"nearestInputPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yt.NONE,i=this._mapPosToBlock(t)||{index:0,offset:0},n=i.offset,a=i.index,s=this._blocks[a];if(!s)return t;var o=n;0!==o&&o<s.value.length&&(o=s.nearestInputPos(n,Kt(e)));var r=o===s.value.length,l=0===o;if(!l&&!r)return this._blockStartPos(a)+o;var h=r?a+1:a;if(e===Yt.NONE){if(h>0){var c=h-1,u=this._blocks[c],d=u.nearestInputPos(0,Yt.NONE);if(!u.value.length||d!==u.value.length)return this._blockStartPos(h)}for(var p=h,f=p;f<this._blocks.length;++f){var m=this._blocks[f],g=m.nearestInputPos(0,Yt.NONE);if(!m.value.length||g!==m.value.length)return this._blockStartPos(f)+g}for(var _=h-1;_>=0;--_){var v=this._blocks[_],y=v.nearestInputPos(0,Yt.NONE);if(!v.value.length||y!==v.value.length)return this._blockStartPos(_)+v.value.length}return t}if(e===Yt.LEFT||e===Yt.FORCE_LEFT){for(var b,w=h;w<this._blocks.length;++w)if(this._blocks[w].value){b=w;break}if(null!=b){var M=this._blocks[b],C=M.nearestInputPos(0,Yt.RIGHT);if(0===C&&M.unmaskedValue.length)return this._blockStartPos(b)+C}for(var x,k=-1,S=h-1;S>=0;--S){var L=this._blocks[S],T=L.nearestInputPos(L.value.length,Yt.FORCE_LEFT);if(L.value&&0===T||(x=S),0!==T){if(T!==L.value.length)return this._blockStartPos(S)+T;k=S;break}}if(e===Yt.LEFT)for(var A=k+1;A<=Math.min(h,this._blocks.length-1);++A){var I=this._blocks[A],P=I.nearestInputPos(0,Yt.NONE),E=this._blockStartPos(A)+P;if(E>t)break;if(P!==I.value.length)return E}if(k>=0)return this._blockStartPos(k)+this._blocks[k].value.length;if(e===Yt.FORCE_LEFT||this.lazy&&!this.extractInput()&&!ce(this._blocks[h]))return 0;if(null!=x)return this._blockStartPos(x);for(var z=h;z<this._blocks.length;++z){var D=this._blocks[z],O=D.nearestInputPos(0,Yt.NONE);if(!D.value.length||O!==D.value.length)return this._blockStartPos(z)+O}return 0}if(e===Yt.RIGHT||e===Yt.FORCE_RIGHT){for(var N,R,B=h;B<this._blocks.length;++B){var F=this._blocks[B],j=F.nearestInputPos(0,Yt.NONE);if(j!==F.value.length){R=this._blockStartPos(B)+j,N=B;break}}if(null!=N&&null!=R){for(var W=N;W<this._blocks.length;++W){var Z=this._blocks[W],V=Z.nearestInputPos(0,Yt.FORCE_RIGHT);if(V!==Z.value.length)return this._blockStartPos(W)+V}return e===Yt.FORCE_RIGHT?this.value.length:R}for(var q=Math.min(h,this._blocks.length-1);q>=0;--q){var G=this._blocks[q],H=G.nearestInputPos(G.value.length,Yt.LEFT);if(0!==H){var U=this._blockStartPos(q)+H;if(U>=t)return U;break}}}return t}},{key:"maskedBlock",value:function(t){return this.maskedBlocks(t)[0]}},{key:"maskedBlocks",value:function(t){var e=this,i=this._maskedBlocks[t];return i?i.map((function(t){return e._blocks[t]})):[]}},{key:"state",get:function(){return Object.assign({},qt(jt(e.prototype),"state",this),{_blocks:this._blocks.map((function(t){return t.state}))})},set:function(t){var i=t._blocks,n=Wt(t,["_blocks"]);this._blocks.forEach((function(t,e){return t.state=i[e]})),Ht(jt(e.prototype),"state",n,this,!0)}},{key:"isComplete",get:function(){return this._blocks.every((function(t){return t.isComplete}))}},{key:"unmaskedValue",get:function(){return this._blocks.reduce((function(t,e){return t+e.unmaskedValue}),"")},set:function(t){Ht(jt(e.prototype),"unmaskedValue",t,this,!0)}},{key:"value",get:function(){return this._blocks.reduce((function(t,e){return t+e.value}),"")},set:function(t){Ht(jt(e.prototype),"value",t,this,!0)}}]),e}(ie);function ce(t){if(!t)return!1;var e=t.value;return!e||t.nearestInputPos(0,Yt.NONE)!==e.length}he.DEFAULTS={lazy:!0,placeholderChar:"_"},he.STOP_CHAR="`",he.ESCAPE_CHAR="\\",he.InputDefinition=oe,he.FixedDefinition=re;var ue=function(t){function e(){return Nt(this,e),Zt(this,jt(e).apply(this,arguments))}return Ft(e,t),Bt(e,[{key:"_update",value:function(t){t=Object.assign({to:this.to||0,from:this.from||0},t);var i=String(t.to).length;null!=t.maxLength&&(i=Math.max(i,t.maxLength)),t.maxLength=i;for(var n=String(t.from).padStart(i,"0"),a=String(t.to).padStart(i,"0"),s=0;s<a.length&&a[s]===n[s];)++s;t.mask=a.slice(0,s).replace(/0/g,"\\0")+"0".repeat(i-s),qt(jt(e.prototype),"_update",this).call(this,t)}},{key:"boundaries",value:function(t){var e="",i="",n=Ut(t.match(/^(\D*)(\d*)(\D*)/)||[],3),a=n[1],s=n[2];return s&&(e="0".repeat(a.length)+s,i="9".repeat(a.length)+s),[e=e.padEnd(this.maxLength,"0"),i=i.padEnd(this.maxLength,"9")]}},{key:"doPrepare",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=qt(jt(e.prototype),"doPrepare",this).call(this,t,i).replace(/\D/g,""),!this.autofix)return t;for(var n=String(this.from).padStart(this.maxLength,"0"),a=String(this.to).padStart(this.maxLength,"0"),s=this.value,o="",r=0;r<t.length;++r){var l=s+o+t[r],h=this.boundaries(l),c=Ut(h,2),u=c[0],d=c[1];Number(d)<this.from?o+=n[l.length-1]:Number(u)>this.to?o+=a[l.length-1]:o+=t[r]}return o}},{key:"doValidate",value:function(){var t,i=this.value,n=i.search(/[^0]/);if(-1===n&&i.length<=this._matchFrom)return!0;for(var a=this.boundaries(i),s=Ut(a,2),o=s[0],r=s[1],l=arguments.length,h=new Array(l),c=0;c<l;c++)h[c]=arguments[c];return this.from<=Number(r)&&Number(o)<=this.to&&(t=qt(jt(e.prototype),"doValidate",this)).call.apply(t,[this].concat(h))}},{key:"_matchFrom",get:function(){return this.maxLength-String(this.from).length}},{key:"isComplete",get:function(){return qt(jt(e.prototype),"isComplete",this)&&Boolean(this.value)}}]),e}(he),de=function(t){function e(t){return Nt(this,e),Zt(this,jt(e).call(this,Object.assign({},e.DEFAULTS,{},t)))}return Ft(e,t),Bt(e,[{key:"_update",value:function(t){t.mask===Date&&delete t.mask,t.pattern&&(t.mask=t.pattern);var i=t.blocks;t.blocks=Object.assign({},e.GET_DEFAULT_BLOCKS()),t.min&&(t.blocks.Y.from=t.min.getFullYear()),t.max&&(t.blocks.Y.to=t.max.getFullYear()),t.min&&t.max&&t.blocks.Y.from===t.blocks.Y.to&&(t.blocks.m.from=t.min.getMonth()+1,t.blocks.m.to=t.max.getMonth()+1,t.blocks.m.from===t.blocks.m.to&&(t.blocks.d.from=t.min.getDate(),t.blocks.d.to=t.max.getDate())),Object.assign(t.blocks,i),Object.keys(t.blocks).forEach((function(e){var i=t.blocks[e];"autofix"in i||(i.autofix=t.autofix)})),qt(jt(e.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,i=this.date,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=qt(jt(e.prototype),"doValidate",this)).call.apply(t,[this].concat(a))&&(!this.isComplete||this.isDateExist(this.value)&&null!=i&&(null==this.min||this.min<=i)&&(null==this.max||i<=this.max))}},{key:"isDateExist",value:function(t){return this.format(this.parse(t))===t}},{key:"date",get:function(){return this.isComplete?this.parse(this.value):null},set:function(t){this.value=this.format(t)}},{key:"typedValue",get:function(){return this.date},set:function(t){this.date=t}}]),e}(he);de.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function(t){return[String(t.getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0"),t.getFullYear()].join(".")},parse:function(t){var e=Ut(t.split("."),3);return new Date(e[2],e[1]-1,e[0])}},de.GET_DEFAULT_BLOCKS=function(){return{d:{mask:ue,from:1,to:31,maxLength:2},m:{mask:ue,from:1,to:12,maxLength:2},Y:{mask:ue,from:1900,to:9999}}};var pe=function(){function t(){Nt(this,t)}return Bt(t,[{key:"select",value:function(t,e){if(null!=t&&null!=e&&(t!==this.selectionStart||e!==this.selectionEnd))try{this._unsafeSelect(t,e)}catch(i){}}},{key:"_unsafeSelect",value:function(t,e){}},{key:"bindEvents",value:function(t){}},{key:"unbindEvents",value:function(){}},{key:"selectionStart",get:function(){var t;try{t=this._unsafeSelectionStart}catch(e){}return null!=t?t:this.value.length}},{key:"selectionEnd",get:function(){var t;try{t=this._unsafeSelectionEnd}catch(e){}return null!=t?t:this.value.length}},{key:"isActive",get:function(){return!1}}]),t}(),fe=function(t){function e(t){var i;return Nt(this,e),(i=Zt(this,jt(e).call(this))).input=t,i._handlers={},i}return Ft(e,t),Bt(e,[{key:"_unsafeSelect",value:function(t,e){this.input.setSelectionRange(t,e)}},{key:"bindEvents",value:function(t){var i=this;Object.keys(t).forEach((function(n){return i._toggleEventHandler(e.EVENTS_MAP[n],t[n])}))}},{key:"unbindEvents",value:function(){var t=this;Object.keys(this._handlers).forEach((function(e){return t._toggleEventHandler(e)}))}},{key:"_toggleEventHandler",value:function(t,e){this._handlers[t]&&(this.input.removeEventListener(t,this._handlers[t]),delete this._handlers[t]),e&&(this.input.addEventListener(t,e),this._handlers[t]=e)}},{key:"isActive",get:function(){return this.input===document.activeElement}},{key:"_unsafeSelectionStart",get:function(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function(){return this.input.selectionEnd}},{key:"value",get:function(){return this.input.value},set:function(t){this.input.value=t}}]),e}(pe);fe.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"};var me=function(){function t(e,i){Nt(this,t),this.el=e instanceof pe?e:new fe(e),this.masked=ae(i),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return Bt(t,[{key:"maskEquals",value:function(t){return null==t||t===this.masked.mask||t===Date&&this.masked instanceof de}},{key:"_bindEvents",value:function(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this.alignCursorFriendly,focus:this._onFocus,commit:this._onChange})}},{key:"_unbindEvents",value:function(){this.el.unbindEvents()}},{key:"_fireEvent",value:function(t){var e=this._listeners[t];e&&e.forEach((function(t){return t()}))}},{key:"_saveSelection",value:function(){this.value!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function(){var t=this.masked.unmaskedValue,e=this.masked.value,i=this.unmaskedValue!==t||this.value!==e;this._unmaskedValue=t,this._value=e,this.el.value!==e&&(this.el.value=e),i&&this._fireChangeEvents()}},{key:"updateOptions",value:function(t){var e=t.mask,i=Wt(t,["mask"]),n=!this.maskEquals(e),a=!function t(e,i){if(i===e)return!0;var n,a=Array.isArray(i),s=Array.isArray(e);if(a&&s){if(i.length!=e.length)return!1;for(n=0;n<i.length;n++)if(!t(i[n],e[n]))return!1;return!0}if(a!=s)return!1;if(i&&e&&"object"===Ot(i)&&"object"===Ot(e)){var o=i instanceof Date,r=e instanceof Date;if(o&&r)return i.getTime()==e.getTime();if(o!=r)return!1;var l=i instanceof RegExp,h=e instanceof RegExp;if(l&&h)return i.toString()==e.toString();if(l!=h)return!1;var c=Object.keys(i);for(n=0;n<c.length;n++)if(!Object.prototype.hasOwnProperty.call(e,c[n]))return!1;for(n=0;n<c.length;n++)if(!t(e[c[n]],i[c[n]]))return!1;return!0}return!(!i||!e||"function"!=typeof i||"function"!=typeof e)&&i.toString()===e.toString()}(this.masked,i);n&&(this.mask=e),a&&this.masked.updateOptions(i),(n||a)&&this.updateControl()}},{key:"updateCursor",value:function(t){null!=t&&(this.cursorPos=t,this._delayUpdateCursor(t))}},{key:"_delayUpdateCursor",value:function(t){var e=this;this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout((function(){e.el&&(e.cursorPos=e._changingCursorPos,e._abortUpdateCursor())}),10)}},{key:"_fireChangeEvents",value:function(){this._fireEvent("accept"),this.masked.isComplete&&this._fireEvent("complete")}},{key:"_abortUpdateCursor",value:function(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function(){this.cursorPos=this.masked.nearestInputPos(this.cursorPos,Yt.LEFT)}},{key:"alignCursorFriendly",value:function(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this}},{key:"off",value:function(t,e){if(!this._listeners[t])return this;if(!e)return delete this._listeners[t],this;var i=this._listeners[t].indexOf(e);return i>=0&&this._listeners[t].splice(i,1),this}},{key:"_onInput",value:function(){if(this._abortUpdateCursor(),!this._selection)return this.updateValue();var t=new Jt(this.el.value,this.cursorPos,this.value,this._selection),e=this.masked.rawInputValue,i=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection).offset,n=this.masked.nearestInputPos(t.startChangePos+i,e===this.masked.rawInputValue?t.removeDirection:Yt.NONE);this.updateControl(),this.updateCursor(n)}},{key:"_onChange",value:function(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}},{key:"_onDrop",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"_onFocus",value:function(t){this.selectionStart===this.cursorPos&&(this._selection&&(this.cursorPos=this._selection.end),this.alignCursorFriendly())}},{key:"destroy",value:function(){this._unbindEvents(),this._listeners.length=0,delete this.el}},{key:"mask",get:function(){return this.masked.mask},set:function(t){if(!this.maskEquals(t))if(this.masked.constructor!==ne(t)){var e=ae({mask:t});e.unmaskedValue=this.masked.unmaskedValue,this.masked=e}else this.masked.updateOptions({mask:t})}},{key:"value",get:function(){return this._value},set:function(t){this.masked.value=t,this.updateControl(),this.alignCursor()}},{key:"unmaskedValue",get:function(){return this._unmaskedValue},set:function(t){this.masked.unmaskedValue=t,this.updateControl(),this.alignCursor()}},{key:"typedValue",get:function(){return this.masked.typedValue},set:function(t){this.masked.typedValue=t,this.updateControl(),this.alignCursor()}},{key:"selectionStart",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function(t){this.el.isActive&&(this.el.select(t,t),this._saveSelection())}}]),t}(),ge=function(t){function e(){return Nt(this,e),Zt(this,jt(e).apply(this,arguments))}return Ft(e,t),Bt(e,[{key:"_update",value:function(t){t.enum&&(t.mask="*".repeat(t.enum[0].length)),qt(jt(e.prototype),"_update",this).call(this,t)}},{key:"doValidate",value:function(){for(var t,i=this,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return this.enum.some((function(t){return t.indexOf(i.unmaskedValue)>=0}))&&(t=qt(jt(e.prototype),"doValidate",this)).call.apply(t,[this].concat(a))}}]),e}(he),_e=function(t){function e(t){return Nt(this,e),Zt(this,jt(e).call(this,Object.assign({},e.DEFAULTS,{},t)))}return Ft(e,t),Bt(e,[{key:"_update",value:function(t){qt(jt(e.prototype),"_update",this).call(this,t),this._updateRegExps()}},{key:"_updateRegExps",value:function(){var t="^"+(this.allowNegative?"[+|\\-]?":""),e=(this.scale?"("+Qt(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp(t+"(0|([1-9]+\\d*))?"+e),this._numberRegExp=new RegExp(t+"\\d*"+e),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(Qt).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(Qt(this.thousandsSeparator),"g")}},{key:"_removeThousandsSeparators",value:function(t){return t.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function(t){var e=t.split(this.radix);return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),e.join(this.radix)}},{key:"doPrepare",value:function(t){for(var i,n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return(i=qt(jt(e.prototype),"doPrepare",this)).call.apply(i,[this,this._removeThousandsSeparators(t.replace(this._mapToRadixRegExp,this.radix))].concat(a))}},{key:"_separatorsCount",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0,n=0;n<t;++n)this._value.indexOf(this.thousandsSeparator,n)===n&&(++i,e&&(t+=this.thousandsSeparator.length));return i}},{key:"_separatorsCountFromSlice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._value;return this._separatorsCount(this._removeThousandsSeparators(t).length,!0)}},{key:"extractInput",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0,a=this._adjustRangeWithSeparators(t,i),s=Ut(a,2);return t=s[0],i=s[1],this._removeThousandsSeparators(qt(jt(e.prototype),"extractInput",this).call(this,t,i,n))}},{key:"_appendCharRaw",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.thousandsSeparator)return qt(jt(e.prototype),"_appendCharRaw",this).call(this,t,i);var n=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,a=this._separatorsCountFromSlice(n);this._value=this._removeThousandsSeparators(this.value);var s=qt(jt(e.prototype),"_appendCharRaw",this).call(this,t,i);this._value=this._insertThousandsSeparators(this._value);var o=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,r=this._separatorsCountFromSlice(o);return s.tailShift+=(r-a)*this.thousandsSeparator.length,s}},{key:"_findSeparatorAround",value:function(t){if(this.thousandsSeparator){var e=this.value.indexOf(this.thousandsSeparator,t-this.thousandsSeparator.length+1);if(e<=t)return e}return-1}},{key:"_adjustRangeWithSeparators",value:function(t,e){var i=this._findSeparatorAround(t);i>=0&&(t=i);var n=this._findSeparatorAround(e);return n>=0&&(e=n+this.thousandsSeparator.length),[t,e]}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,i=this._adjustRangeWithSeparators(t,e),n=Ut(i,2);e=n[1];var a=this.value.slice(0,t=n[0]),s=this.value.slice(e),o=this._separatorsCount(a.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(a+s));var r=this._separatorsCountFromSlice(a);return new te({tailShift:(r-o)*this.thousandsSeparator.length})}},{key:"nearestInputPos",value:function(t,e){if(!this.thousandsSeparator)return t;switch(e){case Yt.NONE:case Yt.LEFT:case Yt.FORCE_LEFT:var i=this._findSeparatorAround(t-1);if(i>=0){var n=i+this.thousandsSeparator.length;if(t<n||this.value.length<=n||e===Yt.FORCE_LEFT)return i}break;case Yt.RIGHT:case Yt.FORCE_RIGHT:var a=this._findSeparatorAround(t);if(a>=0)return a+this.thousandsSeparator.length}return t}},{key:"doValidate",value:function(t){var i=(t.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));return i&&(i=i&&!isNaN(this.number)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)),i&&qt(jt(e.prototype),"doValidate",this).call(this,t)}},{key:"doCommit",value:function(){if(this.value){var t=this.number,i=t;null!=this.min&&(i=Math.max(i,this.min)),null!=this.max&&(i=Math.min(i,this.max)),i!==t&&(this.unmaskedValue=String(i));var n=this.value;this.normalizeZeros&&(n=this._normalizeZeros(n)),this.padFractionalZeros&&(n=this._padFractionalZeros(n)),this._value=n}qt(jt(e.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function(t){var e=this._removeThousandsSeparators(t).split(this.radix);return e[0]=e[0].replace(/^(\D*)(0*)(\d*)/,(function(t,e,i,n){return e+n})),t.length&&!/\d$/.test(e[0])&&(e[0]=e[0]+"0"),e.length>1&&(e[1]=e[1].replace(/0*$/,""),e[1].length||(e.length=1)),this._insertThousandsSeparators(e.join(this.radix))}},{key:"_padFractionalZeros",value:function(t){if(!t)return t;var e=t.split(this.radix);return e.length<2&&e.push(""),e[1]=e[1].padEnd(this.scale,"0"),e.join(this.radix)}},{key:"unmaskedValue",get:function(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function(t){Ht(jt(e.prototype),"unmaskedValue",t.replace(".",this.radix),this,!0)}},{key:"number",get:function(){return Number(this.unmaskedValue)},set:function(t){this.unmaskedValue=String(t)}},{key:"typedValue",get:function(){return this.number},set:function(t){this.number=t}},{key:"allowNegative",get:function(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}}]),e}(ie);_e.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1};var ve=function(t){function e(){return Nt(this,e),Zt(this,jt(e).apply(this,arguments))}return Ft(e,t),Bt(e,[{key:"_update",value:function(t){t.mask&&(t.validate=function(e){return e.search(t.mask)>=0}),qt(jt(e.prototype),"_update",this).call(this,t)}}]),e}(ie),ye=function(t){function e(){return Nt(this,e),Zt(this,jt(e).apply(this,arguments))}return Ft(e,t),Bt(e,[{key:"_update",value:function(t){t.mask&&(t.validate=t.mask),qt(jt(e.prototype),"_update",this).call(this,t)}}]),e}(ie),be=function(t){function e(t){var i;return Nt(this,e),(i=Zt(this,jt(e).call(this,Object.assign({},e.DEFAULTS,{},t)))).currentMask=null,i}return Ft(e,t),Bt(e,[{key:"_update",value:function(t){qt(jt(e.prototype),"_update",this).call(this,t),"mask"in t&&(this.compiledMasks=Array.isArray(t.mask)?t.mask.map((function(t){return ae(t)})):[])}},{key:"_appendCharRaw",value:function(){var t,e=this._applyDispatch.apply(this,arguments);return this.currentMask&&e.aggregate((t=this.currentMask)._appendChar.apply(t,arguments)),e}},{key:"_applyDispatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.tail&&null!=e._beforeTailState?e._beforeTailState._value:this.value,n=this.rawInputValue,a=e.tail&&null!=e._beforeTailState?e._beforeTailState._rawInputValue:n,s=n.slice(a.length),o=this.currentMask,r=new te,l=o&&o.state;if(this.currentMask=this.doDispatch(t,Object.assign({},e)),this.currentMask)if(this.currentMask!==o){this.currentMask.reset();var h=this.currentMask.append(a,{raw:!0});r.tailShift=h.inserted.length-i.length,s&&(r.tailShift+=this.currentMask.append(s,{raw:!0,tail:!0}).tailShift)}else this.currentMask.state=l;return r}},{key:"_appendPlaceholder",value:function(){var t=this._applyDispatch.apply(this,arguments);return this.currentMask&&t.aggregate(this.currentMask._appendPlaceholder()),t}},{key:"doDispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatch(t,this,e)}},{key:"doValidate",value:function(){for(var t,i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=qt(jt(e.prototype),"doValidate",this)).call.apply(t,[this].concat(a))&&(!this.currentMask||(i=this.currentMask).doValidate.apply(i,a))}},{key:"reset",value:function(){this.currentMask&&this.currentMask.reset(),this.compiledMasks.forEach((function(t){return t.reset()}))}},{key:"remove",value:function(){var t,e=new te;return this.currentMask&&e.aggregate((t=this.currentMask).remove.apply(t,arguments)).aggregate(this._applyDispatch()),e}},{key:"extractInput",value:function(){var t;return this.currentMask?(t=this.currentMask).extractInput.apply(t,arguments):""}},{key:"extractTail",value:function(){for(var t,i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return this.currentMask?(t=this.currentMask).extractTail.apply(t,a):(i=qt(jt(e.prototype),"extractTail",this)).call.apply(i,[this].concat(a))}},{key:"doCommit",value:function(){this.currentMask&&this.currentMask.doCommit(),qt(jt(e.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function(){for(var t,i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return this.currentMask?(t=this.currentMask).nearestInputPos.apply(t,a):(i=qt(jt(e.prototype),"nearestInputPos",this)).call.apply(i,[this].concat(a))}},{key:"value",get:function(){return this.currentMask?this.currentMask.value:""},set:function(t){Ht(jt(e.prototype),"value",t,this,!0)}},{key:"unmaskedValue",get:function(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function(t){Ht(jt(e.prototype),"unmaskedValue",t,this,!0)}},{key:"typedValue",get:function(){return this.currentMask?this.currentMask.typedValue:""},set:function(t){var e=String(t);this.currentMask&&(this.currentMask.typedValue=t,e=this.currentMask.unmaskedValue),this.unmaskedValue=e}},{key:"isComplete",get:function(){return!!this.currentMask&&this.currentMask.isComplete}},{key:"state",get:function(){return Object.assign({},qt(jt(e.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((function(t){return t.state})),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state})},set:function(t){var i=t.compiledMasks,n=t.currentMaskRef,a=t.currentMask,s=Wt(t,["compiledMasks","currentMaskRef","currentMask"]);this.compiledMasks.forEach((function(t,e){return t.state=i[e]})),null!=n&&(this.currentMask=n,this.currentMask.state=a),Ht(jt(e.prototype),"state",s,this,!0)}},{key:"overwrite",get:function(){return this.currentMask?this.currentMask.overwrite:qt(jt(e.prototype),"overwrite",this)},set:function(t){console.warn('"overwrite" option is not available in dynamic mask, use this option in siblings')}}]),e}(ie);function we(t){return new me(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}be.DEFAULTS={dispatch:function(t,e,i){if(e.compiledMasks.length){var n=e.rawInputValue,a=e.compiledMasks.map((function(e,a){return e.reset(),e.append(n,{raw:!0}),e.append(t,i),{weight:e.rawInputValue.length,index:a}}));return a.sort((function(t,e){return e.weight-t.weight})),e.compiledMasks[a[0].index]}}},we.InputMask=me,we.Masked=ie,we.MaskedPattern=he,we.MaskedEnum=ge,we.MaskedRange=ue,we.MaskedNumber=_e,we.MaskedDate=de,we.MaskedRegExp=ve,we.MaskedFunction=ye,we.MaskedDynamic=be,we.createMask=ae,we.MaskElement=pe,we.HTMLMaskElement=fe,Xt.IMask=we,t.HTMLMaskElement=fe,t.InputMask=me,t.MaskElement=pe,t.Masked=ie,t.MaskedDate=de,t.MaskedDynamic=be,t.MaskedEnum=ge,t.MaskedFunction=ye,t.MaskedNumber=_e,t.MaskedPattern=he,t.MaskedRange=ue,t.MaskedRegExp=ve,t.createMask=ae,t.default=we,Object.defineProperty(t,"__esModule",{value:!0})})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.L={})}(this,(function(t){"use strict";var e=Object.freeze;function i(t){var e,i,n,a;for(i=1,n=arguments.length;i<n;i++)for(e in a=arguments[i])t[e]=a[e];return t}Object.freeze=function(t){return t};var n=Object.create||function(t){return a.prototype=t,new a};function a(){}function s(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var o=0;function r(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function l(t,e,i){var n,a,s,o;return o=function(){n=!1,a&&(s.apply(i,a),a=!1)},s=function(){n?a=arguments:(t.apply(i,arguments),setTimeout(o,e),n=!0)}}function h(t,e,i){var n=e[1],a=e[0],s=n-a;return t===n&&i?t:((t-a)%s+s)%s+a}function c(){return!1}function u(t,e){return e=void 0===e?6:e,+(Math.round(t+"e+"+e)+"e-"+e)}function d(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function p(t){return d(t).split(/\s+/)}function f(t,e){for(var i in t.hasOwnProperty("options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function m(t,e,i){var n=[];for(var a in t)n.push(encodeURIComponent(i?a.toUpperCase():a)+"="+encodeURIComponent(t[a]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var g=/\{ *([\w_-]+) *\}/g;function _(t,e){return t.replace(g,(function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var M=0;function C(t){var e=+new Date,i=Math.max(0,16-(e-M));return M=e+i,window.setTimeout(t,i)}var x=window.requestAnimationFrame||w("RequestAnimationFrame")||C,k=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function S(t,e,i){if(!i||x!==C)return x.call(window,s(t,e));t.call(e)}function T(t){t&&k.call(window,t)}var A=(Object.freeze||Object)({freeze:e,extend:i,create:n,bind:s,lastId:o,stamp:r,throttle:l,wrapNum:h,falseFn:c,formatNum:u,trim:d,splitWords:p,setOptions:f,getParamString:m,template:_,isArray:v,indexOf:y,emptyImageUrl:b,requestFn:x,cancelFn:k,requestAnimFrame:S,cancelAnimFrame:T});function I(){}I.extend=function(t){function e(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var a=e.__super__=this.prototype,s=n(a);for(var o in(s.constructor=e).prototype=s,this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(e[o]=this[o]);return t.statics&&(i(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),i.apply(null,[s].concat(t.includes)),delete t.includes),s.options&&(t.options=i(n(s.options),t.options)),i(s,t),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;t<e;t++)s._initHooks[t].call(this)}},e},I.include=function(t){return i(this.prototype,t),this},I.mergeOptions=function(t){return i(this.prototype.options,t),this},I.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var P={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var a=0,s=(t=p(t)).length;a<s;a++)this._on(t[a],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var a=0,s=(t=p(t)).length;a<s;a++)this._off(t[a],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(this._events[t]=n=[]),i===this&&(i=void 0);for(var a={fn:e,ctx:i},s=n,o=0,r=s.length;o<r;o++)if(s[o].fn===e&&s[o].ctx===i)return;s.push(a)},_off:function(t,e,i){var n,a,s;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(a=0,s=n.length;a<s;a++){var o=n[a];if(o.ctx===i&&o.fn===e)return o.fn=c,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(a,1)}}else{for(a=0,s=n.length;a<s;a++)n[a].fn=c;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var a=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var o=0,r=s.length;o<r;o++){var l=s[o];l.fn.call(l.ctx||this,a)}this._firingCount--}}return n&&this._propagateEvent(a),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var a=s((function(){this.off(t,e,i).off(t,a,i)}),this);return this.on(t,e,i).on(t,a,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[r(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[r(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var E=I.extend(P);function z(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var D=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function O(t,e,i){return t instanceof z?t:v(t)?new z(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new z(t.x,t.y):new z(t,e,i)}function N(t,e){if(t)for(var i=e?[t,e]:t,n=0,a=i.length;n<a;n++)this.extend(i[n])}function R(t,e){return!t||t instanceof N?t:new N(t,e)}function B(t,e){if(t)for(var i=e?[t,e]:t,n=0,a=i.length;n<a;n++)this.extend(i[n])}function F(t,e){return t instanceof B?t:new B(t,e)}function j(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function W(t,e,i){return t instanceof j?t:v(t)&&"object"!=typeof t[0]?3===t.length?new j(t[0],t[1],t[2]):2===t.length?new j(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new j(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new j(t,e,i)}z.prototype={clone:function(){return new z(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(t){var e=(t=O(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=O(t)).x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},N.prototype={extend:function(t){return t=O(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new z(this.min.x,this.max.y)},getTopRight:function(){return new z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof z?O(t):R(t))instanceof N?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,i=this.max,n=t.min,a=t.max;return a.x>=e.x&&n.x<=i.x&&a.y>=e.y&&n.y<=i.y},overlaps:function(t){t=R(t);var e=this.min,i=this.max,n=t.min,a=t.max;return a.x>e.x&&n.x<i.x&&a.y>e.y&&n.y<i.y},isValid:function(){return!(!this.min||!this.max)}},B.prototype={extend:function(t){var e,i,n=this._southWest,a=this._northEast;if(t instanceof j)i=e=t;else{if(!(t instanceof B))return t?this.extend(W(t)||F(t)):this;if(i=t._northEast,!(e=t._southWest)||!i)return this}return n||a?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),a.lat=Math.max(i.lat,a.lat),a.lng=Math.max(i.lng,a.lng)):(this._southWest=new j(e.lat,e.lng),this._northEast=new j(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,a=Math.abs(e.lng-i.lng)*t;return new B(new j(e.lat-n,e.lng-a),new j(i.lat+n,i.lng+a))},getCenter:function(){return new j((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new j(this.getNorth(),this.getWest())},getSouthEast:function(){return new j(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof j||"lat"in t?W(t):F(t);var e,i,n=this._southWest,a=this._northEast;return t instanceof B?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=a.lat&&e.lng>=n.lng&&i.lng<=a.lng},intersects:function(t){t=F(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),a=t.getNorthEast();return a.lat>=e.lat&&n.lat<=i.lat&&a.lng>=e.lng&&n.lng<=i.lng},overlaps:function(t){t=F(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),a=t.getNorthEast();return a.lat>e.lat&&n.lat<i.lat&&a.lng>e.lng&&n.lng<i.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=F(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var Z,V={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new N(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!(j.prototype={equals:function(t,e){return!!t&&(t=W(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return q.distance(this,W(t))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return F([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new j(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?h(t.lng,this.wrapLng,!0):t.lng;return new j(this.wrapLat?h(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,a=e.lng-i.lng;if(0==n&&0==a)return t;var s=t.getSouthWest(),o=t.getNorthEast();return new B(new j(s.lat-n,s.lng-a),new j(o.lat-n,o.lng-a))}},q=i({},V,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,a=e.lat*i,s=Math.sin((e.lat-t.lat)*i/2),o=Math.sin((e.lng-t.lng)*i/2),r=s*s+Math.cos(n)*Math.cos(a)*o*o,l=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return this.R*l}}),G=6378137,H={R:G,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),a=Math.sin(n*e);return new z(this.R*t.lng*e,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(t){var e=180/Math.PI;return new j((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(Z=G*Math.PI,new N([-Z,-Z],[Z,Z]))};function U(t,e,i,n){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function $(t,e,i,n){return new U(t,e,i,n)}U.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return new z((t.x/(e=e||1)-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Y,K=i({},q,{code:"EPSG:3857",projection:H,transformation:(Y=.5/(Math.PI*H.R),$(Y,.5,-Y,.5))}),Q=i({},K,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t,e){var i,n,a,s,o,r,l="";for(i=0,a=t.length;i<a;i++){for(n=0,s=(o=t[i]).length;n<s;n++)l+=(n?"L":"M")+(r=o[n]).x+" "+r.y;l+=e?It?"z":"x":""}return l||"M0 0"}var tt=document.documentElement.style,et="ActiveXObject"in window,it=et&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),at=Et("webkit"),st=Et("android"),ot=Et("android 2")||Et("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lt=st&&Et("Google")&&rt<537&&!("AudioNode"in window),ht=!!window.opera,ct=Et("chrome"),ut=Et("gecko")&&!at&&!ht&&!et,dt=!ct&&Et("safari"),pt=Et("phantom"),ft="OTransition"in tt,mt=0===navigator.platform.indexOf("Win"),gt=et&&"transition"in tt,_t="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ot,vt="MozPerspective"in tt,yt=!window.L_DISABLE_3D&&(gt||_t||vt)&&!ft&&!pt,bt="undefined"!=typeof orientation||Et("mobile"),wt=bt&&at,Mt=bt&&_t,Ct=!window.PointerEvent&&window.MSPointerEvent,xt=!(!window.PointerEvent&&!Ct),kt=!window.L_NO_TOUCH&&(xt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),St=bt&&ht,Lt=bt&&ut,Tt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),At=!!document.createElement("canvas").getContext,It=!(!document.createElementNS||!X("svg").createSVGRect),Pt=!It&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Et(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var zt=(Object.freeze||Object)({ie:et,ielt9:it,edge:nt,webkit:at,android:st,android23:ot,androidStock:lt,opera:ht,chrome:ct,gecko:ut,safari:dt,phantom:pt,opera12:ft,win:mt,ie3d:gt,webkit3d:_t,gecko3d:vt,any3d:yt,mobile:bt,mobileWebkit:wt,mobileWebkit3d:Mt,msPointer:Ct,pointer:xt,touch:kt,mobileOpera:St,mobileGecko:Lt,retina:Tt,canvas:At,svg:It,vml:Pt}),Dt=Ct?"MSPointerDown":"pointerdown",Ot=Ct?"MSPointerMove":"pointermove",Nt=Ct?"MSPointerUp":"pointerup",Rt=Ct?"MSPointerCancel":"pointercancel",Bt=["INPUT","SELECT","OPTION"],Ft={},jt=!1,Wt=0;function Zt(t){Ft[t.pointerId]=t,Wt++}function Vt(t){Ft[t.pointerId]&&(Ft[t.pointerId]=t)}function qt(t){delete Ft[t.pointerId],Wt--}function Gt(t,e){for(var i in t.touches=[],Ft)t.touches.push(Ft[i]);t.changedTouches=[t],e(t)}var Ht,Ut,$t,Yt,Kt,Qt=Ct?"MSPointerDown":xt?"pointerdown":"touchstart",Xt=Ct?"MSPointerUp":xt?"pointerup":"touchend",Jt="_leaflet_",te=ge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ee=ge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ie="webkitTransition"===ee||"OTransition"===ee?ee+"End":"transitionend";function ne(t){return"string"==typeof t?document.getElementById(t):t}function ae(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function se(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function oe(t){var e=t.parentNode;e&&e.removeChild(t)}function re(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function he(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ce(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=fe(t);return 0<i.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function ue(t,e){if(void 0!==t.classList)for(var i=p(e),n=0,a=i.length;n<a;n++)t.classList.add(i[n]);else if(!ce(t,e)){var s=fe(t);pe(t,(s?s+" ":"")+e)}}function de(t,e){void 0!==t.classList?t.classList.remove(e):pe(t,d((" "+fe(t)+" ").replace(" "+e+" "," ")))}function pe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function fe(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function ge(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function _e(t,e,i){var n=e||new z(0,0);t.style[te]=(gt?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function ve(t,e){t._leaflet_pos=e,yt?_e(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ye(t){return t._leaflet_pos||new z(0,0)}if("onselectstart"in document)Ht=function(){Te(window,"selectstart",Ne)},Ut=function(){Ie(window,"selectstart",Ne)};else{var be=ge(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ht=function(){if(be){var t=document.documentElement.style;$t=t[be],t[be]="none"}},Ut=function(){be&&(document.documentElement.style[be]=$t,$t=void 0)}}function we(){Te(window,"dragstart",Ne)}function Me(){Ie(window,"dragstart",Ne)}function Ce(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(xe(),Kt=(Yt=t).style.outline,t.style.outline="none",Te(window,"keydown",xe))}function xe(){Yt&&(Yt.style.outline=Kt,Kt=Yt=void 0,Ie(window,"keydown",xe))}function ke(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function Se(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Le=(Object.freeze||Object)({TRANSFORM:te,TRANSITION:ee,TRANSITION_END:ie,get:ne,getStyle:ae,create:se,remove:oe,empty:re,toFront:le,toBack:he,hasClass:ce,addClass:ue,removeClass:de,setClass:pe,getClass:fe,setOpacity:me,testProp:ge,setTransform:_e,setPosition:ve,getPosition:ye,disableTextSelection:Ht,enableTextSelection:Ut,disableImageDrag:we,enableImageDrag:Me,preventOutline:Ce,restoreOutline:xe,getSizedParentNode:ke,getScale:Se});function Te(t,e,i,n){if("object"==typeof e)for(var a in e)Pe(t,a,e[a],i);else for(var s=0,o=(e=p(e)).length;s<o;s++)Pe(t,e[s],i,n);return this}var Ae="_leaflet_events";function Ie(t,e,i,n){if("object"==typeof e)for(var a in e)Ee(t,a,e[a],i);else if(e)for(var s=0,o=(e=p(e)).length;s<o;s++)Ee(t,e[s],i,n);else{for(var r in t[Ae])Ee(t,r,t[Ae][r]);delete t[Ae]}return this}function Pe(t,e,i,n){var a=e+r(i)+(n?"_"+r(n):"");if(t[Ae]&&t[Ae][a])return this;var o=function(e){return i.call(n||t,e||window.event)},l=o;xt&&0===e.indexOf("touch")?function(t,e,i,n){"touchstart"===e?function(t,e,i){var n=s((function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Bt.indexOf(t.target.tagName)<0))return;Ne(t)}Gt(t,e)}));t["_leaflet_touchstart"+i]=n,t.addEventListener(Dt,n,!1),jt||(document.documentElement.addEventListener(Dt,Zt,!0),document.documentElement.addEventListener(Ot,Vt,!0),document.documentElement.addEventListener(Nt,qt,!0),document.documentElement.addEventListener(Rt,qt,!0),jt=!0)}(t,i,n):"touchmove"===e?function(t,e,i){var n=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Gt(t,e)};t["_leaflet_touchmove"+i]=n,t.addEventListener(Ot,n,!1)}(t,i,n):"touchend"===e&&function(t,e,i){var n=function(t){Gt(t,e)};t["_leaflet_touchend"+i]=n,t.addEventListener(Nt,n,!1),t.addEventListener(Rt,n,!1)}(t,i,n)}(t,e,o,a):!kt||"dblclick"!==e||xt&&ct?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",o,!1):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,Ge(t,e)&&l(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1)):("click"===e&&st&&(o=function(t){!function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=We&&i-We;if(n&&100<n&&n<500||t.target._simulatedClick&&!t._simulated)return Re(t);We=i,e(t)}(t,l)}),t.addEventListener(e,o,!1)):"attachEvent"in t&&t.attachEvent("on"+e,o):function(t,e,i){var n,a,s=!1;function o(t){var e;if(xt){if(!nt||"mouse"===t.pointerType)return;e=Wt}else e=t.touches.length;if(!(1<e)){var i=Date.now(),o=i-(n||i);a=t.touches?t.touches[0]:t,s=0<o&&o<=250,n=i}}function r(t){if(s&&!a.cancelBubble){if(xt){if(!nt||"mouse"===t.pointerType)return;var i,o,r={};for(o in a)r[o]=(i=a[o])&&i.bind?i.bind(a):i;a=r}a.type="dblclick",a.button=0,e(a),n=null}}t[Jt+Qt+i]=o,t[Jt+Xt+i]=r,t[Jt+"dblclick"+i]=e,t.addEventListener(Qt,o,!1),t.addEventListener(Xt,r,!1),t.addEventListener("dblclick",e,!1)}(t,o,a),t[Ae]=t[Ae]||{},t[Ae][a]=o}function Ee(t,e,i,n){var a=e+r(i)+(n?"_"+r(n):""),s=t[Ae]&&t[Ae][a];if(!s)return this;xt&&0===e.indexOf("touch")?function(t,e,i){var n=t["_leaflet_"+e+i];"touchstart"===e?t.removeEventListener(Dt,n,!1):"touchmove"===e?t.removeEventListener(Ot,n,!1):"touchend"===e&&(t.removeEventListener(Nt,n,!1),t.removeEventListener(Rt,n,!1))}(t,e,a):!kt||"dblclick"!==e||xt&&ct?"removeEventListener"in t?t.removeEventListener("mousewheel"===e?"onwheel"in t?"wheel":"mousewheel":"mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s):function(t,e){var i=t[Jt+Xt+e],n=t[Jt+"dblclick"+e];t.removeEventListener(Qt,t[Jt+Qt+e],!1),t.removeEventListener(Xt,i,!1),nt||t.removeEventListener("dblclick",n,!1)}(t,a),t[Ae][a]=null}function ze(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,qe(t),this}function De(t){return Pe(t,"mousewheel",ze),this}function Oe(t){return Te(t,"mousedown touchstart dblclick",ze),Pe(t,"click",Ve),this}function Ne(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Re(t){return Ne(t),ze(t),this}function Be(t,e){if(!e)return new z(t.clientX,t.clientY);var i=Se(e),n=i.boundingClientRect;return new z((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Fe=mt&&ct?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function je(t){return nt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Fe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var We,Ze={};function Ve(t){Ze[t.type]=!0}function qe(t){var e=Ze[t.type];return Ze[t.type]=!1,e}function Ge(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var He=(Object.freeze||Object)({on:Te,off:Ie,stopPropagation:ze,disableScrollPropagation:De,disableClickPropagation:Oe,preventDefault:Ne,stop:Re,getMousePosition:Be,getWheelDelta:je,fakeStop:Ve,skipped:qe,isExternalTarget:Ge,addListener:Te,removeListener:Ie}),Ue=E.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ye(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),ve(this._el,i),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),$e=E.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(W(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ee&&yt&&!St&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Te(this._proxy,ie,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(W(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t=t||(yt?this.options.zoomDelta:1)),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t=t||(yt?this.options.zoomDelta:1)),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),a=this.getSize().divideBy(2),s=(t instanceof z?t:this.latLngToContainerPoint(t)).subtract(a).multiplyBy(1-1/n),o=this.containerPointToLatLng(a.add(s));return this.setView(o,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():F(t);var i=O(e.paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),a=this.getBoundsZoom(t,!1,i.add(n));if((a="number"==typeof e.maxZoom?Math.min(e.maxZoom,a):a)===1/0)return{center:t.getCenter(),zoom:a};var s=n.subtract(i).divideBy(2),o=this.project(t.getSouthWest(),a),r=this.project(t.getNorthEast(),a);return{center:this.unproject(o.add(r).divideBy(2).add(s),a),zoom:a}},fitBounds:function(t,e){if(!(t=F(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=O(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ue,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ue(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!yt)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),a=this.project(t),s=this.getSize(),o=this._zoom;t=W(t),e=void 0===e?o:e;var r=Math.max(s.x,s.y),l=r*this.getZoomScale(o,e),h=a.distanceTo(n)||1,c=1.42,u=c*c;function d(t){var e=(l*l-r*r+(t?-1:1)*u*u*h*h)/(2*(t?l:r)*u*h),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=d(0),g=Date.now(),_=(d(1)-m)/c,v=i.duration?1e3*i.duration:1e3*_*.8;return this._moveStart(!0,i.noMoveStart),(function i(){var s=(Date.now()-g)/v,l=function(t){return 1-Math.pow(1-t,1.5)}(s)*_;s<=1?(this._flyToFrame=S(i,this),this._move(this.unproject(n.add(a.subtract(n).multiplyBy(function(t){return r*(f(m)*function(t){return p(t)/f(t)}(m+c*t)-p(m))/u}(l)/h)),o),this.getScaleZoom(r/function(t){return r*(f(m)/f(m+c*t))}(l),o),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}).call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=F(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,F(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=O((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),a=this.getCenter(),s=this.project(a),o=this.project(t),r=this.getPixelBounds(),l=r.getSize().divideBy(2),h=R([r.min.add(i),r.max.subtract(n)]);if(!h.contains(o)){this._enforcingBounds=!0;var c=s.subtract(o),u=O(o.x+c.x,o.y+c.y);(o.x<h.min.x||o.x>h.max.x)&&(u.x=s.x-c.x,0<c.x?u.x+=l.x-i.x:u.x-=l.x-n.x),(o.y<h.min.y||o.y>h.max.y)&&(u.y=s.y-c.y,0<c.y?u.y+=l.y-i.y:u.y-=l.y-n.y),this.panTo(this.unproject(u),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),a=e.divideBy(2).round(),o=n.divideBy(2).round(),r=a.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s(this._handleGeolocationResponse,this),n=s(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new j(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var a=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(a,n.maxZoom):a)}var s={latlng:e,bounds:i,timestamp:t.timestamp};for(var o in t.coords)"number"==typeof t.coords[o]&&(s[o]=t.coords[o]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)oe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=se("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new B(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=F(t),i=O(i||[0,0]);var n=this.getZoom()||0,a=this.getMinZoom(),s=this.getMaxZoom(),o=t.getNorthWest(),r=t.getSouthEast(),l=this.getSize().subtract(i),h=R(this.project(r,n),this.project(o,n)).getSize(),c=yt?this.options.zoomSnap:1,u=l.x/h.x,d=l.y/h.y,p=e?Math.max(u,d):Math.min(u,d);return n=this.getScaleZoom(p,n),c&&(n=Math.round(n/(c/100))*(c/100),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(a,Math.min(s,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new N(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs,n=i.zoom(t*i.scale(e=void 0===e?this._zoom:e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(W(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(O(t),e)},layerPointToLatLng:function(t){var e=O(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(W(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(W(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(F(t))},distance:function(t,e){return this.options.crs.distance(W(t),W(e))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(O(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(W(t)))},mouseEventToContainerPoint:function(t){return Be(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ne(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Te(e,"scroll",this._onScroll,this),this._containerId=r(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&yt,ue(t,"leaflet-container"+(kt?" leaflet-touch":"")+(Tt?" leaflet-retina":"")+(it?" leaflet-oldie":"")+(dt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ae(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ve(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ue(t.markerPane,"leaflet-zoom-hide"),ue(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ve(this._mapPane,new z(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ve(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Ie:Te;e((this._targets[r(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),yt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=S((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],a="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,o=!1;s;){if((i=this._targets[r(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){o=!0;break}if(i&&i.listens(e,!0)){if(a&&!Ge(s,t))break;if(n.push(i),a)break}if(s===this._container)break;s=s.parentNode}return n.length||o||a||!Ge(s,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!qe(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Ce(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var a=i({},t);a.type="preclick",this._fireDOMEvent(a,a.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var s=n[0];"contextmenu"===e&&s.listens(e,!0)&&Ne(t);var o={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var r=s.getLatLng&&(!s._radius||s._radius<=10);o.containerPoint=r?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=r?s.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var l=0;l<n.length;l++)if(n[l].fire(e,o,!0),o.originalEvent._stopped||!1===n[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ye(this._mapPane)||new z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return R([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),a=this.getSize().divideBy(2),s=new N(n.subtract(a),n.add(a)),o=this._getBoundsOffset(s,i,e);return o.round().equals([0,0])?t:this.unproject(n.add(o),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new N(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=R(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),a=n.min.subtract(t.min),s=n.max.subtract(t.max);return new z(this._rebound(a.x,-s.x),this._rebound(a.y,-s.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=yt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=se("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=te,i=this._proxy.style[e];_e(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",(function(){var t=this.getCenter(),e=this.getZoom();_e(this._proxy,this.project(t,e),this.getZoomScale(e,1))}),this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){oe(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),a=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(a)||(S((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),S((function(){this._moveEnd(!0)}),this))}});function Ye(t){return new Ke(t)}var Ke=I.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return ue(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}});$e.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=se("div",e+"control-container",this._container);function n(n,a){t[n+a]=se("div",e+n+" "+e+a,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)oe(this._controlCorners[t]);oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Qe=Ke.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in f(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ke.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(r(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):de(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=se("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Oe(e),De(e);var n=this._section=se("section",t+"-list");i&&(this._map.on("click",this.collapse,this),st||Te(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var a=this._layersLink=se("a",t+"-toggle",e);a.href="#",a.title="Layers",kt?(Te(a,"click",Re),Te(a,"click",this.expand,this)):Te(a,"focus",this.expand,this),i||this.expand(),this._baseLayersList=se("div",t+"-base",n),this._separator=se("div",t+"-separator",n),this._overlaysList=se("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&r(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(s((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;re(this._baseLayersList),re(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,a=0;for(i=0;i<this._layers.length;i++)this._addItem(n=this._layers[i]),e=e||n.overlay,t=t||!n.overlay,a+=n.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(t=t&&1<a)?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(r(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+r(this),n),this._layerControlInputs.push(e),e.layerId=r(t.layer),Te(e,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+t.name;var s=document.createElement("div");return i.appendChild(s),s.appendChild(e),s.appendChild(a),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],a=[];this._handlingClick=!0;for(var s=i.length-1;0<=s;s--)e=this._getLayer((t=i[s]).layerId).layer,t.checked?n.push(e):t.checked||a.push(e);for(s=0;s<a.length;s++)this._map.hasLayer(a[s])&&this._map.removeLayer(a[s]);for(s=0;s<n.length;s++)this._map.hasLayer(n[s])||this._map.addLayer(n[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),a=i.length-1;0<=a;a--)e=this._getLayer((t=i[a]).layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Xe=Ke.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=se("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,a){var s=se("a",i,n);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),Oe(s),Te(s,"click",Re),Te(s,"click",a,this),Te(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMinZoom()||ue(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMaxZoom()||ue(this._zoomInButton,e)}});$e.mergeOptions({zoomControl:!0}),$e.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Xe,this.addControl(this.zoomControl))}));var Je=Ke.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=se("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=se("div",e,i)),t.imperial&&(this._iScale=se("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var e,i,n,a=3.2808399*t;5280<a?(i=this._getRoundNum(e=a/5280),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(a),this._updateScale(this._iScale,n+" ft",n/a))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(10<=i?10:5<=i?5:3<=i?3:2<=i?2:1)}}),ti=Ke.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=se("div","leaflet-control-attribution"),Oe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});$e.mergeOptions({attributionControl:!0}),$e.addInitHook((function(){this.options.attributionControl&&(new ti).addTo(this)})),Ke.Layers=Qe,Ke.Zoom=Xe,Ke.Scale=Je,Ke.Attribution=ti,Ye.layers=function(t,e,i){return new Qe(t,e,i)},Ye.zoom=function(t){return new Xe(t)},Ye.scale=function(t){return new Je(t)},Ye.attribution=function(t){return new ti(t)};var ei=I.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});ei.addTo=function(t,e){return t.addHandler(e,this),this};var ii,ni={Events:P},ai=kt?"touchstart mousedown":"mousedown",si={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},oi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ri=E.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){f(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Te(this._dragStartTarget,ai,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ri._dragging===this&&this.finishDrag(),Ie(this._dragStartTarget,ai,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!ce(this._element,"leaflet-zoom-anim")&&!(ri._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((ri._dragging=this)._preventOutline&&Ce(this._element),we(),Ht(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,i=ke(this._element);this._startPoint=new z(e.clientX,e.clientY),this._parentScale=Se(i),Te(document,oi[t.type],this._onMove,this),Te(document,si[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&1<t.touches.length)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new z(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ne(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ye(this._element).subtract(i),ue(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,T(this._animRequest),this._lastEvent=t,this._animRequest=S(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ve(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),oi)Ie(document,oi[t],this._onMove,this),Ie(document,si[t],this._onUp,this);Me(),Ut(),this._moved&&this._moving&&(T(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ri._dragging=!1}});function li(t,e){if(!e||!t.length)return t.slice();var i=e*e;return function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,function t(e,i,n,a,s){var o,r,l,h=0;for(r=a+1;r<=s-1;r++)h<(l=pi(e[r],e[a],e[s],!0))&&(o=r,h=l);n<h&&(i[o]=1,t(e,i,n,a,o),t(e,i,n,o,s))}(t,n,e,0,i-1);var a,s=[];for(a=0;a<i;a++)n[a]&&s.push(t[a]);return s}(t=function(t,e){for(var i=[t[0]],n=1,a=0,s=t.length;n<s;n++)e<(l=(r=t[a]).x-(o=t[n]).x)*l+(h=r.y-o.y)*h&&(i.push(t[n]),a=n);var o,r,l,h;return a<s-1&&i.push(t[s-1]),i}(t,i),i)}function hi(t,e,i){return Math.sqrt(pi(t,e,i,!0))}function ci(t,e,i,n,a){var s,o,r,l=n?ii:di(t,i),h=di(e,i);for(ii=h;;){if(!(l|h))return[t,e];if(l&h)return!1;r=di(o=ui(t,e,s=l||h,i,a),i),s===l?(t=o,l=r):(e=o,h=r)}}function ui(t,e,i,n,a){var s,o,r=e.x-t.x,l=e.y-t.y,h=n.min,c=n.max;return 8&i?(s=t.x+r*(c.y-t.y)/l,o=c.y):4&i?(s=t.x+r*(h.y-t.y)/l,o=h.y):2&i?(s=c.x,o=t.y+l*(c.x-t.x)/r):1&i&&(s=h.x,o=t.y+l*(h.x-t.x)/r),new z(s,o,a)}function di(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function pi(t,e,i,n){var a,s=e.x,o=e.y,r=i.x-s,l=i.y-o,h=r*r+l*l;return 0<h&&(1<(a=((t.x-s)*r+(t.y-o)*l)/h)?(s=i.x,o=i.y):0<a&&(s+=r*a,o+=l*a)),r=t.x-s,l=t.y-o,n?r*r+l*l:new z(s,o)}function fi(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function mi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fi(t)}var gi=(Object.freeze||Object)({simplify:li,pointToSegmentDistance:hi,closestPointOnSegment:function(t,e,i){return pi(t,e,i)},clipSegment:ci,_getEdgeIntersection:ui,_getBitCode:di,_sqClosestPointOnSegment:pi,isFlat:fi,_flat:mi});function _i(t,e,i){var n,a,s,o,r,l,h,c,u,d=[1,4,2,8];for(a=0,h=t.length;a<h;a++)t[a]._code=di(t[a],e);for(o=0;o<4;o++){for(c=d[o],n=[],a=0,s=(h=t.length)-1;a<h;s=a++)l=t[s],(r=t[a])._code&c?l._code&c||((u=ui(l,r,c,e,i))._code=di(u,e),n.push(u)):(l._code&c&&((u=ui(l,r,c,e,i))._code=di(u,e),n.push(u)),n.push(r));t=n}return t}var vi,yi=(Object.freeze||Object)({clipPolygon:_i}),bi={project:function(t){return new z(t.lng,t.lat)},unproject:function(t){return new j(t.y,t.x)},bounds:new N([-180,-90],[180,90])},wi={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,a=this.R_MINOR/i,s=Math.sqrt(1-a*a),o=s*Math.sin(n),r=Math.tan(Math.PI/4-n/2)/Math.pow((1-o)/(1+o),s/2);return n=-i*Math.log(Math.max(r,1e-10)),new z(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,a=this.R_MINOR/n,s=Math.sqrt(1-a*a),o=Math.exp(-t.y/n),r=Math.PI/2-2*Math.atan(o),l=0,h=.1;l<15&&1e-7<Math.abs(h);l++)e=s*Math.sin(r),e=Math.pow((1-e)/(1+e),s/2),r+=h=Math.PI/2-2*Math.atan(o*e)-r;return new j(r*i,t.x*i/n)}},Mi=(Object.freeze||Object)({LonLat:bi,Mercator:wi,SphericalMercator:H}),Ci=i({},q,{code:"EPSG:3395",projection:wi,transformation:(vi=.5/(Math.PI*wi.R),$(vi,.5,-vi,.5))}),xi=i({},q,{code:"EPSG:4326",projection:bi,transformation:$(1/180,1,-1/180,.5)}),ki=i({},V,{projection:bi,transformation:$(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});V.Earth=q,V.EPSG3395=Ci,V.EPSG3857=K,V.EPSG900913=Q,V.EPSG4326=xi,V.Simple=ki;var Si=E.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[r(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[r(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});$e.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=r(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=r(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&r(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?v(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[r(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=r(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var a=this._zoomBoundLayers[n].options;t=void 0===a.minZoom?t:Math.min(t,a.minZoom),e=void 0===a.maxZoom?e:Math.max(e,a.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Li=Si.extend({initialize:function(t,e){var i,n;if(f(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return r(t)}}),Ti=Li.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Li.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Li.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new B;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Ai=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var a=O(n),s=O("shadow"===e&&i.shadowAnchor||i.iconAnchor||a&&a.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Tt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Ii=Ai.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ii.imagePath||(Ii.imagePath=this._detectIconPath()),(this.options.imagePath||Ii.imagePath)+Ai.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=se("div","leaflet-default-icon-path",document.body),e=ae(t,"background-image")||ae(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Pi=ei.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ri(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ue(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,s=ye(e._icon),o=i.getPixelBounds(),r=i.getPixelOrigin(),l=R(o.min._subtract(r).add(a),o.max._subtract(r).subtract(a));if(!l.contains(s)){var h=O((Math.max(l.max.x,s.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(n);i.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),ve(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=S(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=ye(e._icon),a=e._map.layerPointToLatLng(n);i&&ve(i,n),e._latlng=a,t.latlng=a,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ei=Si.extend({options:{icon:new Ii,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=W(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),ue(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var a=t.icon.createShadow(this._shadow),s=!1;a!==this._shadow&&(this._removeShadow(),s=!0),a&&(ue(a,e),a.alt=""),this._shadow=a,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&oe(this._shadow),this._shadow=null},_setPos:function(t){ve(this._icon,t),this._shadow&&ve(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Pi)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Pi(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),zi=Si.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Di=zi.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=W(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=W(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return zi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new N(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Oi=Di.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=i({},n,{radius:e})),f(this,e),this._latlng=W(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:zi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===q.distance){var a=Math.PI/180,s=this._mRadius/q.R/a,o=i.project([e+s,t]),r=i.project([e-s,t]),l=o.add(r).divideBy(2),h=i.unproject(l).lat,c=Math.acos((Math.cos(s*a)-Math.sin(e*a)*Math.sin(h*a))/(Math.cos(e*a)*Math.cos(h*a)))/a;!isNaN(c)&&0!==c||(c=s/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-i.project([h,t-c]).x,this._radiusY=l.y-o.y}else{var u=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(u).x}this._updateBounds()}}),Ni=zi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,a=null,s=pi,o=0,r=this._parts.length;o<r;o++)for(var l=this._parts[o],h=1,c=l.length;h<c;h++){var u=s(t,e=l[h-1],i=l[h],!0);u<n&&(n=u,a=s(t,e,i))}return a&&(a.distance=Math.sqrt(n)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,a,s,o,r=this._rings[0],l=r.length;if(!l)return null;for(e=t=0;t<l-1;t++)e+=r[t].distanceTo(r[t+1])/2;if(0===e)return this._map.layerPointToLatLng(r[0]);for(n=t=0;t<l-1;t++)if(e<(n+=i=(a=r[t]).distanceTo(s=r[t+1])))return this._map.layerPointToLatLng([s.x-(o=(n-e)/i)*(s.x-a.x),s.y-o*(s.y-a.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=W(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new B,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return fi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=fi(t),n=0,a=t.length;n<a;n++)i?(e[n]=W(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new z(t,t);this._pxBounds=new N([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n,a,s=t.length;if(t[0]instanceof j){for(a=[],n=0;n<s;n++)a[n]=this._map.latLngToLayerPoint(t[n]),i.extend(a[n]);e.push(a)}else for(n=0;n<s;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,a,s,o,r,l=this._parts;for(n=e=0,a=this._rings.length;e<a;e++)for(i=0,s=(r=this._rings[e]).length;i<s-1;i++)(o=ci(r[i],r[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(o[0]),o[1]===r[i+1]&&i!==s-2||(l[n].push(o[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=li(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,a,s,o,r,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(n=0,a=(o=(r=this._parts[i]).length)-1;n<o;a=n++)if((e||0!==n)&&hi(t,r[a],r[n])<=l)return!0;return!1}});Ni._flat=mi;var Ri=Ni.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,a,s,o,r,l=this._rings[0],h=l.length;if(!h)return null;for(s=o=r=0,t=0,e=h-1;t<h;e=t++)o+=((i=l[t]).x+(n=l[e]).x)*(a=i.y*n.x-n.y*i.x),r+=(i.y+n.y)*a,s+=3*a;return this._map.layerPointToLatLng(0===s?l[0]:[o/s,r/s])},_convertLatLngs:function(t){var e=Ni.prototype._convertLatLngs.call(this,t),i=e.length;return 2<=i&&e[0]instanceof j&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Ni.prototype._setLatLngs.call(this,t),fi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new z(e,e);if(t=new N(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,a=0,s=this._rings.length;a<s;a++)(n=_i(this._rings[a],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,a,s,o,r,l,h=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(a=0,r=this._parts.length;a<r;a++)for(s=0,o=(l=(e=this._parts[a]).length)-1;s<l;o=s++)(i=e[s]).y>t.y!=(n=e[o]).y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(h=!h);return h||Ni.prototype._containsPoint.call(this,t,!0)}}),Bi=Ti.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,a=v(t)?t:t.features;if(a){for(e=0,i=a.length;e<i;e++)((n=a[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var o=Fi(t,s);return o?(o.feature=Gi(t),o.defaultOptions=o.options,this.resetStyle(o),s.onEachFeature&&s.onEachFeature(t,o),this.addLayer(o)):this},resetStyle:function(t){return t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Fi(t,e){var i,n,a,s,o="Feature"===t.type?t.geometry:t,r=o?o.coordinates:null,l=[],h=e&&e.pointToLayer,c=e&&e.coordsToLatLng||ji;if(!r&&!o)return null;switch(o.type){case"Point":return i=c(r),h?h(t,i):new Ei(i);case"MultiPoint":for(a=0,s=r.length;a<s;a++)i=c(r[a]),l.push(h?h(t,i):new Ei(i));return new Ti(l);case"LineString":case"MultiLineString":return n=Wi(r,"LineString"===o.type?0:1,c),new Ni(n,e);case"Polygon":case"MultiPolygon":return n=Wi(r,"Polygon"===o.type?1:2,c),new Ri(n,e);case"GeometryCollection":for(a=0,s=o.geometries.length;a<s;a++){var u=Fi({geometry:o.geometries[a],type:"Feature",properties:t.properties},e);u&&l.push(u)}return new Ti(l);default:throw new Error("Invalid GeoJSON object.")}}function ji(t){return new j(t[1],t[0],t[2])}function Wi(t,e,i){for(var n,a=[],s=0,o=t.length;s<o;s++)n=e?Wi(t[s],e-1,i):(i||ji)(t[s]),a.push(n);return a}function Zi(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function Vi(t,e,i,n){for(var a=[],s=0,o=t.length;s<o;s++)a.push(e?Vi(t[s],e-1,i,n):Zi(t[s],n));return!e&&i&&a.push(a[0]),a}function qi(t,e){return t.feature?i({},t.feature,{geometry:e}):Gi(e)}function Gi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Hi={toGeoJSON:function(t){return qi(this,{type:"Point",coordinates:Zi(this.getLatLng(),t)})}};function Ui(t,e){return new Bi(t,e)}Ei.include(Hi),Oi.include(Hi),Di.include(Hi),Ni.include({toGeoJSON:function(t){var e=!fi(this._latlngs);return qi(this,{type:(e?"Multi":"")+"LineString",coordinates:Vi(this._latlngs,e?1:0,!1,t)})}}),Ri.include({toGeoJSON:function(t){var e=!fi(this._latlngs),i=e&&!fi(this._latlngs[0]),n=Vi(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),qi(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Li.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),qi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer((function(e){if(e.toGeoJSON){var a=e.toGeoJSON(t);if(i)n.push(a.geometry);else{var s=Gi(a);"FeatureCollection"===s.type?n.push.apply(n,s.features):n.push(s)}}})),i?qi(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var $i=Ui,Yi=Si.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=F(e),f(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&he(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=F(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:se("img");ue(e,"leaflet-image-layer"),this._zoomAnimated&&ue(e,"leaflet-zoom-animated"),this.options.className&&ue(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=s(this.fire,this,"load"),e.onerror=s(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;_e(this._image,i,e)},_reset:function(){var t=this._image,e=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();ve(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Ki=Yi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:se("video");if(ue(e,"leaflet-image-layer"),this._zoomAnimated&&ue(e,"leaflet-zoom-animated"),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=s(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],a=0;a<i.length;a++)n.push(i[a].src);this._url=0<i.length?n:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var r=se("source");r.src=this._url[o],e.appendChild(r)}}}}),Qi=Yi.extend({_initImage:function(){var t=this._image=this._url;ue(t,"leaflet-image-layer"),this._zoomAnimated&&ue(t,"leaflet-zoom-animated"),t.onselectstart=c,t.onmousemove=c}}),Xi=Si.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&me(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(me(this._container,0),this._removeTimeout=setTimeout(s(oe,void 0,this._container),200)):oe(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=W(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&he(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof Si||(i=e,e=t),e instanceof Ti)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=O(this.options.offset),i=this._getAnchor();this._zoomAnimated?ve(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}}),Ji=Xi.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Xi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zi||this._source.on("preclick",ze))},onRemove:function(t){Xi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zi||this._source.off("preclick",ze))},getEvents:function(){var t=Xi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=se("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=se("div",t+"-content-wrapper",e);if(this._contentNode=se("div",t+"-content",i),Oe(i),De(this._contentNode),Te(i,"contextmenu",ze),this._tipContainer=se("div",t+"-tip-container",e),this._tip=se("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=se("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",Te(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=this.options.maxHeight,a="leaflet-popup-scrolled";n&&n<t.offsetHeight?(e.height=n+"px",ue(t,a)):de(t,a),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();ve(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ae(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,a=new z(this._containerLeft,-i-this._containerBottom);a._add(ye(this._container));var s=t.layerPointToContainerPoint(a),o=O(this.options.autoPanPadding),r=O(this.options.autoPanPaddingTopLeft||o),l=O(this.options.autoPanPaddingBottomRight||o),h=t.getSize(),c=0,u=0;s.x+n+l.x>h.x&&(c=s.x+n-h.x+l.x),s.x-c-r.x<0&&(c=s.x-r.x),s.y+i+l.y>h.y&&(u=s.y+i-h.y+l.y),s.y-u-r.y<0&&(u=s.y-r.y),(c||u)&&t.fire("autopanstart").panBy([c,u])}},_onCloseButtonClick:function(t){this._close(),Re(t)},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});$e.mergeOptions({closePopupOnClick:!0}),$e.include({openPopup:function(t,e,i){return t instanceof Ji||(t=new Ji(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Si.include({bindPopup:function(t,e){return t instanceof Ji?(f(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new Ji(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Re(t),e instanceof zi?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var tn=Xi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Xi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Xi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Xi.prototype.getEvents.call(this);return kt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=se("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),a=e.layerPointToContainerPoint(t),s=this.options.direction,o=i.offsetWidth,r=i.offsetHeight,l=O(this.options.offset),h=this._getAnchor();t="top"===s?t.add(O(-o/2+l.x,-r+l.y+h.y,!0)):"bottom"===s?t.subtract(O(o/2-l.x,-l.y,!0)):"center"===s?t.subtract(O(o/2+l.x,r/2-h.y+l.y,!0)):"right"===s||"auto"===s&&a.x<n.x?(s="right",t.add(O(l.x+h.x,h.y-r/2+l.y,!0))):(s="left",t.subtract(O(o+h.x-l.x,r/2-h.y-l.y,!0))),de(i,"leaflet-tooltip-right"),de(i,"leaflet-tooltip-left"),de(i,"leaflet-tooltip-top"),de(i,"leaflet-tooltip-bottom"),ue(i,"leaflet-tooltip-"+s),ve(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});$e.include({openTooltip:function(t,e,i){return t instanceof tn||(t=new tn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Si.include({bindTooltip:function(t,e){return t instanceof tn?(f(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new tn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),kt&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ue(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){this._tooltip&&this._map&&this.openTooltip(t.layer||t.target,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var en=Ai.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(re(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=O(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Ai.Default=Ii;var nn=Si.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),oe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(he(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof z?t:new z(t,t)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),a=0,s=i.length;a<s;a++)e=i[a].style.zIndex,i[a]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!it){me(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var a=this._tiles[n];if(a.current&&a.loaded){var s=Math.min(1,(t-a.loaded)/200);me(a.el,s),s<1?e=!0:(a.active?i=!0:this._onOpaqueTile(a),a.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(T(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=se("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(oe(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],a=this._map;return n||((n=this._levels[t]={}).el=se("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=a.project(a.unproject(a.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,a.getCenter(),a.getZoom()),this._onCreateLevel(n)),this._level=n}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)oe(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var a=Math.floor(t/2),s=Math.floor(e/2),o=i-1,r=new z(+a,+s);r.z=+o;var l=this._tileCoordsToKey(r),h=this._tiles[l];return h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),n<o&&this._retainParent(a,s,o,n))},_retainChildren:function(t,e,i,n){for(var a=2*t;a<2*t+2;a++)for(var s=2*e;s<2*e+2;s++){var o=new z(a,s);o.z=i+1;var r=this._tileCoordsToKey(o),l=this._tiles[r];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(a,s,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var a=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&a>this.options.maxZoom||void 0!==this.options.minZoom&&a<this.options.minZoom)&&(a=void 0),n&&!(this.options.updateWhenZooming&&a!==this._tileZoom)||(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==a&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),a=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();yt?_e(t.el,a,n):ve(t.el,a)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),a=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*n);return new N(a.subtract(s),a.add(s))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(n),s=a.getCenter(),o=[],r=this.options.keepBuffer,l=new N(a.getBottomLeft().subtract([r,-r]),a.getTopRight().add([r,-r]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var c=this._tiles[h].coords;c.z===this._tileZoom&&l.contains(new z(c.x,c.y))||(this._tiles[h].current=!1)}if(1<Math.abs(i-this._tileZoom))this._setView(t,i);else{for(var u=a.min.y;u<=a.max.y;u++)for(var d=a.min.x;d<=a.max.x;d++){var p=new z(d,u);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:o.push(p)}}if(o.sort((function(t,e){return t.distanceTo(s)-e.distanceTo(s)})),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<o.length;d++)this._addTile(o[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return F(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),a=n.add(i);return[e.unproject(n,t.z),e.unproject(a,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new B(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new z(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(oe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ue(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,it&&this.options.opacity<1&&me(t,this.options.opacity),st&&!ot&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),s(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&S(s(this._tileReady,this,t,null,a)),ve(a,i),this._tiles[n]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(me(i.el,0),T(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(ue(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),it||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new z(this._wrapX?h(t.x,this._wrapX):t.x,this._wrapY?h(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new N(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),an=nn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&Tt&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),st||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Te(i,"load",s(this._tileOnLoad,this,e,i)),Te(i,"error",s(this._tileOnError,this,e,i)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:Tt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return _(this._url,i(e,this.options))},_tileOnLoad:function(t,e){it?setTimeout(s(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom;return this.options.zoomReverse&&(t=this.options.maxZoom-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=b,oe(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return lt||e.el.setAttribute("src",b),nn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==b))return nn.prototype._tileReady.call(this,t,e,i)}});function sn(t,e){return new an(t,e)}var on=an.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var a in e)a in this.options||(n[a]=e[a]);var s=(e=f(this,e)).detectRetina&&Tt?2:1,o=this.getTileSize();n.width=o.x*s,n.height=o.y*s,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code,an.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=R(i.project(e[0]),i.project(e[1])),a=n.min,s=n.max,o=(1.3<=this._wmsVersion&&this._crs===xi?[a.y,a.x,s.y,s.x]:[a.x,a.y,s.x,s.y]).join(","),r=an.prototype.getTileUrl.call(this,t);return r+m(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});an.WMS=on,sn.wms=function(t,e){return new on(t,e)};var rn=Si.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=ye(this._container),a=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),o=this._map.project(t,e).subtract(s),r=a.multiplyBy(-i).add(n).add(a).subtract(o);yt?_e(this._container,r,i):ve(this._container,r)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new N(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ln=rn.extend({getEvents:function(){var t=rn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){rn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Te(t,"mousemove",l(this._onMouseMove,32,this),this),Te(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Te(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,oe(this._container),Ie(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){rn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Tt?2:1;ve(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Tt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){rn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[r(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[r(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),a=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;a.push(e)}t.options._dashArray=a}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,a,s,o=t._parts,r=o.length,l=this._ctx;if(r){for(l.beginPath(),i=0;i<r;i++){for(n=0,a=o[i].length;n<a;n++)l[n?"lineTo":"moveTo"]((s=o[i][n]).x,s.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),a=(Math.max(Math.round(t._radiusY),1)||n)/n;1!=a&&(i.save(),i.scale(1,a)),i.beginPath(),i.arc(e.x,e.y/a,n,0,2*Math.PI,!1),1!=a&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),a=this._drawFirst;a;a=a.next)(e=a.layer).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(Ve(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,a=this._drawFirst;a;a=a.next)(i=a.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(ue(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&((i.prev=n)?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,(this._drawLast.next=e).next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&((n.next=i)?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function hn(t){return At?new ln(t):null}var cn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),un={_initContainer:function(){this._container=se("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(rn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=cn("shape");ue(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=cn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;oe(e),t.removeInteractiveTarget(e),delete this._layers[r(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,a=t._container;a.stroked=!!n.stroke,a.filled=!!n.fill,n.stroke?(e||(e=t._stroke=cn("stroke")),a.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,e.dashStyle=n.dashArray?v(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):"",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(a.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=cn("fill")),a.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(a.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){he(t._container)}},dn=Pt?cn:X,pn=rn.extend({getEvents:function(){var t=rn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=dn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=dn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){oe(this._container),Ie(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){rn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),ve(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=dn("path");t.options.className&&ue(e,t.options.className),t.options.interactive&&ue(e,"leaflet-interactive"),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){oe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[r(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,J(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",a=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,a)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){he(t._path)}});function fn(t){return It||Pt?new pn(t):null}Pt&&pn.include(un),$e.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&hn(t)||fn(t)}});var mn=Ri.extend({initialize:function(t,e){Ri.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=F(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});pn.create=dn,pn.pointsToPath=J,Bi.geometryToLayer=Fi,Bi.coordsToLatLng=ji,Bi.coordsToLatLngs=Wi,Bi.latLngToCoords=Zi,Bi.latLngsToCoords=Vi,Bi.getFeature=qi,Bi.asFeature=Gi,$e.mergeOptions({boxZoom:!0});var gn=ei.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Ht(),we(),this._startPoint=this._map.mouseEventToContainerPoint(t),Te(document,{contextmenu:Re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=se("div","leaflet-zoom-box",this._container),ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new N(this._point,this._startPoint),i=e.getSize();ve(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(oe(this._box),de(this._container,"leaflet-crosshair")),Ut(),Me(),Ie(document,{contextmenu:Re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var e=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});$e.addInitHook("addHandler","boxZoom",gn),$e.mergeOptions({doubleClickZoom:!0});var _n=ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,a=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(a):e.setZoomAround(t.containerPoint,a)}});$e.addInitHook("addHandler","doubleClickZoom",_n),$e.mergeOptions({dragging:!0,inertia:!ot,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vn=ei.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ri(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=F(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,a=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,o=Math.abs(a+i)<Math.abs(s+i)?a:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),s=i.easeLinearity,o=a.multiplyBy(s/((this._lastTime-this._times[0])/1e3)),r=o.distanceTo([0,0]),l=Math.min(i.inertiaMaxSpeed,r),h=o.multiplyBy(l/r),c=l/(i.inertiaDeceleration*s),u=h.multiplyBy(-c/2).round();u.x||u.y?(u=e._limitOffset(u,e.options.maxBounds),S((function(){e.panBy(u,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});$e.addInitHook("addHandler","dragging",vn),$e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yn=ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Te(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ie(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},a=this.keyCodes;for(e=0,i=a.left.length;e<i;e++)n[a.left[e]]=[-1*t,0];for(e=0,i=a.right.length;e<i;e++)n[a.right[e]]=[t,0];for(e=0,i=a.down.length;e<i;e++)n[a.down[e]]=[0,t];for(e=0,i=a.up.length;e<i;e++)n[a.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},a=this.keyCodes;for(e=0,i=a.zoomIn.length;e<i;e++)n[a.zoomIn[e]]=t;for(e=0,i=a.zoomOut.length;e<i;e++)n[a.zoomOut[e]]=-t},_addHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=O(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Re(t)}}});$e.addInitHook("addHandler","keyboard",yn),$e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bn=ei.extend({addHooks:function(){Te(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ie(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=je(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),n),Re(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,a=i?Math.ceil(n/i)*i:n,s=t._limitZoom(e+(0<this._delta?a:-a))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});$e.addInitHook("addHandler","scrollWheelZoom",bn),$e.mergeOptions({tap:!0,tapTolerance:15});var wn=ei.extend({addHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ne(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new z(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&ue(i,"leaflet-active"),this._holdTimeout=setTimeout(s((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Te(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ie(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&de(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new z(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});kt&&!xt&&$e.addInitHook("addHandler","tap",wn),$e.mergeOptions({touchZoom:kt&&!ot,bounceAtZoomLimits:!0});var Mn=ei.extend({addHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend",this._onTouchEnd,this),Ne(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),a=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&1<a)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==a)return}else{var o=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1==a&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var r=s(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=S(r,this,!0),Ne(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Ie(document,"touchmove",this._onTouchMove),Ie(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});$e.addInitHook("addHandler","touchZoom",Mn),$e.BoxZoom=gn,$e.DoubleClickZoom=_n,$e.Drag=vn,$e.Keyboard=yn,$e.ScrollWheelZoom=bn,$e.Tap=wn,$e.TouchZoom=Mn,Object.freeze=e,t.version="1.5.1+build.2e3e0ffb",t.Control=Ke,t.control=Ye,t.Browser=zt,t.Evented=E,t.Mixin=ni,t.Util=A,t.Class=I,t.Handler=ei,t.extend=i,t.bind=s,t.stamp=r,t.setOptions=f,t.DomEvent=He,t.DomUtil=Le,t.PosAnimation=Ue,t.Draggable=ri,t.LineUtil=gi,t.PolyUtil=yi,t.Point=z,t.point=O,t.Bounds=N,t.bounds=R,t.Transformation=U,t.transformation=$,t.Projection=Mi,t.LatLng=j,t.latLng=W,t.LatLngBounds=B,t.latLngBounds=F,t.CRS=V,t.GeoJSON=Bi,t.geoJSON=Ui,t.geoJson=$i,t.Layer=Si,t.LayerGroup=Li,t.layerGroup=function(t,e){return new Li(t,e)},t.FeatureGroup=Ti,t.featureGroup=function(t){return new Ti(t)},t.ImageOverlay=Yi,t.imageOverlay=function(t,e,i){return new Yi(t,e,i)},t.VideoOverlay=Ki,t.videoOverlay=function(t,e,i){return new Ki(t,e,i)},t.SVGOverlay=Qi,t.svgOverlay=function(t,e,i){return new Qi(t,e,i)},t.DivOverlay=Xi,t.Popup=Ji,t.popup=function(t,e){return new Ji(t,e)},t.Tooltip=tn,t.tooltip=function(t,e){return new tn(t,e)},t.Icon=Ai,t.icon=function(t){return new Ai(t)},t.DivIcon=en,t.divIcon=function(t){return new en(t)},t.Marker=Ei,t.marker=function(t,e){return new Ei(t,e)},t.TileLayer=an,t.tileLayer=sn,t.GridLayer=nn,t.gridLayer=function(t){return new nn(t)},t.SVG=pn,t.svg=fn,t.Renderer=rn,t.Canvas=ln,t.canvas=hn,t.Path=zi,t.CircleMarker=Di,t.circleMarker=function(t,e){return new Di(t,e)},t.Circle=Oi,t.circle=function(t,e,i){return new Oi(t,e,i)},t.Polyline=Ni,t.polyline=function(t,e){return new Ni(t,e)},t.Polygon=Ri,t.polygon=function(t,e){return new Ri(t,e)},t.Rectangle=mn,t.rectangle=function(t,e){return new mn(t,e)},t.Map=$e,t.map=function(t,e){return new $e(t,e)};var Cn=window.L;t.noConflict=function(){return window.L=Cn,this},window.L=t})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t.Leaflet=t.Leaflet||{},t.Leaflet.markercluster=t.Leaflet.markercluster||{}))}(this,(function(t){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var i,n=this._featureGroup,a=this._nonPointGroup,s=this.options.chunkedLoading,o=this.options.chunkInterval,r=this.options.chunkProgress,l=t.length,h=0,c=!0;if(this._map){var u=(new Date).getTime(),d=L.bind((function(){for(var p=(new Date).getTime();l>h&&!(s&&0==h%200&&(new Date).getTime()-p>o);h++)if((i=t[h])instanceof L.LayerGroup)c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),l=t.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),e||this.fire("layeradd",{layer:i}),i.__parent&&2===i.__parent.getChildCount())){var f=i.__parent.getAllChildMarkers();n.removeLayer(f[0]===i?f[1]:f[0])}}else a.addLayer(i),e||this.fire("layeradd",{layer:i});r&&r(h,l,(new Date).getTime()-u),h===l?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(d,this.options.chunkDelay)}),this);d()}else for(var p=this._needsClustering;l>h;h++)(i=t[h])instanceof L.LayerGroup?(c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),l=t.length):i.getLatLng?this.hasLayer(i)||p.push(i):a.addLayer(i);return this},removeLayers:function(t){var e,i,n=t.length,a=this._featureGroup,s=this._nonPointGroup,o=!0;if(!this._map){for(e=0;n>e;e++)(i=t[e])instanceof L.LayerGroup?(o&&(t=t.slice(),o=!1),this._extractNonGroupLayers(i,t),n=t.length):(this._arraySplice(this._needsClustering,i),s.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var r=t.slice(),l=n;for(e=0;l>e;e++)(i=r[e])instanceof L.LayerGroup?(this._extractNonGroupLayers(i,r),l=r.length):this._unspiderfyLayer(i)}for(e=0;n>e;e++)(i=t[e])instanceof L.LayerGroup?(o&&(t=t.slice(),o=!1),this._extractNonGroupLayers(i,t),n=t.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),a.hasLayer(i)&&(a.removeLayer(i),i.clusterShow&&i.clusterShow())):(s.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer((function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent}),this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n,a,s=this._needsClustering.slice(),o=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(s),n=s.length-1;n>=0;n--){for(i=!0,a=o.length-1;a>=0;a--)if(o[a].layer===s[n]){i=!1;break}i&&t.call(e,s[n])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer((function(e){t.push(e)})),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer((function(i){L.stamp(i)===t&&(e=i)})),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(e=(i=this._needsRemoving).length-1;e>=0;e--)if(i[e].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){"function"!=typeof e&&(e=function(){});var i=function(){!t._icon&&!t.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",i,this),this.off("animationend",i,this),t._icon?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",i,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),t.__parent.zoomToBounds())},onAdd:function(t){var e,i,n;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;i>e;e++)(n=this._needsRemoving[e]).newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(e=0,i=this._needsRemoving.length;i>e;e++)this._removeLayer((n=this._needsRemoving[e]).layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,n=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());e>=a&&n[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var n=this._gridClusters,a=this._gridUnclustered,s=this._featureGroup,o=this._map,r=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var l,h=t.__parent;for(this._arraySplice(h._markers,t);h&&(h._childCount--,h._boundsNeedUpdate=!0,!(h._zoom<r));)e&&h._childCount<=1?(l=h._markers[0]===t?h._markers[1]:h._markers[0],n[h._zoom].removeObject(h,o.project(h._cLatLng,h._zoom)),a[h._zoom].addObject(l,o.project(l.getLatLng(),h._zoom)),this._arraySplice(h.__parent._childClusters,h),h.__parent._markers.push(l),l.__parent=h.__parent,h._icon&&(s.removeLayer(h),i||s.addLayer(l))):h._iconNeedsUpdate=!0,h=h.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+(i+=10>e?"small":100>e?"medium":"large"),iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.showCoverageOnHover;(this.options.spiderfyOnMaxZoom||this.options.zoomToBoundsOnClick)&&this.on("clusterclick",this._zoomOrSpiderfy,this),e&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,i=e;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.showCoverageOnHover,e=this._map;(this.options.spiderfyOnMaxZoom||this.options.zoomToBoundsOnClick)&&this.off("clusterclick",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),e.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;"function"!=typeof i&&(n=function(){return i}),null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var a=t;a>=e;a--)this._gridClusters[a]=new L.DistanceGrid(n(a)),this._gridUnclustered[a]=new L.DistanceGrid(n(a));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i,n,a=this._gridClusters,s=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=o;e--){i=this._map.project(t.getLatLng(),e);var r=a[e].getNearObject(i);if(r)return r._addChild(t),void(t.__parent=r);if(r=s[e].getNearObject(i)){var l=r.__parent;l&&this._removeLayer(r,!1);var h=new this._markerCluster(this,e,r,t);a[e].addObject(h,this._map.project(h._cLatLng,e)),r.__parent=h,t.__parent=h;var c=h;for(n=e-1;n>l._zoom;n--)c=new this._markerCluster(this,n,c),a[n].addObject(c,this._map.project(r.getLatLng(),n));return l._addChild(c),void this._removeFromGridUnclustered(r,e)}s[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer((function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()}))},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i,n=t.getLayers(),a=0;for(e=e||[];a<n.length;a++)(i=n[a])instanceof L.LayerGroup?this._extractNonGroupLayers(i,e):e.push(i);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i,n=this._getExpandedVisibleBounds(),a=this._featureGroup,s=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(n,t,s,(function(s){var o,r=s._latlng,l=s._markers;for(n.contains(r)||(r=null),s._isSingleParent()&&t+1===e?(a.removeLayer(s),s._recursivelyAddChildrenToMap(null,e,n)):(s.clusterHide(),s._recursivelyAddChildrenToMap(r,e,n)),i=l.length-1;i>=0;i--)n.contains((o=l[i])._latlng)||a.removeLayer(o)})),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,e),a.eachLayer((function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()})),this._topClusterLevel._recursively(n,t,e,(function(t){t._recursivelyRestoreChildPositions(e)})),this._ignoreMove=!1,this._enqueue((function(){this._topClusterLevel._recursively(n,t,s,(function(t){a.removeLayer(t),t.clusterShow()})),this._animationEnd()}))},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue((function(){n.removeLayer(t),t.clusterShow(),i._animationEnd()}))):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds(),a=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(n,a,e+1,i);var s=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue((function(){if(1===t._childCount){var o=t._markers[0];this._ignoreMove=!0,o.setLatLng(o.getLatLng()),this._ignoreMove=!1,o.clusterShow&&o.clusterShow()}else t._recursively(n,i,a,(function(t){t._recursivelyRemoveChildrenFromMap(n,a,e+1)}));s._animationEnd()}))},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(t);for(var n=this._markers.length-1;n>=0;n--)e&&this._markers[n].__dragStart||t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e,i=this._childClusters.slice(),n=this._group._map,a=n.getBoundsZoom(this._bounds),s=this._zoom+1,o=n.getZoom();i.length>0&&a>s;){s++;var r=[];for(e=0;e<i.length;e++)r=r.concat(i[e]._childClusters);i=r}a>s?this._group._map.setView(this._latlng,s):o>=a?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,i,n,a=this._markers,s=this._childClusters,o=0,r=0,l=this._childCount;if(0!==l){for(this._resetBounds(),t=0;t<a.length;t++)this._bounds.extend(i=a[t]._latlng),o+=i.lat,r+=i.lng;for(t=0;t<s.length;t++)(e=s[t])._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),o+=(i=e._wLatLng).lat*(n=e._childCount),r+=i.lng*n;this._latlng=this._wLatLng=new L.LatLng(o/l,r/l),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,this._group._map.getMinZoom(),i-1,(function(t){var i,n,a=t._markers;for(i=a.length-1;i>=0;i--)(n=a[i])._icon&&(n._setPos(e),n.clusterHide())}),(function(t){var i,n,a=t._childClusters;for(i=a.length-1;i>=0;i--)(n=a[i])._icon&&(n._setPos(e),n.clusterHide())}))},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i,n){this._recursively(t,n,e,(function(a){a._recursivelyAnimateChildrenIn(t,a._group._map.latLngToLayerPoint(a.getLatLng()).round(),i),a._isSingleParent()&&i-1===n?(a.clusterShow(),a._recursivelyRemoveChildrenFromMap(t,e,i)):a.clusterHide(),a._addToMap()}))},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,(function(t){t.clusterShow()}))},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,this._group._map.getMinZoom()-1,e,(function(n){if(e!==n._zoom)for(var a=n._markers.length-1;a>=0;a--){var s=n._markers[a];i.contains(s._latlng)&&(t&&(s._backupLatlng=s.getLatLng(),s.setLatLng(t),s.clusterHide&&s.clusterHide()),n._group._featureGroup.addLayer(s))}}),(function(e){e._addToMap(t)}))},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var a,s;this._recursively(t,e-1,i-1,(function(t){for(s=t._markers.length-1;s>=0;s--)a=t._markers[s],n&&n.contains(a._latlng)||(t._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())}),(function(t){for(s=t._childClusters.length-1;s>=0;s--)a=t._childClusters[s],n&&n.contains(a._latlng)||(t._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())}))},_recursively:function(t,e,i,n,a){var s,o,r=this._childClusters,l=this._zoom;if(l>=e&&(n&&n(this),a&&l===i&&a(this)),e>l||i>l)for(s=r.length-1;s>=0;s--)(o=r[s])._boundsNeedUpdate&&o._recalculateBounds(),t.intersects(o._bounds)&&o._recursively(t,e,i,n,a)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),a=this._grid,s=a[n]=a[n]||{},o=s[i]=s[i]||[],r=L.Util.stamp(t);this._objectPoint[r]=e,o.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,a=this._getCoord(e.x),s=this._getCoord(e.y),o=this._grid,r=o[s]=o[s]||{},l=r[a]=r[a]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=l.length;n>i;i++)if(l[i]===t)return l.splice(i,1),1===n&&delete r[a],!0},eachObject:function(t,e){var i,n,a,s,o,r,l=this._grid;for(i in l)for(n in o=l[i])for(a=0,s=(r=o[n]).length;s>a;a++)t.call(e,r[a])&&(a--,s--)},getNearObject:function(t){var e,i,n,a,s,o,r,l,h=this._getCoord(t.x),c=this._getCoord(t.y),u=this._objectPoint,d=this._sqCellSize,p=null;for(e=c-1;c+1>=e;e++)if(a=this._grid[e])for(i=h-1;h+1>=i;i++)if(s=a[i])for(n=0,o=s.length;o>n;n++)r=s[n],(d>(l=this._sqDist(u[L.Util.stamp(r)],t))||d>=l&&null===p)&&(d=l,p=r);return p},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},L.QuickHull={getDistant:function(t,e){return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+(e[1].lat-e[0].lat)*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,n,a,s=0,o=null,r=[];for(i=e.length-1;i>=0;i--)(a=this.getDistant(n=e[i],t))>0&&(r.push(n),a>s&&(s=a,o=n));return{maxPoint:o,newPoints:r}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?i=(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints))).concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints)):[t[0]]},getConvexHull:function(t){var e,i=!1,n=!1,a=!1,s=!1,o=null,r=null,l=null,h=null,c=null,u=null;for(e=t.length-1;e>=0;e--){var d=t[e];(!1===i||d.lat>i)&&(o=d,i=d.lat),(!1===n||d.lat<n)&&(r=d,n=d.lat),(!1===a||d.lng>a)&&(l=d,a=d.lng),(!1===s||d.lng<s)&&(h=d,s=d.lng)}return n!==i?(u=r,c=o):(u=h,c=l),[].concat(this.buildConvexHull([u,c],t),this.buildConvexHull([c,u],t))}},L.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),n=[];for(e=i.length-1;e>=0;e--)t=i[e].getLatLng(),n.push(t);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(null,!0),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,i):(i.y+=10,t=this._generatePointsCircle(e.length,i)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,s=this._2PI/t,o=[];for(a=Math.max(a,35),o.length=t,i=0;t>i;i++)n=this._circleStartAngle+i*s,o[i]=new L.Point(e.x+a*Math.cos(n),e.y+a*Math.sin(n))._round();return o},_generatePointsSpiral:function(t,e){var i,n=this._group.options.spiderfyDistanceMultiplier,a=n*this._spiralLengthStart,s=n*this._spiralFootSeparation,o=n*this._spiralLengthFactor*this._2PI,r=0,l=[];for(l.length=t,i=t;i>=0;i--)t>i&&(l[i]=new L.Point(e.x+a*Math.cos(r),e.y+a*Math.sin(r))._round()),a+=o/(r+=s/a+5e-4*i);return l},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,a=i._featureGroup,s=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),e=s.length-1;e>=0;e--)a.removeLayer(t=s[e]),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:s}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i,n,a,s,o=this._group,r=o._map,l=o._featureGroup,h=this._group.options.spiderLegPolylineOptions;for(o._ignoreMove=!0,i=0;i<t.length;i++)s=r.layerPointToLatLng(e[i]),n=t[i],a=new L.Polyline([this._latlng,s],h),r.addLayer(a),n._spiderLeg=a,n._preSpiderfyLatlng=n._latlng,n.setLatLng(s),n.setZIndexOffset&&n.setZIndexOffset(1e6),l.addLayer(n);this.setOpacity(.3),o._ignoreMove=!1,o.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,n,a,s,o,r,l=this,h=this._group,c=h._map,u=h._featureGroup,d=this._latlng,p=c.latLngToLayerPoint(d),f=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),g=m.opacity;for(void 0===g&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),f?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=g,h._ignoreMove=!0,i=0;i<t.length;i++)n=t[i],r=c.layerPointToLatLng(e[i]),a=new L.Polyline([d,r],m),c.addLayer(a),n._spiderLeg=a,f&&(o=(s=a._path).getTotalLength()+.1,s.style.strokeDasharray=o,s.style.strokeDashoffset=o),n.setZIndexOffset&&n.setZIndexOffset(1e6),n.clusterHide&&n.clusterHide(),u.addLayer(n),n._setPos&&n._setPos(p);for(h._forceLayout(),h._animationStart(),i=t.length-1;i>=0;i--)r=c.layerPointToLatLng(e[i]),(n=t[i])._preSpiderfyLatlng=n._latlng,n.setLatLng(r),n.clusterShow&&n.clusterShow(),f&&((s=(a=n._spiderLeg)._path).style.strokeDashoffset=0,a.setStyle({opacity:g}));this.setOpacity(.3),h._ignoreMove=!1,setTimeout((function(){h._animationEnd(),h.fire("spiderfied",{cluster:l,markers:t})}),200)},_animationUnspiderfy:function(t){var e,i,n,a,s,o,r=this,l=this._group,h=l._map,c=l._featureGroup,u=t?h._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):h.latLngToLayerPoint(this._latlng),d=this.getAllChildMarkers(null,!0),p=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),i=d.length-1;i>=0;i--)(e=d[i])._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,o=!0,e._setPos&&(e._setPos(u),o=!1),e.clusterHide&&(e.clusterHide(),o=!1),o&&c.removeLayer(e),p&&(s=(a=(n=e._spiderLeg)._path).getTotalLength()+.1,a.style.strokeDashoffset=s,n.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout((function(){var t=0;for(i=d.length-1;i>=0;i--)(e=d[i])._spiderLeg&&t++;for(i=d.length-1;i>=0;i--)(e=d[i])._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),t>1&&c.removeLayer(e),h.removeLayer(e._spiderLeg),delete e._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:r,markers:d})}),200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)this.hasLayer(i=t[e])&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.proj4=e()}(this,(function(){"use strict";function t(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),a=e.toLowerCase().replace(Y,""),s=-1;++s<n.length;)if((i=n[s]).toLowerCase().replace(Y,"")===a)return t[i]}function e(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Q}function i(t){return new e(t).output()}function n(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=i.reduce((function(t,e){return a(e,t),t}),e?{}:t);e&&(t[e]=n)}function a(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void a(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){var s;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&a(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&a(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void n(e,i,t);default:for(s=-1;++s<t.length;)if(!Array.isArray(t[s]))return a(t,e[i]);return n(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}function s(t){return t*nt}function o(t){function e(e){return e*(t.to_meter||1)}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var i=t.GEOGCS;"GEOGCS"===t.type&&(i=t),i&&(t.datumCode=i.DATUM?i.DATUM.name.toLowerCase():i.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(t.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=i.DATUM.SPHEROID.a,t.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(t.datum_params=i.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",s],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",s],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",s],["lat0","latitude_of_origin",s],["lat0","standard_parallel_1",s],["lat1","standard_parallel_1",s],["lat2","standard_parallel_2",s],["azimuth","Azimuth"],["alpha","azimuth",s],["srsCode","name"]].forEach((function(e){return function(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=s(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function r(t){var e=this;if(2===arguments.length){var i=arguments[1];r[t]="string"==typeof i?"+"===i.charAt(0)?K(arguments[1]):at(arguments[1]):i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?r.apply(e,t):r(t)}));if("string"==typeof t){if(t in r)return r[t]}else"EPSG"in t?r["EPSG:"+t.EPSG]=t:"ESRI"in t?r["ESRI:"+t.ESRI]=t:"IAU2000"in t?r["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function l(e){var i=t(e,"authority");if(i){var n=t(i,"epsg");return n&&ot.indexOf(n)>-1}}function h(e){var i=t(e,"extension");if(i)return t(i,"proj4")}function c(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in r}(t))return r[t];if(function(t){return st.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=at(t);if(l(e))return r["EPSG:3857"];var i=h(e);return i?K(i):e}return function(t){return"+"===t[0]}(t)?K(t):void 0}function u(t){return t}function d(t,e){var i=mt.length;return t.names?(mt[i]=t,t.names.forEach((function(t){ft[t.toLowerCase()]=i})),this):(console.log(e),!0)}function p(e,i){if(!(this instanceof p))return new p(e);i=i||function(t){if(t)throw t};var n=c(e);if("object"==typeof n){var a=p.projections.get(n.projName);if(a){if(n.datumCode&&"none"!==n.datumCode){var s=t(yt,n.datumCode);s&&(n.datum_params=s.towgs84?s.towgs84.split(","):null,n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o=function(e,i,n,a,s){if(!e){var o=t(_t,a);o||(o=vt),e=o.a,i=o.b,n=o.rf}return n&&!i&&(i=(1-1/n)*e),(0===n||Math.abs(e-i)<W)&&(s=!0,i=e),{a:e,b:i,rf:n,sphere:s}}(n.a,n.b,n.rf,n.ellps,n.sphere),r=function(t,e,i,n){var a=t*t,s=e*e,o=(a-s)/a,r=0;return n?(a=(t*=1-o*(B+o*(F+o*j)))*t,o=0):r=Math.sqrt(o),{es:o,e:r,ep2:(a-s)/s}}(o.a,o.b,0,n.R_A),l=n.datum||function(t,e,i,n,a,s){var o={};return o.datum_type=void 0===t||"none"===t?O:D,e&&(o.datum_params=e.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=E),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=z,o.datum_params[3]*=N,o.datum_params[4]*=N,o.datum_params[5]*=N,o.datum_params[6]=o.datum_params[6]/1e6+1))),o.a=i,o.b=n,o.es=a,o.ep2=s,o}(n.datumCode,n.datum_params,o.a,o.b,r.es,r.ep2);rt(this,n),rt(this,a),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=l,this.init(),i(null,this)}else i(e)}else i(e)}function f(t){return t===E||t===z}function m(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function g(t,e,i){var n;return Array.isArray(i)&&(i=Mt(i)),Ct(i),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===E||t.datum.datum_type===z)&&"WGS84"!==e.datumCode||(e.datum.datum_type===E||e.datum.datum_type===z)&&"WGS84"!==t.datumCode}(t,e)&&(i=g(t,n=new p("WGS84"),i),t=n),"enu"!==t.axis&&(i=wt(t,!1,i)),"longlat"===t.projName?i={x:i.x*Z,y:i.y*Z}:(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter}),i=t.inverse(i)),t.from_greenwich&&(i.x+=t.from_greenwich),i=bt(t.datum,e.datum,i),e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y}),"longlat"===e.projName?i={x:i.x*V,y:i.y*V}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter})),"enu"!==e.axis?wt(e,!0,i):i}function _(t,e,i){var n,a,s;return Array.isArray(i)?(n=g(t,e,i),3===i.length?[n.x,n.y,n.z]:[n.x,n.y]):(a=g(t,e,i),2===(s=Object.keys(i)).length?a:(s.forEach((function(t){"x"!==t&&"y"!==t&&(a[t]=i[t])})),a))}function v(t){return t instanceof p?t:t.oProj?t.oProj:p(t)}function y(t,e,i){t=v(t);var n,a=!1;return void 0===e?(e=t,t=xt,a=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=xt,a=!0),e=v(e),i?_(t,e,i):(n={forward:function(i){return _(t,e,i)},inverse:function(i){return _(e,t,i)}},a&&(n.oProj=e),n)}function b(t,e){return e=e||5,function(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,i){var n=S(i);return function(t,e,i){var n=i-1,a=St.charCodeAt(n),s=Lt.charCodeAt(n),o=a+t-1,r=s+e,l=!1;return o>Et&&(o=o-Et+Tt-1,l=!0),(o===At||a<At&&o>At||(o>At||a<At)&&l)&&o++,(o===It||a<It&&o>It||(o>It||a<It)&&l)&&++o===At&&o++,o>Et&&(o=o-Et+Tt-1),r>Pt?(r=r-Pt+Tt-1,l=!0):l=!1,(r===At||s<At&&r>At||(r>At||s<At)&&l)&&r++,(r===It||s<It&&r>It||(r>It||s<It)&&l)&&++r===At&&r++,r>Pt&&(r=r-Pt+Tt-1),String.fromCharCode(o)+String.fromCharCode(r)}(Math.floor(t/1e5),Math.floor(e/1e5)%20,n)}(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+n.substr(n.length-5,e)}(function(t){var e,i,n,a,s,o,r=t.lat,l=t.lon,h=6378137,c=M(r),u=M(l);o=Math.floor((l+180)/6)+1,180===l&&(o=60),r>=56&&r<64&&l>=3&&l<12&&(o=32),r>=72&&r<84&&(l>=0&&l<9?o=31:l>=9&&l<21?o=33:l>=21&&l<33?o=35:l>=33&&l<42&&(o=37)),s=M(6*(o-1)-180+3),e=h/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),i=Math.tan(c)*Math.tan(c),n=.006739496752268451*Math.cos(c)*Math.cos(c);var d=.9996*e*((a=Math.cos(c)*(u-s))+(1-i+n)*a*a*a/6+(5-18*i+i*i+72*n-.39089081163157013)*a*a*a*a*a/120)+5e5,p=.9996*(h*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3.418046101696858e-9*Math.sin(6*c))+e*Math.tan(c)*(a*a/2+(5-i+9*n+4*n*n)*a*a*a*a/24+(61-58*i+i*i+600*n-2.2240339282485886)*a*a*a*a*a*a/720));return r<0&&(p+=1e7),{northing:Math.round(p),easting:Math.round(d),zoneNumber:o,zoneLetter:k(r)}}({lat:t[1],lon:t[0]}),e)}function w(t){var e=x(L(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function M(t){return t*(Math.PI/180)}function C(t){return t/Math.PI*180}function x(t){var e=t.northing,i=t.easting,n=t.zoneLetter,a=t.zoneNumber;if(a<0||a>60)return null;var s,o,r,l,h,c,u,d,p=6378137,f=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=i-5e5,g=e;n<"N"&&(g-=1e7),c=6*(a-1)-180+3,d=(u=g/.9996/6367449.145945056)+(3*f/2-27*f*f*f/32)*Math.sin(2*u)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*u)+151*f*f*f/96*Math.sin(6*u),s=p/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),o=Math.tan(d)*Math.tan(d),r=.006739496752268451*Math.cos(d)*Math.cos(d),l=.99330562*p/Math.pow(1-.00669438*Math.sin(d)*Math.sin(d),1.5),h=m/(.9996*s);var _=d-s*Math.tan(d)/l*(h*h/2-(5+3*o+10*r-4*r*r-.06065547077041606)*h*h*h*h/24+(61+90*o+298*r+45*o*o-1.6983531815716497-3*r*r)*h*h*h*h*h*h/720);_=C(_);var v,y=(h-(1+2*o+r)*h*h*h/6+(5-2*r+28*o-3*r*r+.05391597401814761+24*o*o)*h*h*h*h*h/120)/Math.cos(d);if(y=c+C(y),t.accuracy){var b=x({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:b.lat,right:b.lon,bottom:_,left:y}}else v={lat:_,lon:y};return v}function k(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function S(t){var e=t%kt;return 0===e&&(e=kt),e}function L(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,a="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;a+=e,s++}var o=parseInt(a,10);if(0===s||s+3>i)throw"MGRSPoint bad conversion from: "+t;var r=t.charAt(s++);if(r<="A"||"B"===r||"Y"===r||r>="Z"||"I"===r||"O"===r)throw"MGRSPoint zone letter "+r+" not handled: "+t;n=t.substring(s,s+=2);for(var l=S(o),h=function(t,e){for(var i=St.charCodeAt(e-1),n=1e5,a=!1;i!==t.charCodeAt(0);){if(++i===At&&i++,i===It&&i++,i>Et){if(a)throw"Bad character: "+t;i=Tt,a=!0}n+=1e5}return n}(n.charAt(0),l),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=Lt.charCodeAt(e-1),n=0,a=!1;i!==t.charCodeAt(0);){if(++i===At&&i++,i===It&&i++,i>Pt){if(a)throw"Bad character: "+t;i=Tt,a=!0}n+=1e5}return n}(n.charAt(1),l);c<T(r);)c+=2e6;var u=i-s;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,p,f,m=u/2,g=0,_=0;return m>0&&(d=1e5/Math.pow(10,m),p=t.substring(s,s+m),g=parseFloat(p)*d,f=t.substring(s+m),_=parseFloat(f)*d),{easting:g+h,northing:_+c,zoneLetter:r,zoneNumber:o,accuracy:d}}function T(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function A(t,e,i){if(!(this instanceof A))return new A(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function I(t,e,i,n){var a;return t<W?(n.value=ke.AREA_0,a=0):(a=Math.atan2(e,i),Math.abs(a)<=q?n.value=ke.AREA_0:a>q&&a<=R+q?(n.value=ke.AREA_1,a-=R):a>R+q||a<=-(R+q)?(n.value=ke.AREA_2,a=a>=0?a-H:a+H):(n.value=ke.AREA_3,a+=R)),a}function P(t,e){var i=t+e;return i<-H?i+=G:i>+H&&(i-=G),i}var E=1,z=2,D=4,O=5,N=484813681109536e-20,R=Math.PI/2,B=.16666666666666666,F=.04722222222222222,j=.022156084656084655,W=1e-10,Z=.017453292519943295,V=57.29577951308232,q=Math.PI/4,G=2*Math.PI,H=3.14159265359,U={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},$={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Y=/[\s_\-\/\(\)]/g,K=function(e){var i,n,a,s={},o=e.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),r={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(t){s.lat0=t*Z},lat_1:function(t){s.lat1=t*Z},lat_2:function(t){s.lat2=t*Z},lat_ts:function(t){s.lat_ts=t*Z},lon_0:function(t){s.long0=t*Z},lon_1:function(t){s.long1=t*Z},lon_2:function(t){s.long2=t*Z},alpha:function(t){s.alpha=parseFloat(t)*Z},lonc:function(t){s.longc=t*Z},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(e){s.units=e;var i=t($,e);i&&(s.to_meter=i.to_meter)},from_greenwich:function(t){s.from_greenwich=t*Z},pm:function(e){var i=t(U,e);s.from_greenwich=(i||parseFloat(e))*Z},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(s.axis=t)}};for(i in o)n=o[i],i in r?"function"==typeof(a=r[i])?a(n):s[a]=n:s[i]=n;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s},Q=1,X=/\s/,J=/[A-Za-z]/,tt=/[A-Za-z84]/,et=/[,\]]/,it=/[\d\.E\-\+]/;e.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;X.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Q:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},e.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(et.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},e.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Q)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Q,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},e.prototype.number=function(t){if(!it.test(t)){if(et.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},e.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},e.prototype.keyword=function(t){if(tt.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=Q)}if(!et.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},e.prototype.neutral=function(t){if(J.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(it.test(t))return this.word=t,void(this.state=3);if(!et.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var nt=.017453292519943295,at=function(t){var e=i(t),n=e.shift(),s=e.shift();e.unshift(["name",s]),e.unshift(["type",n]);var r={};return a(e,r),o(r),r};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(r);var st=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],ot=["3857","900913","3785","102113"],rt=function(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t},lt=function(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)},ht=function(t){return t<0?-1:1},ct=function(t){return Math.abs(t)<=H?t:t-ht(t)*G},ut=function(t,e,i){var n=t*i;return n=Math.pow((1-n)/(1+n),.5*t),Math.tan(.5*(R-e))/n},dt=function(t,e){for(var i,n,a=.5*t,s=R-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(s),s+=n=R-2*Math.atan(e*Math.pow((1-i)/(1+i),a))-s,Math.abs(n)<=1e-10)return s;return-9999},pt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):lt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function(t){var e,i,n=t.x,a=t.y;if(a*V>90&&a*V<-90&&n*V>180&&n*V<-180)return null;if(Math.abs(Math.abs(a)-R)<=W)return null;if(this.sphere)e=this.x0+this.a*this.k0*ct(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(q+.5*a));else{var s=Math.sin(a),o=ut(this.e,a,s);e=this.x0+this.a*this.k0*ct(n-this.long0),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,a=t.y-this.y0;if(this.sphere)i=R-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var s=Math.exp(-a/(this.a*this.k0));if(-9999===(i=dt(this.e,s)))return null}return e=ct(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:u,inverse:u,names:["longlat","identity"]}],ft={},mt=[],gt={start:function(){pt.forEach(d)},add:d,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==ft[e]&&mt[ft[e]]?mt[ft[e]]:void 0}},_t={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},vt=_t.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};_t.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var yt={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};(p.projections=gt).start();var bt=function(t,e,i){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===E?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==z||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)?i:t.datum_type===O||e.datum_type===O?i:t.es!==e.es||t.a!==e.a||f(t.datum_type)||f(e.datum_type)?(i=function(t,e,i){var n,a,s,o=t.x,r=t.y,l=t.z?t.z:0;if(r<-R&&r>-1.001*R)r=-R;else if(r>R&&r<1.001*R)r=R;else{if(r<-R)return{x:-1/0,y:-1/0,z:t.z};if(r>R)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),a=Math.sin(r),s=Math.cos(r),{x:((n=i/Math.sqrt(1-e*(a*a)))+l)*s*Math.cos(o),y:(n+l)*s*Math.sin(o),z:(n*(1-e)+l)*a}}(i,t.es,t.a),f(t.datum_type)&&(i=function(t,e,i){if(e===E)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===z){var n=i[3],a=i[4],s=i[5],o=i[6];return{x:o*(t.x-s*t.y+a*t.z)+i[0],y:o*(s*t.x+t.y-n*t.z)+i[1],z:o*(-a*t.x+n*t.y+t.z)+i[2]}}}(i,t.datum_type,t.datum_params)),f(e.datum_type)&&(i=function(t,e,i){if(e===E)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===z){var n=i[3],a=i[4],s=i[5],o=i[6],r=(t.x-i[0])/o,l=(t.y-i[1])/o,h=(t.z-i[2])/o;return{x:r+s*l-a*h,y:-s*r+l+n*h,z:a*r-n*l+h}}}(i,e.datum_type,e.datum_params)),function(t,e,i,n){var a,s,o,r,l,h,c,u,d,p,f,m,g,_,v,y=t.x,b=t.y,w=t.z?t.z:0;if(a=Math.sqrt(y*y+b*b),s=Math.sqrt(y*y+b*b+w*w),a/i<1e-12){if(_=0,s/i<1e-12)return v=-n,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(b,y);o=w/s,u=(r=a/s)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*r*r)),d=o*l,g=0;do{g++,h=e*(c=i/Math.sqrt(1-e*d*d))/(c+(v=a*u+w*d-c*(1-e*d*d))),m=(f=o*(l=1/Math.sqrt(1-h*(2-h)*r*r)))*u-(p=r*(1-h)*l)*d,u=p,d=f}while(m*m>1e-24&&g<30);return{x:_,y:Math.atan(f/Math.abs(p)),z:v}}(i,e.es,e.a,e.b)):i},wt=function(t,e,i){var n,a,s,o=i.x,r=i.y,l=i.z||0,h={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==i.z)switch(0===s?(n=o,a="x"):1===s?(n=r,a="y"):(n=l,a="z"),t.axis[s]){case"e":h[a]=n;break;case"w":h[a]=-n;break;case"n":h[a]=n;break;case"s":h[a]=-n;break;case"u":void 0!==i[a]&&(h.z=n);break;case"d":void 0!==i[a]&&(h.z=-n);break;default:return null}return h},Mt=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},Ct=function(t){m(t.x),m(t.y)},xt=p("WGS84"),kt=6,St="AJSAJS",Lt="AFAFAF",Tt=65,At=73,It=79,Pt=86,Et=90,zt={forward:b,inverse:function(t){var e=x(L(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:w};A.fromMGRS=function(t){return new A(w(t))},A.prototype.toMGRS=function(t){return b([this.x,this.y],t)};var Dt,Ot=.01068115234375,Nt=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Ot))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*Ot)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),e[3]=(i*=t)*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e},Rt=function(t,e,i,n){return n[0]*t-(i*=e)*(n[1]+(e*=e)*(n[2]+e*(n[3]+e*n[4])))},Bt=function(t,e,i){for(var n=1/(1-e),a=t,s=20;s;--s){var o=Math.sin(a),r=1-e*o*o;if(a-=r=(Rt(a,o,Math.cos(a),i)-t)*(r*Math.sqrt(r))*n,Math.abs(r)<W)return a}return a},Ft={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Nt(this.es),this.ml0=Rt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,a=t.y,s=ct(t.x-this.long0),o=Math.sin(a),r=Math.cos(a);if(this.es){var l=r*s,h=Math.pow(l,2),c=this.ep2*Math.pow(r,2),u=Math.pow(c,2),d=Math.abs(r)>W?Math.tan(a):0,p=Math.pow(d,2),f=Math.pow(p,2);e=1-this.es*Math.pow(o,2),l/=Math.sqrt(e);var m=Rt(a,o,r,this.en);i=this.a*(this.k0*l*(1+h/6*(1-p+c+h/20*(5-18*p+f+14*c-58*p*c+h/42*(61+179*f-f*p-479*p)))))+this.x0,n=this.a*(this.k0*(m-this.ml0+o*s*l/2*(1+h/12*(5-p+9*c+4*u+h/30*(61+f-58*p+270*c-330*p*c+h/56*(1385+543*f-f*p-3111*p))))))+this.y0}else{var g=r*Math.sin(s);if(Math.abs(Math.abs(g)-1)<W)return 93;if(i=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,n=r*Math.cos(s)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(n))>=1){if(g-1>W)return 93;n=0}else n=Math.acos(n);a<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,a,s=1/this.a*(t.x-this.x0),o=1/this.a*(t.y-this.y0);if(this.es)if(i=Bt(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(i)<R){var r=Math.sin(i),l=Math.cos(i),h=Math.abs(l)>W?Math.tan(i):0,c=this.ep2*Math.pow(l,2),u=Math.pow(c,2),d=Math.pow(h,2),p=Math.pow(d,2);e=1-this.es*Math.pow(r,2);var f=s*Math.sqrt(e)/this.k0,m=Math.pow(f,2);n=i-(e*=h)*m/(1-this.es)*.5*(1-m/12*(5+3*d-9*c*d+c-4*u-m/30*(61+90*d-252*c*d+45*p+46*c-m/56*(1385+3633*d+4095*p+1574*p*d)))),a=ct(this.long0+f*(1-m/6*(1+2*d+c-m/20*(5+28*d+24*p+8*c*d+6*c-m/42*(61+662*d+1320*p+720*p*d))))/l)}else n=R*ht(o),a=0;else{var g=Math.exp(s/this.k0),_=.5*(g-1/g),v=Math.cos(this.lat0+o/this.k0);e=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(_,2))),n=Math.asin(e),o<0&&(n=-n),a=0===_&&0===v?0:ct(Math.atan2(_,v)+this.long0)}return t.x=a,t.y=n,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},jt=function(t){var e=Math.exp(t);return(e-1/e)/2},Wt=function(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))},Zt=function(t,e){for(var i,n=2*Math.cos(2*e),a=t.length-1,s=t[a],o=0;--a>=0;)i=n*s-o+t[a],o=s,s=i;return e+i*Math.sin(2*e)},Vt=function(t,e,i){for(var n,a,s=Math.sin(e),o=Math.cos(e),r=jt(i),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(i),h=2*o*l,c=-2*s*r,u=t.length-1,d=t[u],p=0,f=0,m=0;--u>=0;)n=f,a=p,d=h*(f=d)-n-c*(p=m)+t[u],m=c*f-a+h*p;return[(h=s*l)*d-(c=o*r)*m,h*m+c*d]},qt={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),this.cgb[1]=(i*=e)*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),this.cgb[2]=(i*=e)*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),this.cgb[3]=(i*=e)*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),this.cgb[4]=(i*=e)*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),this.cgb[5]=(i*=e)*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(.25+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),this.utg[2]=(i*=e)*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),this.utg[3]=(i*=e)*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),this.utg[4]=(i*=e)*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),this.utg[5]=-.03233083094085698*(i*=e),this.gtu[5]=.6650675310896665*i;var n=Zt(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var i,n=2*Math.cos(e),a=t.length-1,s=t[a],o=0;--a>=0;)i=n*s-o+t[a],o=s,s=i;return Math.sin(e)*i}(this.gtu,2*n))},forward:function(t){var e=ct(t.x-this.long0),i=t.y;i=Zt(this.cbg,i);var n=Math.sin(i),a=Math.cos(i),s=Math.sin(e),o=Math.cos(e);i=Math.atan2(n,o*a),e=Math.atan2(s*a,Wt(n,a*o)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}(e*(1+e/(Wt(1,e)+1))),t<0?-e:e}(Math.tan(e));var r,l,h=Vt(this.gtu,2*i,2*e);return i+=h[0],e+=h[1],Math.abs(e)<=2.623395162778?(r=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(r=1/0,l=1/0),t.x=r,t.y=l,t},inverse:function(t){var e,i,n=1/this.a*(t.x-this.x0),a=1/this.a*(t.y-this.y0);if(a=(a-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var s=Vt(this.utg,2*a,2*n);a+=s[0],n+=s[1],n=Math.atan(jt(n));var o=Math.sin(a),r=Math.cos(a),l=Math.sin(n),h=Math.cos(n);a=Math.atan2(o*h,Wt(l,h*r)),n=Math.atan2(l,h*r),e=ct(n+this.long0),i=Zt(this.cgb,a)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},Gt={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(ct(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Z,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,qt.init.apply(this),this.forward=qt.forward,this.inverse=qt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Ht=function(t,e){return Math.pow((1-t)/(1+t),e)},Ut={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+q)/(Math.pow(Math.tan(.5*this.lat0+q),this.C)*Ht(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+q),this.C)*Ht(this.e*Math.sin(i),this.ratexp))-R,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+q)/this.K,1/this.C),a=20;a>0&&(i=2*Math.atan(n*Ht(this.e*Math.sin(t.y),-.5*this.e))-R,!(Math.abs(i-t.y)<1e-14));--a)t.y=i;return a?(t.x=e,t.y=i,t):null},names:["gauss"]},$t={init:function(){Ut.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,a;return t.x=ct(t.x-this.long0),Ut.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),t.x=(a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n))*i*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,a,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),i=Math.cos(o),a=Math.asin(i*this.sinc0+t.y*e*this.cosc0/s),n=Math.atan2(t.x*e,s*this.cosc0*i-t.y*this.sinc0*e)}else a=this.phic0,n=0;return t.x=n,t.y=a,Ut.inverse.apply(this,[t]),t.x=ct(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Yt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=W&&(this.k0=.5*(1+ht(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=W&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=W&&(this.k0=.5*this.cons*lt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ut(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=lt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-R,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n,a,s,o,r=t.x,l=t.y,h=Math.sin(l),c=Math.cos(l),u=ct(r-this.long0);return Math.abs(Math.abs(r-this.long0)-Math.PI)<=W&&Math.abs(l+this.lat0)<=W?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*h+this.coslat0*c*Math.cos(u)),t.x=this.a*e*c*Math.sin(u)+this.x0,t.y=this.a*e*(this.coslat0*h-this.sinlat0*c*Math.cos(u))+this.y0,t):(i=2*Math.atan(this.ssfn_(l,h,this.e))-R,a=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=W?(s=ut(this.e,l*this.con,this.con*h),t.x=this.x0+(o=2*this.a*this.k0*s/this.cons)*Math.sin(r-this.long0),t.y=this.y0-this.con*o*Math.cos(r-this.long0),t):(Math.abs(this.sinlat0)<W?(e=2*this.a*this.k0/(1+a*Math.cos(u)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*a*Math.cos(u))),t.y=e*(this.cosX0*n-this.sinX0*a*Math.cos(u))+this.y0),t.x=e*a*Math.sin(u)+this.x0,t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,a,s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,i=this.lat0,s<=W?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/s),e=ct(Math.abs(this.coslat0)<W?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(o),s*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=W){if(s<=W)return i=this.lat0,t.x=e=this.long0,t.y=i,t;t.x*=this.con,t.y*=this.con,i=this.con*dt(this.e,s*this.cons/(2*this.a*this.k0)),e=this.con*ct(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else n=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=W?a=this.X0:(a=Math.asin(Math.cos(n)*this.sinX0+t.y*Math.sin(n)*this.cosX0/s),e=ct(this.long0+Math.atan2(t.x*Math.sin(n),s*this.cosX0*Math.cos(n)-t.y*this.sinX0*Math.sin(n)))),i=-1*dt(this.e,Math.tan(.5*(R+a)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(R+t))*Math.pow((1-e)/(1+e),.5*i)}},Kt={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,a=2*n-Math.pow(n,2),s=this.e=Math.sqrt(a);this.R=this.k0*i*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),r=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*r+this.alpha*s/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=2*(Math.atan(Math.exp(-this.alpha*(e+i)+this.K))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(a))),o=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=(t.x-this.x0)/this.R,i=2*(Math.atan(Math.exp((t.y-this.y0)/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(e)),a=Math.atan(Math.sin(e)/(Math.cos(this.b0)*Math.cos(e)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,o=0,r=n,l=-1e3,h=0;Math.abs(r-l)>1e-7;){if(++h>20)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(r))/2)),l=r,r=2*Math.atan(Math.exp(o))-Math.PI/2}return t.x=s,t.y=r,t},names:["somerc"]},Qt={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),i=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var n,a,s=ut(this.e,this.lat0,t),o=this.bl/e*Math.sqrt((1-this.es)/(1-i*i));if(o*o<1&&(o=1),isNaN(this.longc)){var r=ut(this.e,this.lat1,Math.sin(this.lat1)),l=ut(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(o+Math.sqrt(o*o-1))*Math.pow(s,this.bl):(o-Math.sqrt(o*o-1))*Math.pow(s,this.bl);var h=Math.pow(r,this.bl),c=Math.pow(l,this.bl);a=.5*((n=this.el/h)-1/n);var u=(this.el*this.el-c*h)/(this.el*this.el+c*h),d=(c-h)/(c+h),p=ct(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(u*Math.tan(.5*this.bl*p)/d)/this.bl,this.long0=ct(this.long0);var f=ct(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*f)/a),this.alpha=Math.asin(o*Math.sin(this.gamma0))}else n=this.lat0>=0?o+Math.sqrt(o*o-1):o-Math.sqrt(o*o-1),this.el=n*Math.pow(s,this.bl),a=.5*(n-1/n),this.gamma0=Math.asin(Math.sin(this.alpha)/o),this.long0=this.longc-Math.asin(a*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha))},forward:function(t){var e,i,n,a=t.y,s=ct(t.x-this.long0);if(Math.abs(Math.abs(a)-R)<=W)n=a>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(q+n*this.gamma0*.5)),e=-1*n*R*this.al/this.bl;else{var o=ut(this.e,a,Math.sin(a)),r=this.el/Math.pow(o,this.bl),l=.5*(r-1/r),h=.5*(r+1/r),c=Math.sin(this.bl*s),u=(l*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/h;i=Math.abs(Math.abs(u)-1)<=W?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-u)/(1+u))/this.bl,e=Math.abs(Math.cos(this.bl*s))<=W?this.al*this.bl*s:this.al*Math.atan2(l*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*s))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+i):(e-=this.uc,t.x=this.x0+i*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-i*Math.sin(this.alpha)),t},inverse:function(t){var e,i;this.no_rot?(i=t.y-this.y0,e=t.x-this.x0):(i=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var n=Math.exp(-1*this.bl*i/this.al),a=.5*(n-1/n),s=.5*(n+1/n),o=Math.sin(this.bl*e/this.al),r=(o*Math.cos(this.gamma0)+a*Math.sin(this.gamma0))/s,l=Math.pow(this.el/Math.sqrt((1+r)/(1-r)),1/this.bl);return Math.abs(r-1)<W?(t.x=this.long0,t.y=R):Math.abs(r+1)<W?(t.x=this.long0,t.y=-1*R):(t.y=dt(this.e,l),t.x=ct(this.long0-Math.atan2(a*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},Xt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<W)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=lt(this.e,e,i),a=ut(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),r=lt(this.e,s,o),l=ut(this.e,this.lat2,s),h=ut(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>W?Math.log(n/r)/Math.log(a/l):e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=W&&(i=ht(i)*(R-2*W));var n,a,s=Math.abs(Math.abs(i)-R);if(s>W)n=ut(this.e,i,Math.sin(i)),a=this.a*this.f0*Math.pow(n,this.ns);else{if((s=i*this.ns)<=0)return null;a=0}var o=this.ns*ct(e-this.long0);return t.x=this.k0*(a*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-a*Math.cos(o))+this.y0,t},inverse:function(t){var e,i,n,a,s,o=(t.x-this.x0)/this.k0,r=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+r*r),i=1):(e=-Math.sqrt(o*o+r*r),i=-1);var l=0;if(0!==e&&(l=Math.atan2(i*o,i*r)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(a=dt(this.e,n)))return null}else a=-R;return s=ct(l/this.ns+this.long0),t.x=s,t.y=a,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},Jt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,n,a,s,o,r,l=t.y,h=ct(t.x-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-h*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),s=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(a)),o=this.n*s,r=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n),t.y=r*Math.cos(o)/1,t.x=r*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,a,s,o,r,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(a)),i=Math.asin(Math.cos(n)*Math.sin(a)/Math.cos(e)),t.x=this.long0-i/this.alfa,o=e,r=0;var h=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(r=1),o=t.y,h+=1}while(0===r&&h<15);return h>=15?null:t},names:["Krovak","krovak"]},te=function(t,e,i,n,a){return t*a-e*Math.sin(2*a)+i*Math.sin(4*a)-n*Math.sin(6*a)},ee=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},ie=function(t){return.375*t*(1+.25*t*(1+.46875*t))},ne=function(t){return.05859375*t*t*(1+.75*t)},ae=function(t){return t*t*t*(35/3072)},se=function(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)},oe=function(t){return Math.abs(t)<R?t:t-ht(t)*Math.PI},re=function(t,e,i,n,a){var s,o;s=t/e;for(var r=0;r<15;r++)if(s+=o=(t-(e*s-i*Math.sin(2*s)+n*Math.sin(4*s)-a*Math.sin(6*s)))/(e-2*i*Math.cos(2*s)+4*n*Math.cos(4*s)-6*a*Math.cos(6*s)),Math.abs(o)<=1e-10)return s;return NaN},le={init:function(){this.sphere||(this.e0=ee(this.es),this.e1=ie(this.es),this.e2=ne(this.es),this.e3=ae(this.es),this.ml0=this.a*te(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n=t.x,a=t.y;if(n=ct(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(a)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(a),Math.cos(n))-this.lat0);else{var s=Math.sin(a),o=Math.cos(a),r=se(this.a,this.e,s),l=Math.tan(a)*Math.tan(a),h=n*Math.cos(a),c=h*h,u=this.es*o*o/(1-this.es);e=r*h*(1-c*l*(1/6-(8-l+8*u)*c/120)),i=this.a*te(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+r*s/o*c*(.5+(5-l+6*u)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,a=t.y/this.a;if(this.sphere){var s=a+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(s))}else{var o=re(this.ml0/this.a+a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-R)<=W)return t.x=this.long0,t.y=R,a<0&&(t.y*=-1),t;var r=se(this.a,this.e,Math.sin(o)),l=r*r*r/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(o),2),c=n*this.a/r,u=c*c;e=o-r*Math.tan(o)/l*c*c*(.5-(1+3*h)*c*c/24),i=c*(1-u*(h/3+(1+3*h)*h*u/15))/Math.cos(o)}return t.x=ct(i+this.long0),t.y=oe(e),t},names:["Cassini","Cassini_Soldner","cass"]},he=function(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e},ce={init:function(){var t,e=Math.abs(this.lat0);if(this.mode=Math.abs(e-R)<W?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<W?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=he(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,i=[];return i[0]=.3333333333333333*t,i[0]+=.17222222222222222*(e=t*t),i[1]=.06388888888888888*e,i[0]+=.10257936507936508*(e*=t),i[1]+=.0664021164021164*e,i[2]=.016415012942191543*e,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=he(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,a,s,o,r,l,h,c,u=t.x,d=t.y;if(u=ct(u-this.long0),this.sphere){if(s=Math.sin(d),c=Math.cos(d),n=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*n:1+this.sinph0*s+this.cosph0*c*n)<=W)return null;e=(i=Math.sqrt(2/i))*c*Math.sin(u),i*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.phi0)<W)return null;i=q-.5*d,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(u),i*=n}}else{switch(r=0,l=0,h=0,n=Math.cos(u),a=Math.sin(u),s=Math.sin(d),o=he(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(r=o/this.qp,l=Math.sqrt(1-r*r)),this.mode){case this.OBLIQ:h=1+this.sinb1*r+this.cosb1*l*n;break;case this.EQUIT:h=1+l*n;break;case this.N_POLE:h=R+d,o=this.qp-o;break;case this.S_POLE:h=d-R,o=this.qp+o}if(Math.abs(h)<W)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),i=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*r-this.sinb1*l*n):(h=Math.sqrt(2/(1+l*n)))*r*this.ymf,e=this.xmf*h*l*a;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*a,i=n*(this.mode===this.S_POLE?h:-h)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,a,s,o,r,l=t.x/this.a,h=t.y/this.a;if(this.sphere){var c,u=0,d=0;if((i=.5*(c=Math.sqrt(l*l+h*h)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=W?0:Math.asin(h*d/c),l*=d,h=u*c;break;case this.OBLIQ:i=Math.abs(c)<=W?this.phi0:Math.asin(u*this.sinph0+h*d*this.cosph0/c),l*=d*this.cosph0,h=(u-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:h=-h,i=R-i;break;case this.S_POLE:i-=R}e=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,h):0}else{if(r=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,h*=this.dd,(o=Math.sqrt(l*l+h*h))<W)return t.x=0,t.y=this.phi0,t;a=2*Math.asin(.5*o/this.rq),n=Math.cos(a),l*=a=Math.sin(a),this.mode===this.OBLIQ?(s=this.qp*(r=n*this.sinb1+h*a*this.cosb1/o),h=o*this.cosb1*n-h*this.sinb1*a):(s=this.qp*(r=h*a/o),h=o*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(s=l*l+h*h))return t.x=0,t.y=this.phi0,t;r=1-s/this.qp,this.mode===this.S_POLE&&(r=-r)}e=Math.atan2(l,h),i=function(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}(Math.asin(r),this.apa)}return t.x=ct(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},ue=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},de={init:function(){Math.abs(this.lat1+this.lat2)<W||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=lt(this.e3,this.sin_po,this.cos_po),this.qs1=he(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=lt(this.e3,this.sin_po,this.cos_po),this.qs2=he(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=he(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>W?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=he(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*ct(e-this.long0),o=a*Math.sin(s)+this.x0,r=this.rh-a*Math.cos(s)+this.y0;return t.x=o,t.y=r,t},inverse:function(t){var e,i,n,a,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),n=0,0!==e&&(n=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,s=this.sphere?Math.asin((this.c-i*i)/(2*this.ns0)):this.phi1z(this.e3,(this.c-i*i)/this.ns0),a=ct(n/this.ns0+this.long0),t.x=a,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,a,s,o=ue(.5*e);if(t<W)return o;for(var r=t*t,l=1;l<=25;l++)if(o+=s=.5*(a=1-(n=t*(i=Math.sin(o)))*n)*a/Math.cos(o)*(e/(1-r)-i/a+.5/t*Math.log((1-n)/(1+n))),Math.abs(s)<=1e-7)return o;return null}},pe={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,a,s,o,r,l=t.y;return n=ct(t.x-this.long0),e=Math.sin(l),i=Math.cos(l),a=Math.cos(n),(s=this.sin_p14*e+this.cos_p14*i*a)>0||Math.abs(s)<=W?(o=this.x0+1*this.a*i*Math.sin(n)/s,r=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*a)/s):(o=this.x0+this.infinity_dist*i*Math.sin(n),r=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*a)),t.x=o,t.y=r,t},inverse:function(t){var e,i,n,a,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),i=Math.sin(a),n=Math.cos(a),o=ue(n*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),s=ct(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t},names:["gnom"]},fe={init:function(){this.sphere||(this.k0=lt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.y,a=ct(t.x-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var s=he(this.e,Math.sin(n));e=this.x0+this.a*this.k0*a,i=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=ct(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*R:R;for(var n,a,s,o,r=Math.asin(.5*e),l=0;l<30;l++)if(a=Math.sin(r),s=Math.cos(r),o=t*a,r+=n=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-a/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(n)<=1e-10)return r;return NaN}(this.e,2*t.y*this.k0/this.a),e=ct(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]},me={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.y,i=ct(t.x-this.long0),n=oe(e-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*n,t},inverse:function(t){var e=t.y;return t.x=ct(this.long0+(t.x-this.x0)/(this.a*this.rc)),t.y=oe(this.lat0+(e-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},ge={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ee(this.es),this.e1=ie(this.es),this.e2=ne(this.es),this.e3=ae(this.es),this.ml0=this.a*te(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,a=t.y,s=ct(t.x-this.long0);if(n=s*Math.sin(a),this.sphere)Math.abs(a)<=W?(e=this.a*s,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(a),i=this.a*(oe(a-this.lat0)+(1-Math.cos(n))/Math.tan(a)));else if(Math.abs(a)<=W)e=this.a*s,i=-1*this.ml0;else{var o=se(this.a,this.e,Math.sin(a))/Math.tan(a);e=o*Math.sin(n),i=this.a*te(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+o*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,a,s,o,r,l,h;if(n=t.x-this.x0,a=t.y-this.y0,this.sphere)if(Math.abs(a+this.a*this.lat0)<=W)e=ct(n/this.a+this.long0),i=0;else{var c;for(r=n*n/this.a/this.a+(o=this.lat0+a/this.a)*o,l=o,s=20;s;--s)if(l+=h=-1*(o*(l*(c=Math.tan(l))+1)-l-.5*(l*l+r)*c)/((l-o)/c-1),Math.abs(h)<=W){i=l;break}e=ct(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(a+this.ml0)<=W)i=0,e=ct(this.long0+n/this.a);else{var u,d,p,f,m;for(r=n*n/this.a/this.a+(o=(this.ml0+a)/this.a)*o,l=o,s=20;s;--s)if(m=this.e*Math.sin(l),u=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*te(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=h=(o*(u*(f=d/this.a)+1)-f-.5*u*(f*f+r))/(this.es*Math.sin(2*l)*(f*f+r-2*o*f)/(4*u)+(o-f)*(u*p-2/Math.sin(2*l))-p),Math.abs(h)<=W){i=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=ct(this.long0+Math.asin(n*u/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]},_e={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=(t.y-this.lat0)/N*1e-5,n=t.x-this.long0,a=1,s=0;for(e=1;e<=10;e++)s+=this.A[e]*(a*=i);var o,r=s,l=n,h=1,c=0,u=0,d=0;for(e=1;e<=6;e++)o=c*r+h*l,u=u+this.B_re[e]*(h=h*r-c*l)-this.B_im[e]*(c=o),d=d+this.B_im[e]*h+this.B_re[e]*c;return t.x=d*this.a+this.x0,t.y=u*this.a+this.y0,t},inverse:function(t){var e,i,n=(t.y-this.y0)/this.a,a=(t.x-this.x0)/this.a,s=1,o=0,r=0,l=0;for(e=1;e<=6;e++)i=o*n+s*a,r=r+this.C_re[e]*(s=s*n-o*a)-this.C_im[e]*(o=i),l=l+this.C_im[e]*s+this.C_re[e]*o;for(var h=0;h<this.iterations;h++){var c,u=r,d=l,p=n,f=a;for(e=2;e<=6;e++)c=d*r+u*l,p+=(e-1)*(this.B_re[e]*(u=u*r-d*l)-this.B_im[e]*(d=c)),f+=(e-1)*(this.B_im[e]*u+this.B_re[e]*d);u=1,d=0;var m=this.B_re[1],g=this.B_im[1];for(e=2;e<=6;e++)c=d*r+u*l,m+=e*(this.B_re[e]*(u=u*r-d*l)-this.B_im[e]*(d=c)),g+=e*(this.B_im[e]*u+this.B_re[e]*d);var _=m*m+g*g;r=(p*m+f*g)/_,l=(f*m-p*g)/_}var v=r,y=l,b=1,w=0;for(e=1;e<=9;e++)w+=this.D[e]*(b*=v);var M=this.lat0+w*N*1e5;return t.x=this.long0+y,t.y=M,t},names:["New_Zealand_Map_Grid","nzmg"]},ve={init:function(){},forward:function(t){var e=t.y,i=ct(t.x-this.long0),n=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return t.x=n,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=ct(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]},ye={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Nt(this.es)},forward:function(t){var e,i,n=t.x,a=t.y;if(n=ct(n-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(a),o=20;o;--o){var r=(this.m*a+Math.sin(a)-s)/(this.m+Math.cos(a));if(a-=r,Math.abs(r)<W)break}else a=1!==this.n?Math.asin(this.n*Math.sin(a)):a;e=this.a*this.C_x*n*(this.m+Math.cos(a)),i=this.a*this.C_y*a}else{var l=Math.sin(a),h=Math.cos(a);i=this.a*Rt(a,l,h,this.en),e=this.a*n*h/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n,a;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=ue((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=ue(Math.sin(e)/this.n)),n=ct(n+this.long0),e=oe(e)):(e=Bt(t.y/this.a,this.es,this.en),(a=Math.abs(e))<R?(a=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),n=ct(i)):a-W<R&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]},be={init:function(){},forward:function(t){for(var e=t.y,i=ct(t.x-this.long0),n=e,a=Math.PI*Math.sin(e);;){var s=-(n+Math.sin(n)-a)/(1+Math.cos(n));if(n+=s,Math.abs(s)<W)break}n/=2,Math.PI/2-Math.abs(e)<W&&(i=0);var o=.900316316158*this.a*i*Math.cos(n)+this.x0,r=1.4142135623731*this.a*Math.sin(n)+this.y0;return t.x=o,t.y=r,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=ct(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var a=Math.asin(i);return t.x=n,t.y=a,t},names:["Mollweide","moll"]},we={init:function(){Math.abs(this.lat1+this.lat2)<W||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ee(this.es),this.e1=ie(this.es),this.e2=ne(this.es),this.e3=ae(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=lt(this.e,this.sinphi,this.cosphi),this.ml1=te(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<W?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=lt(this.e,this.sinphi,this.cosphi),this.ml2=te(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=te(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var a=te(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-a)}var s=this.ns*ct(i-this.long0),o=this.x0+e*Math.sin(s),r=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=r,t},inverse:function(t){var e,i,n,a;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;return 0!==i&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere?(a=ct(this.long0+s/this.ns),n=oe(this.g-i/this.a),t.x=a,t.y=n,t):(n=re(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),a=ct(this.long0+s/this.ns),t.x=a,t.y=n,t)},names:["Equidistant_Conic","eqdc"]},Me={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.y,a=ct(t.x-this.long0);Math.abs(n)<=W&&(e=this.x0+this.R*a,i=this.y0);var s=ue(2*Math.abs(n/Math.PI));(Math.abs(a)<=W||Math.abs(Math.abs(n)-R)<=W)&&(e=this.x0,i=n>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var o=.5*Math.abs(Math.PI/a-a/Math.PI),r=o*o,l=Math.sin(s),h=Math.cos(s),c=h/(l+h-1),u=c*(2/l-1),d=u*u,p=Math.PI*this.R*(o*(c-d)+Math.sqrt(r*(c-d)*(c-d)-(d+r)*(c*c-d)))/(d+r);a<0&&(p=-p),e=this.x0+p;var f=r+c;return p=Math.PI*this.R*(u*f-o*Math.sqrt((d+r)*(r+1)-f*f))/(d+r),i=n>=0?this.y0+p:this.y0-p,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,a,s,o,r,l,h,c,u,d;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,s=(n=t.x/u)*n+(a=t.y/u)*a,u=3*(a*a/(l=-2*(o=-Math.abs(a)*(1+s))+1+2*a*a+s*s)+(2*(r=o-2*a*a+n*n)*r*r/l/l/l-9*o*r/l/l)/27)/(h=(o-r*r/3/l)/l)/(c=2*Math.sqrt(-h/3)),Math.abs(u)>1&&(u=u>=0?1:-1),d=Math.acos(u)/3,i=t.y>=0?(-c*Math.cos(d+Math.PI/3)-r/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-r/3/l)*Math.PI,e=Math.abs(n)<W?this.long0:ct(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-a*a)+s*s))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Ce={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,a,s,o,r,l,h,c,u,d,p,f,m,g,_,v,y,b,w,M,C=t.x,x=t.y,k=Math.sin(t.y),S=Math.cos(t.y),L=ct(C-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=W?(t.x=this.x0+this.a*(R-x)*Math.sin(L),t.y=this.y0-this.a*(R-x)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=W?(t.x=this.x0+this.a*(R+x)*Math.sin(L),t.y=this.y0+this.a*(R+x)*Math.cos(L),t):(v=this.sin_p12*k+this.cos_p12*S*Math.cos(L),_=(g=Math.acos(v))/Math.sin(g),t.x=this.x0+this.a*_*S*Math.sin(L),t.y=this.y0+this.a*_*(this.cos_p12*k-this.sin_p12*S*Math.cos(L)),t):(e=ee(this.es),i=ie(this.es),n=ne(this.es),a=ae(this.es),Math.abs(this.sin_p12-1)<=W?(s=this.a*te(e,i,n,a,R),o=this.a*te(e,i,n,a,x),t.x=this.x0+(s-o)*Math.sin(L),t.y=this.y0-(s-o)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=W?(s=this.a*te(e,i,n,a,R),o=this.a*te(e,i,n,a,x),t.x=this.x0+(s+o)*Math.sin(L),t.y=this.y0+(s+o)*Math.cos(L),t):(r=k/S,l=se(this.a,this.e,this.sin_p12),h=se(this.a,this.e,k),c=Math.atan((1-this.es)*r+this.es*l*this.sin_p12/(h*S)),y=0===(u=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(L)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(u)-Math.PI)<=W?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(L)*Math.cos(c)/Math.sin(u)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),p=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),t.x=this.x0+(g=l*y*(1-(b=y*y)*(m=p*p)*(1-m)/6+(w=b*y)/8*(f=d*p)*(1-2*m)+(M=w*y)/120*(m*(4-7*m)-3*d*d*(1-7*m))-M*y/48*f))*Math.sin(u),t.y=this.y0+g*Math.cos(u),t))},inverse:function(t){var e,i,n,a,s,o,r,l,h,c,u,d,p,f,m,g,_,v,y,b,w,M;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*R*this.a)return;return i=e/this.a,n=Math.sin(i),a=Math.cos(i),s=this.long0,Math.abs(e)<=W?o=this.lat0:(o=ue(a*this.sin_p12+t.y*n*this.cos_p12/e),r=Math.abs(this.lat0)-R,s=ct(Math.abs(r)<=W?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*n,e*this.cos_p12*a-t.y*this.sin_p12*n))),t.x=s,t.y=o,t}return l=ee(this.es),h=ie(this.es),c=ne(this.es),u=ae(this.es),Math.abs(this.sin_p12-1)<=W?(d=this.a*te(l,h,c,u,R),e=Math.sqrt(t.x*t.x+t.y*t.y),o=re((d-e)/this.a,l,h,c,u),s=ct(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=W?(d=this.a*te(l,h,c,u,R),e=Math.sqrt(t.x*t.x+t.y*t.y),o=re((e-d)/this.a,l,h,c,u),s=ct(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),p=se(this.a,this.e,this.sin_p12),g=Math.cos(m),y=3*this.es*(1-(v=-(_=this.e*this.cos_p12*g)*_/(1-this.es)))*this.sin_p12*this.cos_p12*g/(1-this.es),M=1-v*(w=(b=e/p)-v*(1+v)*Math.pow(b,3)/6-y*(1+3*v)*Math.pow(b,4)/24)*w/2-b*w*w*w/6,f=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*g),s=ct(this.long0+Math.asin(Math.sin(m)*Math.sin(w)/Math.cos(f))),o=Math.atan((1-this.es*M*this.sin_p12/Math.sin(f))*Math.tan(f)/(1-this.es)),t.x=s,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]},xe={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,a,s,o,r,l=t.y;return n=ct(t.x-this.long0),e=Math.sin(l),i=Math.cos(l),a=Math.cos(n),((s=this.sin_p14*e+this.cos_p14*i*a)>0||Math.abs(s)<=W)&&(o=1*this.a*i*Math.sin(n),r=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*a)),t.x=o,t.y=r,t},inverse:function(t){var e,i,n,a,s,o,r;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=ue(e/this.a),n=Math.sin(i),a=Math.cos(i),o=this.long0,Math.abs(e)<=W?(r=this.lat0,t.x=o,t.y=r,t):(r=ue(a*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-R,Math.abs(s)<=W?(o=ct(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=r,t):(o=ct(this.long0+Math.atan2(t.x*n,e*this.cos_p14*a-t.y*this.sin_p14*n)),t.x=o,t.y=r,t))},names:["ortho"]},ke={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Se={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=R-q/2?5:this.lat0<=-(R-q/2)?6:Math.abs(this.long0)<=q?1:Math.abs(this.long0)<=R+q?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,a,s,o,r={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,5===this.face)a=R-e,i>=q&&i<=R+q?(l.value=ke.AREA_0,n=i-R):i>R+q||i<=-(R+q)?(l.value=ke.AREA_1,n=i>0?i-H:i+H):i>-(R+q)&&i<=-q?(l.value=ke.AREA_2,n=i+R):(l.value=ke.AREA_3,n=i);else if(6===this.face)a=R+e,i>=q&&i<=R+q?(l.value=ke.AREA_0,n=-i+R):i<q&&i>=-q?(l.value=ke.AREA_1,n=-i):i<-q&&i>=-(R+q)?(l.value=ke.AREA_2,n=-i-R):(l.value=ke.AREA_3,n=i>0?-i+H:-i-H);else{var h,c,u,d,p,f;2===this.face?i=P(i,+R):3===this.face?i=P(i,+H):4===this.face&&(i=P(i,-R)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(i),h=p*Math.cos(i),c=p*f,u=d,1===this.face?n=I(a=Math.acos(h),u,c,l):2===this.face?n=I(a=Math.acos(c),u,-h,l):3===this.face?n=I(a=Math.acos(-h),u,-c,l):4===this.face?n=I(a=Math.acos(-c),u,h,l):(a=n=0,l.value=ke.AREA_0)}return o=Math.atan(12/H*(n+Math.acos(Math.sin(n)*Math.cos(q))-R)),s=Math.sqrt((1-Math.cos(a))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===ke.AREA_1?o+=R:l.value===ke.AREA_2?o+=H:l.value===ke.AREA_3&&(o+=1.5*H),r.x=s*Math.cos(o),r.y=s*Math.sin(o),r.x=r.x*this.a+this.x0,r.y=r.y*this.a+this.y0,t.x=r.x,t.y=r.y,t},inverse:function(t){var e,i,n,a,s,o,r,l,h,c,u,d,p={lam:0,phi:0},f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=ke.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=ke.AREA_1,e-=R):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=ke.AREA_2,e=e<0?e+H:e-H):(f.value=ke.AREA_3,e+=R),h=H/12*Math.tan(e),s=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),o=Math.atan(s),(r=1-(n=Math.cos(e))*n*(a=Math.tan(i))*a*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?r=-1:r>1&&(r=1),5===this.face)l=Math.acos(r),p.phi=R-l,p.lam=f.value===ke.AREA_0?o+R:f.value===ke.AREA_1?o<0?o+H:o-H:f.value===ke.AREA_2?o-R:o;else if(6===this.face)l=Math.acos(r),p.phi=l-R,p.lam=f.value===ke.AREA_0?-o+R:f.value===ke.AREA_1?-o:f.value===ke.AREA_2?-o-R:o<0?-o-H:-o+H;else{var m,g,_;h=(m=r)*m,g=(h+=(_=h>=1?0:Math.sqrt(1-h)*Math.sin(o))*_)>=1?0:Math.sqrt(1-h),f.value===ke.AREA_1?(h=g,g=-_,_=h):f.value===ke.AREA_2?(g=-g,_=-_):f.value===ke.AREA_3&&(h=g,g=_,_=-h),2===this.face?(h=m,m=-g,g=h):3===this.face?(m=-m,g=-g):4===this.face&&(h=m,m=g,g=-h),p.phi=Math.acos(-_)-R,p.lam=Math.atan2(g,m),2===this.face?p.lam=P(p.lam,-R):3===this.face?p.lam=P(p.lam,-H):4===this.face&&(p.lam=P(p.lam,+R))}return 0!==this.es&&(c=p.phi<0?1:0,u=Math.tan(p.phi),d=this.b/Math.sqrt(u*u+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Le=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Te=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ae=V/5,Ie=1/Ae,Pe=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Ee={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=ct(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*Ae);n<0?n=0:n>=18&&(n=17);var a={x:Pe(Le[n],i=V*(i-Ie*n))*e,y:Pe(Te[n],i)};return t.y<0&&(a.y=-a.y),a.x=a.x*this.a*.8487+this.x0,a.y=a.y*this.a*1.3523+this.y0,a},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=Le[18][0],e.y=t.y<0?-R:R;else{var i=Math.floor(18*e.y);for(i<0?i=0:i>=18&&(i=17);;)if(Te[i][0]>e.y)--i;else{if(!(Te[i+1][0]<=e.y))break;++i}var n=Te[i],a=5*(e.y-n[0])/(Te[i+1][0]-n[0]);a=function(t,e,i,n){for(var a=e;n;--n){var s=t(a);if(a-=s,Math.abs(s)<i)break}return a}((function(t){return(Pe(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),a,W,100),e.x/=Pe(Le[i],a),e.y=(5*i+a)*Z,t.y<0&&(e.y=-e.y)}return e.x=ct(e.x+this.long0),e},names:["Robinson","robin"]};return y.defaultDatum="WGS84",y.Proj=p,y.WGS84=new y.Proj("WGS84"),y.Point=A,y.toPoint=Mt,y.defs=r,y.transform=g,y.mgrs=zt,y.version="2.5.0",(Dt=y).Proj.projections.add(Ft),Dt.Proj.projections.add(qt),Dt.Proj.projections.add(Gt),Dt.Proj.projections.add($t),Dt.Proj.projections.add(Yt),Dt.Proj.projections.add(Kt),Dt.Proj.projections.add(Qt),Dt.Proj.projections.add(Xt),Dt.Proj.projections.add(Jt),Dt.Proj.projections.add(le),Dt.Proj.projections.add(ce),Dt.Proj.projections.add(de),Dt.Proj.projections.add(pe),Dt.Proj.projections.add(fe),Dt.Proj.projections.add(me),Dt.Proj.projections.add(ge),Dt.Proj.projections.add(_e),Dt.Proj.projections.add(ve),Dt.Proj.projections.add(ye),Dt.Proj.projections.add(be),Dt.Proj.projections.add(we),Dt.Proj.projections.add(Me),Dt.Proj.projections.add(Ce),Dt.Proj.projections.add(xe),Dt.Proj.projections.add(Se),Dt.Proj.projections.add(Ee),y})),function(t){var e,i;if("function"==typeof define&&define.amd)define(["leaflet","proj4"],t);else if("object"==typeof module&&"object"==typeof module.exports)e=require("leaflet"),i=require("proj4"),module.exports=t(e,i);else{if(void 0===window.L||void 0===window.proj4)throw"Leaflet and proj4 must be loaded first";t(window.L,window.proj4)}}((function(t,e){return e.__esModule&&e.default&&(e=e.default),t.Proj={},t.Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},t.Proj.Projection=t.Class.extend({initialize:function(e,i,n){var a=t.Proj._isProj4Obj(e);this._proj=a?e:this._projFromCodeDef(e,i),this.bounds=a?i:n},project:function(e){var i=this._proj.forward([e.lng,e.lat]);return new t.Point(i[0],i[1])},unproject:function(e,i){var n=this._proj.inverse([e.x,e.y]);return new t.LatLng(n[1],n[0],i)},_projFromCodeDef:function(t,i){if(i)e.defs(t,i);else if(void 0===e.defs[t]){var n=t.split(":");if(n.length>3&&(t=n[n.length-3]+":"+n[n.length-1]),void 0===e.defs[t])throw"No projection definition for code "+t}return e(t)}}),t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(e,i,n){var a,s,o;if(t.Proj._isProj4Obj(e)?(a=(s=e).srsCode,this.projection=new t.Proj.Projection(s,(o=i||{}).bounds)):this.projection=new t.Proj.Projection(a=e,i,(o=n||{}).bounds),t.Util.setOptions(this,o),this.code=a,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var r=this.options.resolutions.length-1;r>=0;r--)this.options.resolutions[r]&&(this._scales[r]=1/this.options.resolutions[r])}this.infinite=!this.options.bounds},scale:function(t){var e,i=Math.floor(t);return t===i?this._scales[t]:(e=this._scales[i])+(this._scales[i+1]-e)*(t-i)},zoom:function(t){var e,i=this._closestElement(this._scales,t),n=this._scales.indexOf(i);return t===i?n:void 0===i?-1/0:void 0===(e=this._scales[n+1])?1/0:(t-i)/(e-i)+n},distance:t.CRS.Earth.distance,R:t.CRS.Earth.R,_closestElement:function(t,e){for(var i,n=t.length;n--;)t[n]<=e&&(void 0===i||i<t[n])&&(i=t[n]);return i}}),t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(e,i){this._callLevel=0,t.GeoJSON.prototype.initialize.call(this,e,i)},addData:function(e){var i;e&&(e.crs&&"name"===e.crs.type?i=new t.Proj.CRS(e.crs.properties.name):e.crs&&e.crs.type&&(i=new t.Proj.CRS(e.crs.type+":"+e.crs.properties.code)),void 0!==i&&(this.options.coordsToLatLng=function(e){var n=t.point(e[0],e[1]);return i.projection.unproject(n)})),this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),t.Proj.geoJson=function(e,i){return new t.Proj.GeoJSON(e,i)},t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(e,i,n){t.ImageOverlay.prototype.initialize.call(this,e,null,n),this._projectedBounds=i},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),n=t.point(this._projectedBounds.min.x,this._projectedBounds.max.y),a=this._projectedToNewLayerPoint(n,e.zoom,e.center);t.DomUtil.setTransform(this._image,a,i)},_reset:function(){var e=this._map.getZoom(),i=this._map.getPixelOrigin(),n=t.bounds(this._transform(this._projectedBounds.min,e)._subtract(i),this._transform(this._projectedBounds.max,e)._subtract(i)),a=n.getSize();t.DomUtil.setPosition(this._image,n.min),this._image.style.width=a.x+"px",this._image.style.height=a.y+"px"},_projectedToNewLayerPoint:function(t,e,i){var n=this._map.getSize()._divideBy(2),a=this._map.project(i,e)._subtract(n)._round().add(this._map._getMapPanePos());return this._transform(t,e)._subtract(a)},_transform:function(t,e){var i=this._map.options.crs,n=i.transformation,a=i.scale(e);return n.transform(t,a)}}),t.Proj.imageOverlay=function(e,i,n){return new t.Proj.ImageOverlay(e,i,n)},t.Proj})),$.fn.forMapsTabs=function(t){t=$.extend({},{titolo:"",menu:"MENU",tabChanged:function(){},open:function(){},close:function(){}},t),$(this).hasClass(".forMapsTabs")||$(this).addClass("forMapsTabs");var e,i,n=this;$(n).prepend('<h1><span class="forMapsTabsClose fa fa-caret-right" title="Chiudi"></span><span class="forMapsTabsTitle">'+t.titolo+"</span></h1>"),i=!1,e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0),i&&$(".forMapsTabsMenu>ul",n).addClass("forMapsTouch"),$(".forMapsTabsMenu",n).prepend('<div class="forMapsTabsArrow forMapsTabsArrowLeft"><span class="fas fa-chevron-left"></span></div>'),$(".forMapsTabsMenu",n).append('<div class="forMapsTabsArrow forMapsTabsArrowRight"><span class="fas fa-chevron-right"></span></div>'),$(".forMapsTabsArrowRight",n).on("click",(function(t){var e=$(".forMapsTabsMenu>ul",n);console.log(e.scrollLeft()),e.animate({scrollLeft:e.scrollLeft()+100},300)})),$(".forMapsTabsArrowLeft",n).on("click",(function(t){var e=$(".forMapsTabsMenu>ul",n);console.log(e.scrollLeft()),e.animate({scrollLeft:e.scrollLeft()-100},300)})),$('.forMapsTabsMenu>ul>li>a[href^="#"]',n).on("click",(function(e){var i,n,a;i=this.hash,n=$('[href="'+i+'"]'),a=$(i),n.addClass("forMapsTabsActive").parent().siblings().find("a").removeClass("forMapsTabsActive"),a.addClass("forMapsTabsActive").siblings().removeClass("forMapsTabsActive"),n.closest("ul").removeClass("forMapsTabsMenuOpen"),t.tabChanged.call(this),e.preventDefault()})),$(".forMapsTabsClose",n).on("click",(function(t){n.close(),t.preventDefault()})),n.open=function(){$(this).closest(".forMapsTabs").hasClass("forMapsTabsOpen")||$(this).closest(".forMapsTabs").addClass("forMapsTabsOpen"),t.open.call(this)},n.close=function(){$(this).closest(".forMapsTabs").removeClass("forMapsTabsOpen"),$(this).closest(".forMapsTabs").children("ul").first().removeClass("forMapsTabsMenuOpen"),t.close.call(this)},n.isOpen=function(){return n.hasClass("forMapsTabsOpen")},n.setTitle=function(t){$(this).find(".forMapsTabsTitle").html(t)}};var ForMaps=function(){var t={},e=[{Tipologia:"immagine",Denominazione:"Goccia rossa",Icona:"goccia_rossa.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Goccia gialla",Icona:"goccia_gialla.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Goccia verde",Icona:"goccia_verde.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Goccia fucsia",Icona:"goccia_fucsia.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Goccia blu",Icona:"goccia_blu.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Oggetto di stima 1",Icona:"d_1.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Oggetto di stima 2",Icona:"d_2.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Oggetto di stima 3",Icona:"d_3.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Oggetto di stima 4",Icona:"d_4.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Oggetto di stima 5",Icona:"d_5.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile A",Icona:"icona_1.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile B",Icona:"icona_2.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile C",Icona:"icona_3.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile D",Icona:"icona_4.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile E",Icona:"icona_5.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile F",Icona:"icona_6.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile G",Icona:"icona_7.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile H",Icona:"icona_8.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile I",Icona:"icona_9.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Comparabile J",Icona:"icona_10.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno edificabile rosso",Icona:"terreno_edificabile_rosso.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno edificabile giallo",Icona:"terreno_edificabile_giallo.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno edificabile verde",Icona:"terreno_edificabile_verde.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno edificabile fucsia",Icona:"terreno_edificabile_fucsia.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno edificabile blu",Icona:"terreno_edificabile_blu.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno agricolo rosso",Icona:"terreno_agricolo_rosso.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno agricolo giallo",Icona:"terreno_agricolo_giallo.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno agricolo verde",Icona:"terreno_agricolo_verde.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno agricolo fucsia",Icona:"terreno_agricolo_fucsia.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Terreno agricolo blu",Icona:"terreno_agricolo_blu.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Utente rosso",Icona:"utente_rosso.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Utente giallo",Icona:"utente_giallo.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Utente verde",Icona:"utente_verde.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Utente fucsia",Icona:"utente_fucsia.png",Trascinabile:!0},{Tipologia:"immagine",Denominazione:"Utente blu",Icona:"utente_blu.png",Trascinabile:!0},{Tipologia:"testo",Denominazione:"Etichetta rossa",Icona:"red",Trascinabile:!0},{Tipologia:"testo",Denominazione:"Etichetta gialla",Icona:"yellow",Trascinabile:!0},{Tipologia:"testo",Denominazione:"Etichetta verde",Icona:"green",Trascinabile:!0},{Tipologia:"testo",Denominazione:"Etichetta fucsia",Icona:"fucsia",Trascinabile:!0},{Tipologia:"testo",Denominazione:"Etichetta blu",Icona:"blue",Trascinabile:!0}],i=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}];function n(t,e){var n=this;e=$.extend({},{coordinate:"41.8856460823679, 12.4608743837683",zoom:6,marker:!1,help:!1,bottoniSalvataggio:!0,bottoneCondivisione:!0,bottoneVisualizzazioneControlli:!0,bottonePosizione:!0,linkForMaps:!1,experimental:!1},e),this.state={},this.id=this.guid(),this.help=e.help,this.experimental=e.experimental,this.bottoniSalvataggio=e.bottoniSalvataggio,this.bottoneCondivisione=e.bottoneCondivisione,this.bottoneVisualizzazioneControlli=e.bottoneVisualizzazioneControlli,this.bottonePosizione=e.bottonePosizione,this.linkForMaps=e.linkForMaps,this.overlayWMSZIndex=200,this.state.Markers=[],this.state.Ricerche=[],this.percorsoIcone="https://www.formaps.it/Images/markers/",this.map=L.map(t),this.addInfoWindow();var a=this.coordinatesFromString(e.coordinate);e.marker&&this.addMarker({latLng:a}),this.map.setView(a,e.zoom),this.map.on("baselayerchange",(function(t){n.state.activeBaseLayer=t.layer.options.id})),L.control.scale({imperial:!1}).addTo(this.map),this.map.zoomControl.setPosition("bottomleft"),this.bottonePosizione&&L.control.locate({position:"bottomleft",locateOptions:{enableHighAccuracy:!0},icon:"far fa-dot-circle",circleStyle:{color:"#db1915",fillColor:"#db1915"},markerStyle:{color:"#fff",fillColor:"#db1915"},compassStyle:{fillColor:"#db1915"},strings:{title:"Mostra la mia posizione",metersUnit:"metri",feetUnit:"piedi",popup:"Ti trovi entro {distance} {unit} da questo punto",outsideMapBoundsMsg:"Sembra che ti trovi al di fuori dei confini della mappa"},onLocationError:function(t){console.log("Errore geolocalizzazione",t.message)}}).addTo(this.map);var s=L.tileLayer("https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:19,attribution:'Map data &copy; <a href="https://www.google.it/">Google</a>',subdomains:["mt0","mt1","mt2","mt3"],id:"googleStreets"}).addTo(this.map),o=L.tileLayer("https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}&apistyle=s.t:2|s.e:l|p.v:off",{maxZoom:19,attribution:'Map data &copy; <a href="https://www.google.it/">Google</a>',subdomains:["mt0","mt1","mt2","mt3"],id:"googleStreets"}),r=L.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:19,attribution:'Map data &copy; <a href="https://www.google.it/">Google</a>',subdomains:["mt0","mt1","mt2","mt3"],id:"googleSat"}),l=L.tileLayer("https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{maxZoom:19,attribution:'Map data &copy; <a href="https://www.google.it/">Google</a>',subdomains:["mt0","mt1","mt2","mt3"],id:"googleHybrid"}),h=L.tileLayer("https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}&apistyle="+this.getEncodedMapStyles(i),{maxZoom:19,attribution:'Map data &copy; <a href="https://www.google.it/">Google</a>',subdomains:["mt0","mt1","mt2","mt3"],id:"googleGrey"}),c=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',id:"openStreetMap"}),u=L.tileLayer("https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'});this.baseLayers={"Strade - Google":s,"Strade senza punti di interesse - Google":o,"Strade - Scala di grigi - Google":h,"Satellite - Google":r,"Ibrida - Google":l,"Strade - OpenStreetMap":c,"Strade - Scala di grigi - OpenStreetMap":u,"Mappa di base spenta":L.tileLayer("",{maxZoom:19,id:"nessuna"})},this.state.activeBaseLayer=this.baseLayers[Object.keys(this.baseLayers)[0]].options.id,L.control.layers(this.baseLayers,null,{position:"topleft"}).addTo(this.map)}n.prototype.getBanner=function(){return'<p class="forMapsBanner"><a href="https://www.stimatrix.it/Prodotti/SchedaProdotto/23?utm_campaign=VIS-Nuovi-Metodi20191008" title="Accedi all\'offerta speciale" target="_blank;"><img src="https://www.formaps.it/Images/Banner/2019-10-08-Stimatrix-VIS-Nuovi-Metodi.jpg" style="width:100%;max-width:100%;"></a></p>'},n.prototype.saveMapState=function(){var t=this.map,e={};e.Center=t.getCenter(),e.Zoom=t.getZoom(),e.ActiveBaseLayer=this.state.activeBaseLayer;var i=[];$.each(this.state.Markers,(function(t,e){if(null!=e){var n={};n.Etichetta=e.data.etichetta,n.Trascinabile=e.dragging.enabled(),n.Coordinate=e.getLatLng(),n.Heading=e.data.heading,n.Pitch=e.data.pitch,n.Icona=e.data.icona,n.IdRicerca=e.idRicerca,n.Denominazione=e.data.denominazione,n.Provenienza=e.data.provenienza,n.Prezzo=e.data.prezzo,n.Url=e.data.url,n.Superficie=e.data.superficie,n.NumeroLocali=e.data.numeroLocali,n.Note=e.data.note,n.Data=e.data.data,n.IdAnnuncio=e.data.idAnnuncio,n.ProvenienzaAnnuncio=e.data.provenienzaAnnuncio,i.push(n)}})),e.Markers=i;var n=[];$.each(this.state.Ricerche,(function(t,e){if(null!=e){var i={};i.Id=e.id,i.Parametro=e.parametro,n.push(i)}})),e.Ricerche=n;var a=[];return $.each(this.state.WMSOverlays,(function(t,e){a.push({NomeInterno:e.NomeInterno,Active:e.Active,Opacity:e.Opacity})})),e.WMSOverlays=a,this.ForMapsLivelliAmministrativi&&(e.ComuniEvidenziati=this.ForMapsLivelliAmministrativi.GetComuniEvidenziati()),this.ForMapsLivelliAmministrativi&&(e.TribunaleEvidenziato=this.ForMapsLivelliAmministrativi.GetTribunaleEvidenziato()),this.drawnItems&&(e.DrawnItems=this.drawnItems.toGeoJSON()),this.ForMapsElencoNazionale&&(e.ElencoNazionaleActive=this.ForMapsElencoNazionale.GetElencoNazionaleActive(),e.ElencoNazionaleHeatmapActive=this.ForMapsElencoNazionale.GetElencoNazionaleHeatmapActive()),e},n.prototype.loadMapState=function(t){var e=this,i=e.map;if(e.removeMarkers(),$.each(e.state.WMSOverlays,(function(t,i){e.accendiLayerWMS(i.NomeInterno,!1,.5)})),e.forMapsDraw?$.each(e.drawnItems.getLayers(),(function(t,i){e.forMapsDraw.LayerUnset(i)})):e.drawnItems&&e.drawnItems.clearLayers(),$.each(t.Markers,(function(t,i){e.addMarker({idIcona:i.Icona,draggable:null==i.Trascinabile||i.Trascinabile,etichetta:" "==i.Etichetta?"":i.Etichetta,denominazione:i.Denominazione,provenienza:i.Provenienza,prezzo:i.Prezzo?i.Prezzo:null,url:i.Url,superficie:i.Superficie?i.Superficie:null,numeroLocali:i.NumeroLocali,note:i.Note,data:i.Data?new Date(i.Data):null,latLng:i.Coordinate,idRicerca:i.IdRicerca,infoWindowOpened:!1,heading:null==i.Heading?0:i.Heading,pitch:null==i.Pitch?0:i.Pitch,idAnnuncio:i.IdAnnuncio,provenienzaAnnuncio:i.ProvenienzaAnnuncio})})),$.each(t.Ricerche,(function(t,i){e.aggiungiRicerca(i.Id,i.Parametro)})),t.WMSOverlays?$.each(t.WMSOverlays,(function(t,i){e.accendiLayerWMS(i.NomeInterno,i.Active,i.Opacity)})):$.each(e.state.WMSOverlays,(function(t,i){e.accendiLayerWMS(i.NomeInterno,!1,50)})),e.ForMapsLivelliAmministrativi)if(t.ComuniEvidenziati){var n=t.ComuniEvidenziati;e.ForMapsLivelliAmministrativi.EvidenziaComune(n.Comuni,n.Active,n.Opacity,!1,n.Negativo)}else e.ForMapsLivelliAmministrativi.EvidenziaComune("",!1,50,!1);if(e.ForMapsLivelliAmministrativi&&t.TribunaleEvidenziato){var a=t.TribunaleEvidenziato;e.ForMapsLivelliAmministrativi.EvidenziaTribunale(a.Tribunale,a.Active,a.Opacity,!1)}if(t.DrawnItems&&L.geoJSON(t.DrawnItems,{pointToLayer:function(t,e){if(t.properties.radius)return new L.Circle(e,t.properties.radius)},onEachFeature:function(t,i){i.addTo(e.drawnItems).showMeasurements(),e.forMapsDraw&&e.forMapsDraw.LayerSetup(i),i.setStyle({fillColor:t.properties.fillColor,color:t.properties.color})}}),e.ForMapsElencoNazionale&&t.ElencoNazionaleActive&&(e.ForMapsElencoNazionale.SetElencoNazionaleActive(t.ElencoNazionaleActive),e.ForMapsElencoNazionale.SetElencoNazionaleHeatmapActive(t.ElencoNazionaleHeatmapActive)),t.ActiveBaseLayer&&e.setBaseLayer(t.ActiveBaseLayer),t.Center)i.setView(t.Center,t.Zoom);else{var s=t.Bounds;i.flyToBounds(L.latLngBounds(L.latLng(s.south,s.west),L.latLng(s.north,s.east)))}},n.prototype.setBaseLayer=function(t){var e=this.map;$.each(this.baseLayers,(function(i,n){n.options.id==t?n.addTo(e):n.remove()}))},n.prototype.addSideBar=function(t,e,i,n,s){var o=this,r=this.map;if(null==o.SideBar){var l=document.createElement("div");if(l.id="forMapsSideBar"+o.id,l.className="sidebar collapsed",l.innerHTML='<div class="sidebar-tabs">                                    <ul role="tablist" class="forMapsFunctions">                                    </ul>                                </div>                                <div class="sidebar-content">                                </div>',$(r.getContainer()).parent().prepend(l),$(r.getContainer()).addClass("sidebar-map"),o.SideBar=$(l),o.SideBar.find(".sidebar-tabs").append('<ul class="forMapsInfo"></ul>'),o.bottoneCondivisione){var h=L.DomUtil.create("div");h.id="forMapsShareContainer"+t,h.className="forMapsShareContainer",h.innerHTML='<h1>Condividi</h1>                                            <div class="forMapsShareTextLink">                                                <input type="text" id="forMapsShareInput'+t+'" class="forMapsShareInput" readonly="readonly">                                                <button type="button" id="forMapsShareButton'+t+'" class="forMapsButton forMapsShareButton">Copia il link</button>                                            </div>                                            <div id="forMapsShareLinks'+t+'" class="forMapsShareLinks">                                                <a href="#" id="forMapsShareEmail'+t+'" title="Condividi la mappa via Email" target="_blank"><i class="fas fa-envelope"></i></a>                                                <a href="#" id="forMapsShareWA'+t+'" class="forMapsShareWA" title="Condividi la mappa con WhatsApp" target="_blank"><i class="fab fa-whatsapp-square"></i></a>                                                <a href="#" id="forMapsShareFB'+t+'" class="forMapsShareFB" title="Condividi la mappa su Facebook" target="_blank"><i class="fab fa-facebook-square"></i></a>                                                <a href="#" id="forMapsShareQR'+t+'" class="forMapsShareQR" title="Condividi la mappa tramite QR Code" target="_blank"><div></div></a>                                            </ul>',$(r.getContainer()).append(h),$("#forMapsShareButton"+t).on("click",(function(e){document.getElementById("forMapsShareInput"+t).select(),document.execCommand("copy"),alert("Link copiato correttamente negli appunti")})),$("#forMapsShareFB"+t).on("click",(function(t){t.preventDefault(),window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent($(this).prop("href")),"facebook-share-dialog","width=626,height=436")}));var c=!1;$('<li class="shareTab"><a href="#" role="tab" title="Condividi la mappa" id="forMapsShare'+o.id+'"><span class="fas fa-share-alt"></span></a></li>').appendTo(o.SideBar.find(".sidebar-tabs ul.forMapsInfo")).on("click",(function(e){if(c)return!1;$("#forMapsShare"+o.id+">span").prop("class","fas fa-spinner fa-pulse"),c=!0;var i=JSON.stringify(o.saveMapState());$.ajax({url:"https://www.formaps.it/WS/SharedMap/SetMapState",method:"POST",data:{mapState:i},dataType:"jsonp",contentType:"application/x-www-form-urlencoded"}).done((function(e){var i="https://www.formaps.it/shared/map/"+e;$("#forMapsShareInput"+t).val(i),$("#forMapsShareEmail"+t).prop("href","mailto:?body="+i+"&subject=Mappa creata con STIMATRIX forMaps"),$("#forMapsShareWA"+t).prop("href","https://"+(o.mobileCheck()?"api":"web")+".whatsapp.com/send?text="+encodeURIComponent(i)),$("#forMapsShareFB"+t).prop("href",i),$("#forMapsShareQR"+t).prop("href",i),$("#forMapsShareQR"+t+">div").html("").qrcode({text:i,width:80,height:80}),lity("#forMapsShareContainer"+t),$("#forMapsShareContainer"+t).show(),$(document).on("lity:close",(function(e,i){$("#forMapsShareContainer"+t).hide()}))})).fail((function(t,e,i){console.log(t.status),alert("Si Ã¨ verificato un errore durante la condivisione, ritentare piÃ¹ tardi")})).always((function(){$("#forMapsShare"+o.id+">span").prop("class","fas fa-share-alt"),c=!1}))}))}if(o.bottoniSalvataggio&&($('<li class="saveTab"><a href="#" role="tab" title="Salva lo stato della mappa su file" id="forMapsSave'+o.id+'"><span class="far fa-save"></span></a></li>').appendTo(o.SideBar.find(".sidebar-tabs ul.forMapsInfo")).on("click",(function(t){var e=o.saveMapState(),i=new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"});a(i,"Riferimenti.fmaps")})),$('<li class="loadTab"><label for="forMapsLoadFile'+o.id+'" title="Carica lo stato della mappa da file" id="forMapsLoad'+o.id+'"><span class="far fa-folder-open"></span></label><input id="forMapsLoadFile'+o.id+'" type="file" style="display:none;"/></li>').appendTo(o.SideBar.find(".sidebar-tabs ul.forMapsInfo")),$("#forMapsLoadFile"+o.id).on("change",(function(t){try{if(t.target.files){var e=t.target.files,i=new FileReader;i.readAsText(e[0],"UTF-8"),i.onload=function(t){try{var e=JSON.parse(t.target.result);o.loadMapState(e)}catch(i){console.log(i),alert("Si Ã¨ verificato un errore durante il caricamento")}}}}catch(n){console.log(n),alert("Si Ã¨ verificato un errore durante il caricamento")}}))),o.bottoneVisualizzazioneControlli&&$('<li class="showHideTab"><a href="#" role="tab" title="Mostra/Nascondi i controlli su mappa" id="forMapsShowHide'+o.id+'"><span class="fa fa-eye"></span></a></li>').appendTo(o.SideBar.find(".sidebar-tabs ul.forMapsInfo")).on("click",(function(t){$("span",this).hasClass("fa-eye")?$("span",this).switchClass("fa-eye","fa-eye-slash"):$("span",this).switchClass("fa-eye-slash","fa-eye"),$(r.getContainer()).find(".leaflet-control-container").toggle()})),o.help){$('<li class="tourTab"><a href="#" role="tab" title="Scopri le funzionalitÃ  di forMaps" id="forMapsTour'+o.id+'"><span class="fa fa-info-circle"></span></a></li>').appendTo(o.SideBar.find(".sidebar-tabs ul.forMapsInfo"));var u=new Tour({orphan:!0,template:'<div class="popover tour">\t\t\t\t\t\t\t\t    <div class="arrow"></div>\t\t\t\t\t\t\t\t    <h3 class="popover-title"></h3>\t\t\t\t\t\t\t\t    <div class="popover-content"></div>\t\t\t\t\t\t\t\t    <div class="popover-navigation">\t\t\t\t\t\t\t\t\t    <button class="btn btn-default" data-role="prev">Â« Prec.</button>\t\t\t\t\t\t\t\t\t    <span data-role="separator">|</span>\t\t\t\t\t\t\t\t\t    <button class="btn btn-default" data-role="next">Succ. Â»</button> \t\t\t\t\t\t\t\t\t    <button class="btn btn-default" data-role="end" style="margin-left:10px;">Fine</button>\t\t\t\t\t\t\t\t    </div>\t\t\t\t\t\t\t\t</div>',steps:[{title:"Benvenuto su STIMATRIXÂ® forMaps",content:"Segui questo breve tour per scoprire le funzionalitÃ  di forMaps"},{element:".leaflet-control-layers",title:"Mappe di base",content:"Cambia lo stile della mappa di base con, ad esempio, la visione satellitare"},{element:".forMapsMarkerContainer",title:"Riferimenti su mappa",content:"Aggiungi sulla mappa riferimenti personalizzati che ti forniscono informazioni utili, a livello catastale e non solo"},{element:".sidebar",title:"Barra degli strumenti",content:"La barra laterale ti offre tutti gli strumenti necessari a creare la tua mappa personalizzata"},{element:".forMapsSearchTab",title:"Ricerca indirizzo",content:"Cerca un indirizzo"},{element:".catTab",title:"Catasto",content:"Cerca le particelle e aggiungi strati catastali come fogli, particelle, fabbricati e molto altro"},{element:".tavTab",title:"Catasto tavolare",content:"Cerca e visualizza su mappa le particelle catastali della regione Trentino Alto Adige"},{element:".omiTab",title:"Valori OMI",content:"Cerca e visualizza su mappa le zone OMI e i rispettivi valori"},{element:".ammTab",title:"Livelli amministrativi",content:"Aggiungi livelli amministrativi come confini comunali, provinciali, regionali e sezioni censuarie"},{element:".pfTab",title:"Punti fiduciali",content:"Cerca e visualizza i punti fiduciali"},{element:".ipvTab",title:"Elenco Nazionale Valutatori Immobiliari",content:"Visualizza su mappa i Valutatori Immobiliari iscritti all'Elenco Nazionale"},{element:".poiTab",title:"Ricerca punti di interesse",content:"Cerca e visualizza su mappa i punti di interesse di un'area circoscritta"},{element:".apTab",title:"Ricerca annunci immobiliari",content:"Cerca e visualizza su mappa gli annunci immobiliari di un'area circoscritta"},{element:".leaflet-pm-draw",title:"Disegna e misura su mappa",placement:"left",content:"Disegna poligoni su mappa e ottieni superficie e distanze"},{element:".leaflet-pm-edit",title:"Modifica ed elimina i disegni su mappa",placement:"left",content:"Modifica, sposta o elimina i poligoni disegnati in precedenza"},{element:".saveTab",title:"Salva la mappa",content:"Salva la mappa su file per riutilizzarla successivamente"},{element:".loadTab",title:"Carica la mappa",content:"Carica la mappa da un file salvato in precedenza"},{element:".showHideTab",title:"Nascondi i controlli",content:"Nascondi i controlli su mappa per una migliore consultazione"},{element:".tourTab",title:"Riscopri le funzionalitÃ ",content:"Se lo desideri, puoi visualizzare nuovamente questo tour di presentazione cliccando qui"}]});u.init(),u.start(),u.goTo(0),$(o.SideBar).on("click","#forMapsTour"+o.id,(function(t){t.preventDefault(),u.restart()}))}o.linkForMaps&&$('<li class="linkForMapsTab"><a href="https://www.formaps.it" role="tab" title="STIMATRIX forMaps" target="_blank"><img src="https://www.formaps.it/Images/logo.png" style="width:30px;margin-top:5px;"></a></li>').appendTo(o.SideBar.find(".sidebar-tabs ul.forMapsInfo"))}$(o.SideBar).find(".sidebar-tabs ul.forMapsFunctions").append('<li class="'+e+'Tab"><a href="#'+e+"Pane"+t+'" role="tab" title="'+i+'">'+n+"</a></li>"),$(o.SideBar).find(".sidebar-content").append('<div class="sidebar-pane '+e+'Pane" id="'+e+"Pane"+t+'"></div>');var d=$("#"+e+"Pane"+t);d.append('<h1 class="sidebar-header">                                    '+i+'                                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>                                </h1>');var p=$('<div class="sidebar-pane-content"></div>');p.append(s),d.append(p),o.SideBar.sidebar()},n.prototype.mapDataSetStyle=function(t){t.data.setStyle((function(t){return{title:t.getProperty("title")||null,fillColor:t.getProperty("fill"),fillOpacity:t.getProperty("fillOpacity"),strokeColor:t.getProperty("stroke"),strokeOpacity:t.getProperty("strokeOpacity"),strokeWeight:t.getProperty("strokeWidth")}}))},n.prototype.caricaWMS=function(t,e,i,n){this.state.WMSOverlays||(this.state.WMSOverlays={});var a=e.sfondo,s=e.urlBase,o=e.title,r=e.internalName,l=e.key,h=e.minZoomLevel,c=e.crs?e.crs:"4326",u=e.tileSize?e.tileSize:256,d=e.maxScaleDenominator,p=e.version,f=e.styles?e.styles:"",m=this.guid();return this.state.WMSOverlays[m]={Id:m,Layers:l,Titolo:o,NomeInterno:r,MaxScaleDenominator:d,MinZoom:h,Opacity:50,Active:!1,Category:n,Styles:f},this.state.WMSOverlays[m].Overlay=a?L.tileLayer(s,{minZoom:h,maxZoom:19,tileSize:u,opacity:.5,zIndex:++this.overlayWMSZIndex}):L.tileLayer.wms(s,{version:p,layers:l,crs:this.getCrs(c),format:"image/png",transparent:!0,minZoom:h,maxZoom:19,tileSize:u,opacity:.5,styles:f,zIndex:++this.overlayWMSZIndex}),this.aggiungiLivelloElenco(t,this.state.WMSOverlays[m],i),m},n.prototype.aggiungiLivelloElenco=function(t,e,i){var n=this;$(i).append('<li>                                <div class="wms_input">                                    <input type="checkbox" value="'+e.Id+'" class="wms_check" id="wms_check'+e.Id+'">                                </div>                                <div class="wms_label">                                    <label>'+e.Titolo+(e.MaxScaleDenominator?'<small class="wms_scale" id="wms_scale'+e.Id+'" title="Zoom al livello minimo di visualizzazione"><span class="fas fa-search-plus"></span> 1:'+parseFloat(e.MaxScaleDenominator).toLocaleString("it")+"</small>":"")+'</label>                                    <div class="wms_opacita_container"><div id="wms_range'+e.Id+'" class="wms_opacita"></div>                                    </div>                                </div>                            </li>'),$("#wms_range"+e.Id).slider({min:0,max:100,value:[50],slide:function(t,i){e.Opacity=i.value,n.state.WMSOverlays[e.Id].Overlay.setOpacity(i.value/100)},change:function(t,i){e.Opacity=i.value,n.state.WMSOverlays[e.Id].Overlay.setOpacity(i.value/100)}}),$("#wms_check"+e.Id).on("change",(function(){n.toggleLayerWMS(t,$(this).val(),this.checked)})),$("#wms_scale"+e.Id).click((function(){t.setZoom(e.MinZoom),n.toggleLayerWMS(t,e.Id,!0),$("#wms_check"+e.Id).prop("checked","checked")}))},n.prototype.accendiLayerWMS=function(t,e,i){$.each(this.state.WMSOverlays,(function(n,a){a.NomeInterno==t&&($("#wms_check"+a.Id).prop("checked",e).change(),i&&$("#wms_range"+a.Id).slider("value",i))}))},n.prototype.toggleLayerWMS=function(t,e,i){var n=this.state.WMSOverlays[e];n.Active=i,i?(n.Overlay.setOpacity($("#wms_range"+n.Id).slider("option","value")/100),n.Overlay.addTo(t)):n.Overlay.removeFrom(t)},n.prototype.getLayerWMS=function(t,e){return this.state.WMSOverlays[e]},n.prototype.addMarker=function(t){var e,i,n=this,a=n.map,s={idIcona:"goccia_rossa.png",draggable:null,etichetta:"",denominazione:"Riferimento",provenienza:"",prezzo:null,url:"",superficie:null,numeroLocali:"",note:"",data:null,latLng:L.latLng(41.8856460823679,12.4608743837683),idRicerca:null,infoWindowOpened:!0,heading:0,pitch:0,idAnnuncio:null,provenienzaAnnuncio:"immobiliare.it"},o=(t=$.extend({},s,t),n.getIcona(t.idIcona));switch(o.Tipologia){case"testo":e=L.divIcon({className:"markerLabel markerLabel-"+o.Icona,iconSize:null,html:t.etichetta});break;case"immagine":e=L.icon({iconUrl:n.percorsoIcone+o.Icona,iconSize:[47,57],iconAnchor:[23,55]}),""!=t.etichetta&&(i=L.tooltip({permanent:!0,direction:"top",offset:L.point(0,-58),className:"forMapsTooltip"}).setContent(t.etichetta))}var r=L.marker(t.latLng,{draggable:null!=t.draggable?t.draggable:o.Trascinabile,title:t.denominazione,icon:e,pmIgnore:!0}).addTo(a);return i&&r.bindTooltip(i),n.state.Markers.push(r),r.id=n.getRandomInt(),r.markerIndex=n.state.Markers.length-1,r.idRicerca=t.idRicerca,r.data={etichetta:t.etichetta,icona:o.Icona,denominazione:t.denominazione,provenienza:t.provenienza,prezzo:t.prezzo,url:t.url,superficie:t.superficie,numeroLocali:t.numeroLocali,note:t.note,data:t.data,heading:t.heading,pitch:t.pitch,indirizzoRicercato:t.idRicerca?t.denominazione:"-",idAnnuncio:t.idAnnuncio,provenienzaAnnuncio:t.provenienzaAnnuncio},r.on("dragend",(function(t){if(n.infoWindow.isOpen()){n.cleanArInfoWindowTabsLoaded(this),n.setDatiInfoWindow(this);var e=this;setTimeout((function(){n.mostraOmbra(e,!0)}),100)}})),r.on("click",(function(t){n.mostraOmbra(r,!0),n.infoWindow.isOpen()?n.infoWindow.marker!=this?(n.cleanArInfoWindowTabsLoaded(this),n.setDatiInfoWindow(this)):(n.closeInfoWindow(this),n.mostraOmbra(r,!1)):n.openInfoWindow(this)})),t.infoWindowOpened&&$(window).width()>992&&r.fire("click"),r.on("contextmenu",(function(t){})),r.id},n.prototype.getIconList=function(t){var i=this,n="";return e.forEach((function(e,a,s){var o="";e.Icona==t&&(o="selected"),n+='<li class="'+o+'" data-icona="'+e.Icona+'" title="'+e.Denominazione+'">'+("immagine"==e.Tipologia?'<img src="'+i.percorsoIcone+e.Icona+'" alt="">':'<div class="markerLabel markerLabel-'+e.Icona+'">ICO</div>')+"</li>"})),n},n.prototype.getIcona=function(t){return e.find((function(e){return e.Icona==t}))},n.prototype.mostraOmbra=function(t,e){var i=this;if(t){var n=i.getIcona(t.data.icona),a=t.options.icon;switch(n.Tipologia){case"immagine":e?($.each(i.state.Markers,(function(e,n){n!=t&&null!=n&&i.mostraOmbra(n,!1)})),a.options.shadowUrl=i.percorsoIcone+"highlight.png"):a.options.shadowUrl="",t.setIcon(a);break;case"testo":e?($.each(i.state.Markers,(function(e,n){n!=t&&null!=n&&i.mostraOmbra(n,!1)})),$(t.getElement()).addClass("markerLabelShadow")):$(t.getElement()).removeClass("markerLabelShadow")}}},n.prototype.editMarker=function(t,e){e=$.extend({},{denominazione:t.data.denominazione,provenienza:t.data.provenienza,prezzo:t.data.prezzo,url:t.data.url,data:t.data.data,superficie:t.data.superficie,numeroLocali:t.data.numeroLocali,note:t.data.note,etichetta:t.data.etichetta,idIcona:t.data.icona,trascinabile:t.draggable},e);var i=this.getIcona(e.idIcona),n=this.getIconaImage(i);if("testo"==i.Tipologia&&""==e.etichetta)alert("Questa tipologia di icona prevede l'inserimento di un'etichetta");else{switch(t.unbindTooltip(),i.Tipologia){case"immagine":a=L.icon({iconUrl:this.percorsoIcone+i.Icona,iconSize:[48,60],iconAnchor:[24,58]}),t.setIcon(a),""!=e.etichetta&&t.bindTooltip(e.etichetta,{permanent:!0,direction:"top",offset:L.point(0,-56),className:"forMapsTooltip"});break;case"testo":var a=L.divIcon({className:"markerLabel markerLabel-"+i.Icona,iconSize:null,html:e.etichetta});t.setIcon(a)}this.infoWindow.setTitle(this.getInfoWindowTitle(n,e.denominazione)),t.data.etichetta=e.etichetta,t.data.denominazione=e.denominazione,t.data.provenienza=e.provenienza,t.data.prezzo=e.prezzo,t.data.url=e.url,t.data.data=e.data,t.data.superficie=e.superficie,t.data.numeroLocali=e.numeroLocali,t.data.note=e.note,t._icon.title=e.denominazione,t.data.icona=i.Icona,this.mostraOmbra(t,!0),e.trascinabile?t.dragging.enable():t.dragging.disable()}},n.prototype.removeMarker=function(t){var e=this;if(null!=e.state.Markers[t]){var i=e.state.Markers[t].idRicerca;e.state.Markers[t].removeFrom(e.map),e.state.Markers[t]=null,e.infoWindow.marker=null,e.closeInfoWindow(),i&&0==$.map(e.state.Markers,(function(t,e){if(t&&t.idRicerca==i)return t})).length&&($("#"+i).remove(),$.each(e.state.Ricerche,(function(t,n){n&&n.id===i&&(e.state.Ricerche[t]=null)})))}},n.prototype.removeAllMarkers=function(t){confirm("Vuoi davvero rimuovere "+(t?'la ricerca "'+$("#"+t+" i").html()+'" e il rispettivo riferimento':"tutti i riferimenti")+" dalla mappa?")&&this.removeMarkers(t)},n.prototype.removeMarkers=function(t){var e=this;$.each(e.state.Markers,(function(i,n){n&&(t?n.idRicerca==t&&e.removeMarker(i):e.removeMarker(i))}))},n.prototype.aggiungiRicerca=function(t,e){var i=this;i.ForMapsSearch&&($.each(i.state.Markers,(function(t,e){})),$("#forMapsSideBar"+i.id+" .forMapsSearch_ResultsList").prepend('<div id="'+t+'" class="forMapsSearchResult"><i title="Visualizza il risultato sulla mappa">'+e+'</i><span class="far fa-trash-alt" id="'+t+'_delete" title="Rimuovi i riferimenti dalla mappa"></span></div>'),i.state.Ricerche.push({id:t,parametro:e}),$("#"+t+"_delete").on("click",(function(){i.removeAllMarkers(t)})),$("#"+t+" i").on("click",(function(){var e=i.getmarkerByIdRicerca(t);$(window).width()>992&&e.fire("click"),i.map.flyTo(e.getLatLng())})),$("#"+t).on("mouseover",(function(){})),$("#"+t).on("mouseout",(function(){})))},n.prototype.getmarkerByIdRicerca=function(t){var e;return $.each(this.state.Markers,(function(i,n){n&&n.idRicerca==t&&(e=n)})),e},n.prototype.markerBounce=function(t,e){t&&(e?t.bounce():t.stopBouncing())},n.prototype.addInfoWindow=function(){var t=this,e=t.id,i=t.map;if(null==t.infoWindow){var n=document.createElement("div");n.id="fmr_infowindow"+e,n.className="fmr_infowindow",n.innerHTML=t.getInfoWindowContent(),$(i.getContainer()).parent().prepend(n),t.infoWindow=$(n),$(".immobile_tabs").tabs({heightStyle:"auto"}),$(".valoriOmi_tabs").tabs(),$("#fmr_infowindow"+e+" .fmr_estrattoMappa_button"+e).button(),$("#fmr_infowindow"+e+" .fmr_estrattoMappa_button"+e).button("option","disabled",!0),$("form input[type=radio][name=fmr_datiCatastaliSTIMATRIXCityRadio"+e+"]").change((function(){$("form input[type=radio][name=fmr_datiCatastaliSTIMATRIXCityRadio"+e+"]").val([$(this).val()]),t.setDatiCatastaliSTIMATRIXCityUrl(t.infoWindow.marker,i.getZoom())})),$("#annunciImmobiliariRadius"+e).select2({minimumResultsForSearch:-1}),$(document).on("click","#fmr_forMcaBottoneInizia_"+e,(function(e){$(this).hide(),t.infoWindow.marker.data.forMca={},t.infoWindow.marker.data.forMca.comparabili=[],t.setForMcaInfoWindow(t.infoWindow.marker)})),$(document).on("click","#fmr_forMcaBottoneCalcola_"+e,(function(i){i.preventDefault();var n={},a=t.infoWindow.marker;a&&(n.Subject={Denominazione:a.data.denominazione,Provenienza:a.data.provenienza,Data:a.data.data,Prezzo:a.data.prezzo,Url:a.data.url,Superficie:a.data.superficie,NumeroLocali:a.data.numeroLocali,Note:a.data.note,IdAnnuncio:a.data.idAnnuncio,Coordinate:a.getLatLng()});var s=[];$.each($(".fmr_forMcaCheckbox:checked","#fmr_forMcaComparabili_"+e),(function(e,i){var n=$(this).val(),a=t.state.Markers.filter((function(t){return t&&t.id==n}))[0];s.push({Denominazione:a.data.denominazione,Provenienza:a.data.provenienza,Data:a.data.data,Prezzo:a.data.prezzo,Url:a.data.url,Superficie:a.data.superficie,NumeroLocali:a.data.numeroLocali,Note:a.data.note,IdAnnuncio:a.data.idAnnuncio,Coordinate:a.getLatLng()})})),n.Comparabili=s;var o=!0;0==n.Comparabili.length&&(confirm("Non hai selezionato comparabili per la valutazione.\nVuoi proseguire con solo l'immobile oggetto di stima?")||(o=!1)),o&&($("#fmr_forMcaDati_"+e).val(JSON.stringify(n)),$("#fmr_forMcaForm_"+e).submit(),console.log(n))})),$(document).on("click","#marker_remove_button"+e,(function(e){var i=$(this).data("markerindex");t.removeMarker(i)})),$("#fmr_editDenominazione"+e).on("change keyup",(function(e){o(t.infoWindow.marker)})),$("#fmr_editProvenienza"+e).on("change",(function(e){o(t.infoWindow.marker)}));var a={scale:2,padFractionalZeros:!0,signed:!1,mask:Number,thousandsSeparator:"."},s={mask:Date,pattern:"d/`m/`Y",blocks:{d:{mask:IMask.MaskedRange,from:1,to:31,maxLength:2},m:{mask:IMask.MaskedRange,from:1,to:12,maxLength:2},Y:{mask:IMask.MaskedRange,from:1900,to:9999}},format:function(t){if(t instanceof Date){var e=t.getDate(),i=t.getMonth()+1;return e<10&&(e="0"+e),i<10&&(i="0"+i),[e,i,t.getFullYear()].join("/")}return""},parse:function(t){if(t){var e=t.split("/");return new Date(e[2],e[1]-1,e[0])}},autofix:!0};function o(i){var n=$("#fmr_editDenominazione"+e).val(),a=$("#fmr_editProvenienza"+e).val(),s=t.infoWindow.editPrezzoMask.typedValue,o=$("#fmr_editUrl"+e).val(),r=t.infoWindow.editDataMask.typedValue,l=t.infoWindow.editSuperficieMask.typedValue,h=$("#fmr_editNumeroLocali"+e).val(),c=$("#fmr_editNote"+e).val(),u=$("#fmr_editEtichetta"+e).val(),d=$("#forMapsIconList"+e+" li.selected").data("icona"),p=$("#fmr_etichettaTrascinabile"+e).prop("checked");t.editMarker(i,{denominazione:n,provenienza:a,etichetta:u,idIcona:d,trascinabile:p,prezzo:s,url:o,data:r,superficie:l,numeroLocali:h,note:c})}t.infoWindow.editPrezzoMask=IMask(document.getElementById("fmr_editPrezzo"+e),a),t.infoWindow.editDataMask=IMask(document.getElementById("fmr_editData"+e),s),t.infoWindow.editSuperficieMask=IMask(document.getElementById("fmr_editSuperficie"+e),a),$("#fmr_editPrezzo"+e).on("change keyup",(function(e){o(t.infoWindow.marker),t.setForMcaInfoWindow(t.infoWindow.marker)})),$("#fmr_editUrl"+e).on("change keyup",(function(e){o(t.infoWindow.marker),t.setEditUrlLink($(this).val())})),$("#fmr_EditUrlLink"+e).on("click",(function(t){"#"==$(this).prop("href")&&t.preventDefault()})),$("#fmr_editData"+e).on("change keyup",(function(e){o(t.infoWindow.marker)})),$("#fmr_editSuperficie"+e).on("change keyup",(function(e){o(t.infoWindow.marker)})),$("#fmr_editNumeroLocali"+e).on("change keyup",(function(e){o(t.infoWindow.marker)})),$("#fmr_editNote"+e).on("change keyup",(function(e){o(t.infoWindow.marker)})),$("#fmr_editEtichetta"+e).on("change keyup",(function(e){o(t.infoWindow.marker)})),$("#fmr_etichettaTrascinabile"+e).on("change",(function(e){o(t.infoWindow.marker)})),$("#forMapsIconList"+e).on("click","li",(function(i){$("#forMapsIconList"+e+" li").each((function(){$(this).removeClass("selected")})),$(this).addClass("selected"),o(t.infoWindow.marker)})),t.infoWindow.forMapsTabs({titolo:"Dettagli riferimento",tabChanged:function(){t.infoWindow.selectedTab=this.hash,t.setDatiInfoWindow(t.infoWindow.marker)},close:function(){t.infoWindow.streetViewArrow&&t.infoWindow.streetViewArrow.remove(),t.mostraOmbra(t.infoWindow.marker,!1)}})}t.evidenziaElemento()},n.prototype.openInfoWindow=function(t){this.infoWindow.open(),this.cleanArInfoWindowTabsLoaded(t),this.setDatiInfoWindow(t)},n.prototype.closeInfoWindow=function(){this.infoWindow.close(),this.infoWindow.marker=null},n.prototype.getInfoWindowTitle=function(t,e){return t+' <span class="dettagliRiferimento" title="Dettagli '+(""!=e?e:"riferimento")+'">Dettagli '+(""!=e?e:"riferimento")+"</span>"},n.prototype.cleanArInfoWindowTabsLoaded=function(e){$.each($(".forMapsTabsMenu>ul>li>a",this.infoWindow),(function(e,i){var n=$(i).attr("href").split("_")[0];t[n]=!1}))},n.prototype.getDatiCatastaliSTIMATRIXCity=function(t){var e=this.id;return'<div class="fmr_datiCatastaliSTIMATRIXCity">                    <h2>STIMATRIXCity<sup>&reg;</sup></h2>                    <div class="fmr_datiCatastaliSTIMATRIXCityContent">                        <div class="fmr_datiCatastaliSTIMATRIXCityErrore"></div>                        <form>                            <ul>                                <li><div><input type="radio" value="ESMCarrelloEstrattoMappa" id="ESMCarrelloEstrattoMappa_'+t+e+'" name="fmr_datiCatastaliSTIMATRIXCityRadio'+e+'" checked="checked"><label for="ESMCarrelloEstrattoMappa_'+t+e+'">Estratto Mappa</label></div></li>                                <li><div><input type="radio" value="VISCarrelloVisuraTerreni" id="VISCarrelloVisuraTerreni_'+t+e+'" name="fmr_datiCatastaliSTIMATRIXCityRadio'+e+'"><label for="VISCarrelloVisuraTerreni_'+t+e+'">Visura Terreno</label></div></li>                                <li><div><input type="radio" value="VISCarrelloVisuraFabbricati" id="VISCarrelloVisuraFabbricati_'+t+e+'" name="fmr_datiCatastaliSTIMATRIXCityRadio'+e+'"><label for="VISCarrelloVisuraFabbricati_'+t+e+'">Visura Fabbricato</label></div></li>                                <li><div><input type="radio" value="ELPCarrelloElaboratoPlanimetrico" id="ELPCarrelloElaboratoPlanimetrico_'+t+e+'" name="fmr_datiCatastaliSTIMATRIXCityRadio'+e+'"><label for="ELPCarrelloElaboratoPlanimetrico_'+t+e+'">Elaborato planimetrico</label></div></li>                                <li><div><input type="radio" value="ELSCarrelloElencoSubalterni" id="ELSCarrelloElencoSubalterni_'+t+e+'" name="fmr_datiCatastaliSTIMATRIXCityRadio'+e+'"><label for="ELSCarrelloElencoSubalterni_'+t+e+'">Elenco subalterni</label></div></li>                                <li><div><input type="radio" value="RICCarrelloRicercaImmobiliTerreni" id="RICCarrelloRicercaImmobiliTerreni_'+t+e+'" name="fmr_datiCatastaliSTIMATRIXCityRadio'+e+'"><label for="RICCarrelloRicercaImmobiliTerreni_'+t+e+'">Ricerca compravendite terreni</label></div></li>                                <li><div><input type="radio" value="RICCarrelloRicercaImmobiliFabbircati" id="RICCarrelloRicercaImmobiliFabbricati_'+t+e+'" name="fmr_datiCatastaliSTIMATRIXCityRadio'+e+'"><label for="RICCarrelloRicercaImmobiliFabbricati_'+t+e+'">Ricerca compravendite fabbricati</label></div></li>                                <li><div><input type="radio" value="IUICarrelloIntestati-Terreni" id="IUICarrelloIntestati-Terreni_'+t+e+'" name="fmr_datiCatastaliSTIMATRIXCityRadio'+e+'"><label for="IUICarrelloIntestati-Terreni_'+t+e+'">Proprietari terreni</label></div></li>                                <li><div><input type="radio" value="IUICarrelloIntestati-Fabbricati" id="IUICarrelloIntestati-Fabbricati_'+t+e+'" name="fmr_datiCatastaliSTIMATRIXCityRadio'+e+'"><label for="IUICarrelloIntestati-Fabbricati_'+t+e+'">Proprietari fabbricati</label></div></li>                            </ul>                            <a href="#" title="" target="_blank" class="fmr_estrattoMappa_button'+e+' fmr_estrattoMappa_button">Richiedi</a>                        </form>                    </div>                </div>'},n.prototype.getInfoWindowContent=function(){var t=this.id,e='<nav class="forMapsTabsMenu">                                    <ul>                                        <li><a href="#immobile_'+t+'" class="forMapsTabsActive">Immobile</a></li>                                        <li><a href="#datiCatastali_'+t+'">Catasto</a></li>                                        <li><a href="#valoriOmi_'+t+'">OMI</a></li>                                        <li><a href="#datiComune_'+t+'">Comune</a></li>                                        <li><a href="#istat_'+t+'">Sezione censuaria</a></li>\t\t\t                            <li><a href="#posizione_'+t+'">Posizione</a></li>                                        <li><a href="#streetView_'+t+'">Street view</a></li>                                        <li><a href="#icona_'+t+'">Icona</a></li>                                        <li><a href="#condividi_'+t+'">Condividi</a></li>                                    </ul>                                </nav>                                <div class="forMapsTabsFooter">                                    <span id="marker_remove_button'+t+'" class="marker_remove_button far fa-trash-alt" data-markerindex="" title="Rimuovi il riferimento dalla mappa"></span>                                    <div><a href="https://www.formaps.it/" class="fmr_latitudineLongitudineLink" target="_blank" title="Condividi la posizione di questo riferimento"><span class="fas fa-map-marker-alt" style="margin-right:5px;"></span> <span class="fmr_latitudineLongitudine"></span></a></div>                                    <div class="indicazioni"><a class="fmr_indicazioniLink" href="https://www.google.com/maps/dir" target="_blank" title="Indicazioni stradali su Google Maps"><span class="fas fa-directions"></span></a></div>                                </div>';return e+='<div id="immobile_'+t+'" class="fmr_immobile forMapsTabsActive">                                <h2>Informazioni immobile</h2>                                <div class="immobile_tabs">\t\t                            <ul>\t\t\t                            <li><a href="#immobileInformazioni'+t+'">Immobile</a></li>\t\t\t                            <li><a href="#immobileCaratteristiche'+t+'">Caratteristiche</a></li>                                        <li><a href="#immobileNote'+t+'">Note</a></li>\t\t                            </ul>                                    <div id="immobileInformazioni'+t+'">                                        <ul>                                            <li><label>Denominazione</label><input type="text" value="" id="fmr_editDenominazione'+t+'" class="fmr_editDenominazione"></li>                                            <li>                                                <label>Provenienza</label>                                                <select id="fmr_editProvenienza'+t+'" class="fmr_editProvenienza">                                                    <option value="">Provenienza non definita</option>                                                    <option value="stima">Stima</option>                                                    <option value="compravendita">Compravendita</option>                                                    <option value="annuncioVendita">Annuncio in vendita</option>                                                    <option value="annuncioAsta">Annuncio in asta</option>                                                    <option value="annuncioAffitto">Annuncio in affitto</option>                                                </select>                                            </li>                                            <li><label>Prezzo (â¬)</label><input type="text" value="" id="fmr_editPrezzo'+t+'" class="fmr_editPrezzo"></li>                                            <li><label>Sito web</label><div class="forMapsInputLink"><input type="text" value="" id="fmr_editUrl'+t+'" class="fmr_editUrl"><a href="#" id="fmr_EditUrlLink'+t+'" title="Vai all\'indirizzo" target="_blank"><span class="fas fa-external-link-alt"></span></a></li>                                        </ul>                                    </div>                                    <div id="immobileCaratteristiche'+t+'">                                        <ul>                                            <li><label>Data</label><input type="text" value="" id="fmr_editData'+t+'" class="fmr_editData"></li>                                            <li><label>Superficie (mÂ²)</label><input type="text" value="" id="fmr_editSuperficie'+t+'" class="fmr_editSuperficie"></li>                                            <li><label>Numero locali</label><input type="text" value="" id="fmr_editNumeroLocali'+t+'" class="fmr_editNumeroLocali"></li>                                        </ul>                                    </div>                                    <div id="immobileNote'+t+'">                                        <textarea maxlength="500" style="width:100%;height:100%;" id="fmr_editNote'+t+'"></textarea>                                    </div>                                </div>                                \x3c!--<div id="fmr_forMca_'+t+'" class="fmr_forMca">                                    <h2>STIMATRIX forMCA</h2>                                    <div class="fmr_forMcaContent">                                        <p id="fmr_forMcaLabel_'+t+'" class="fmr_forMcaLabel"></p>                                        <button id="fmr_forMcaBottoneInizia_'+t+'" class="forMapsButton forMapsButtonSmall">Valuta questo immobile</button>                                        <div id="fmr_forMcaValutazione_'+t+'" class="fmr_forMcaValutazione">                                            <div id=fmr_forMcaComparabili_'+t+' class="fmr_forMcaComparabili"></div>                                            <form id="fmr_forMcaForm_'+t+'" action="/ws/Test" target="_blank" method="post">                                                <input type="hidden" id="fmr_forMcaDati_'+t+'" name="forMcaDati">                                                <button type="submit" id="fmr_forMcaBottoneCalcola_'+t+'" class="forMapsButton forMapsButtonLg">Calcola l\'MCA su forMCA.it</button>                                            </form>                                        </div>                                    </div>                                </div>--\x3e'+this.getDatiCatastaliSTIMATRIXCity("immobile")+"</div>",e+='<div id="datiCatastali_'+t+'" class="fmr_datiCatastali">                                <div class="fmr_datiCatastaliElenco">                                    <h2>Dati catastali</h2>                                    <div class="fmr_datiCatastaliLoading"></div>                                    <ul>                                        \x3c!--<li><label>Provincia</label><span class="fmr_provincia">-</span></li>--\x3e                                        <li><label>Provincia</label><span class="fmr_idProvincia">-</span></li>                                        <li><label>Comune</label><span class="fmr_comune">-</span></li>                                        <li><label>Codice catastale</label><span class="fmr_idComune">-</span></li>                                        <li><label>Sezione</label><span class="fmr_sezione">-</span></li>                                        <li><label>Foglio</label><span class="fmr_foglio">-</span></li>                                        <li><label>Allegato</label><span class="fmr_allegato">-</span></li>                                        <li><label>Particella</label><span class="fmr_particella">-</span></li>                                    </ul>                                    \x3c!--<button type="button" id="mostraParticella'+t+"\">Mostra l'ingombro della particella</button>--\x3e                                </div>"+this.getDatiCatastaliSTIMATRIXCity("datiCatastali")+"</div>",e+='<div id="valoriOmi_'+t+'" class="valoriOmi">                                <h2>Valori OMI 2018/2</h2>                                <ul>                                    <li><label>Comune</label><span class="fmr_zonaOMIComune">-</span></li>                                    <li><label>Zona OMI</label><span class="fmr_zonaOMI">-</span></li>                                </ul>                                <div class="valoriOmi_tabs">\t\t                            <ul>\t\t\t                            <li><a href="#valoriOmiValoriMercato'+t+'">Prezzo <small>(â¬/mq)</small></a></li>\t\t\t                            <li><a href="#valoriOmiValoriLocazione'+t+'">Reddito <small>(â¬/mq x mese)</small></a></li>                                        <li><a href="#valoriOmiSaggioAnnuo'+t+'">Saggio annuo <small>(i=R/P)</small></a></li>\t\t                            </ul>                                    <div id="valoriOmiValoriMercato'+t+'">                                        <table class=".valoriMercato">                                            <thead>                                                <tr><th style="width:40%">Tipologia edilizia</th><th style="width:30%">Stato</th><th class="valoriOmiValori">Min</th><th class="valoriOmiValori">Max</th></tr>                                            </thead>                                            <tbody></tbody>                                        </table>                                    </div>                                    <div id="valoriOmiValoriLocazione'+t+'">                                        <table class=".valoriLocazione">                                            <thead>                                                <tr><th style="width:40%">Tipologia edilizia</th><th style="width:30%">Stato</th><th class="valoriOmiValori">Min</th><th class="valoriOmiValori">Max</th></tr>                                            </thead>                                            <tbody></tbody>                                        </table>                                    </div>                                    <div id="valoriOmiSaggioAnnuo'+t+'">                                        <table class=".saggioAnnuo">                                            <thead>                                                <tr><th style="width:40%">Tipologia edilizia</th><th style="width:30%">Stato</th><th class="valoriOmiValori">Min</th><th class="valoriOmiValori">Max</th></tr>                                            </thead>                                            <tbody></tbody>                                        </table>                                    </div>                                </div>                            </div>',e+='<div id="datiComune_'+t+'" class="datiComune">                                <h2>Dati comune</h2>                                <ul>                                    <li><label>Denominazione</label><span class="fmr_denominazioneComune">-</span></li>                                    <li><label>Provincia</label><span class="fmr_provinciaComune">-</span></li>                                    <li><label>Codice catastale</label><span class="fmr_codiceCatastaleComune">-</span></li>                                    <li><label>Codice Istat</label><span class="fmr_codiceIstatComune">-</span></li>                                    <li><label>Popolazione</label><span class="fmr_popolazioneComune">-</span></li>                                    <li><label>Tribunale di competenza</label><span class="fmr_tribunaleCompetenza">-</span></li>                                </ul>                                <h2>Classificazione sismica al 2015</h2>                                <ul>                                    <li><label>Zona</label><span class="fmr_classificazioneSismica">-</span></li>                                </ul>                                <h2>Accordi Territoriali</h2>                                <table id="fmr_AccordiTerritoriali_risultati'+t+'" class="forMapsRicercaRisultati fmr_AccordiTerritoriali_risultati"><thead><tr><th>Data stipula</th><th>Comune ad alta intensitÃ  abitativa</th><th>Accordo Territoriale</th></tr></thead><tbody></tbody></table>                                <h2>Evoluzione demografica</h2>                                <span class="fmr_evoluzioneDemograficaComune"></span>                            </div>',e+='<div id="istat_'+t+'" class="fmr_istat">                                <h2>Dati Istat censimento 2011</h2>                                <ul id="datiIstat'+t+'"></ul>                            </div>',e+='<div id="posizione_'+t+'">                                <h2>Indirizzo</h2><ul>                                    <li><label>Ricercato</label><span class="fmr_indirizzoRicercato">-</span></li>                                    <li><label>Individuato</label><span class="fmr_indirizzoAttuale">-</span></li>                                </ul>                                <h2>Coordinate</h2>                                <ul>                                    <li><label>Latitudine</label><span class="fmr_latitudine">-</span></li>                                    <li><label>Longitudine</label><span class="fmr_longitudine">-</span></li>                                </ul>                                <h2>Indicazioni stradali</h2>                                <ul>                                    <li><label>Google Maps</label><a class="fmr_indicazioniLink" href="https://www.google.com/maps/dir" target="_blank" title="Indicazioni stradali su Google Maps"><span class="fas fa-directions"></span> Ottieni le indicazioni su Google Maps</a></li>                                </ul>                            </div>',e+='<div id="streetView_'+t+'">                                <div id="streetViewPano_'+t+'" style="height:100%;"></div>                                <div id="streetViewNonDisponibile_'+t+'" style="display:none;text-align:center;padding:5px;border:1px solid red;background-color:rgba(255,0,0,.1);color:red;"><p>Street view non disponibile per questa posizione.</p><p>Prova a spostare il riferimento piÃ¹ vicino ad una strada.</p></div>                            </div>',(e+='<div id="icona_'+t+'" class="fmr_iconaRiferimento">                                <h2>Icona riferimento</h2>                                <ul>                                    <li><label>Etichetta</label><input type="text" value="" id="fmr_editEtichetta'+t+'" class="fmr_editEtichetta"></li>                                    <li><label>Trascinabile</label><input type="checkbox" id="fmr_etichettaTrascinabile'+t+'" class="fmr_etichettaTrascinabile"></li>                                    <li>                                        <label>Stile icona</label><ul id="forMapsIconList'+t+'" class="forMapsIconList">'+this.getIconList()+'</ul></li>                                </ul>                                \x3c!--<button id="marker_save_button'+t+'" data-markerindex="">Salva</button>--\x3e                            </div>')+'<div id="condividi_'+t+'">                                <h2>Condividi la posizione</h2>                                <ul>                                    <li><label>Email</label><a id="fmr_shareByEmail'+t+'" href="#" title="Condividi la posizione del riferimento via Email" target="_blank"> <i class="far fa-envelope"></i> Condividi via email</a></li>                                    <li><label>WhatsApp</label><a id="fmr_shareByWhatsApp'+t+'" href="#" title="Condividi la posizione del riferimento con WhatsApp" target="_blank"> <i class="fab fa-whatsapp"></i> Condividi con WhatsApp</a></li>                                    <li><label>Link</label><a id="fmr_shareByLink'+t+'" href="#" title="Condividi la posizione del riferimento tramite url" target="_blank"> <i class="fas fa-link"></i> Condividi tramite url</a></li>                                    <li><label>QR code</label><div id="fmr_shareByQR'+t+'" style="width:150px;"></div></li>                                </ul>                            </div>'},n.prototype.setDatiInfoWindow=function(e){var i=this.id;this.infoWindow.marker=e;var n=this.getIcona(e.data.icona),a=this.getIconaImage(n);this.infoWindow.setTitle(this.getInfoWindowTitle(a,e.data.denominazione));var s=this.infoWindow.selectedTab?this.infoWindow.selectedTab.split("_")[0]:"#immobile",o=e.getLatLng().lat,r=e.getLatLng().lng;if($("#fmr_infowindow"+i+" .fmr_latitudineLongitudine").html(o+", "+r),$("#fmr_infowindow"+i+" .fmr_latitudineLongitudineLink").prop("href","https://www.formaps.it/?mappa.coordinate="+o+","+r),$("#fmr_infowindow"+i+" .fmr_indicazioniLink").prop("href","https://www.google.com/maps/dir/?api=1&destination="+o+","+r),$("#forMapsIconList"+i).html(this.getIconList(e.data.icona)),$("#fmr_editDenominazione"+i).val(e.data.denominazione),$("#fmr_editProvenienza"+i).val(e.data.provenienza),this.infoWindow.editPrezzoMask.typedValue=e.data.prezzo?e.data.prezzo:null,$("#fmr_editUrl"+i).val(e.data.url),this.setEditUrlLink(e.data.url),this.infoWindow.editDataMask.typedValue=e.data.data?e.data.data:null,this.infoWindow.editSuperficieMask.typedValue=e.data.superficie?e.data.superficie:null,$("#fmr_editNumeroLocali"+i).val(e.data.numeroLocali),$("#fmr_editNote"+i).val(e.data.note),$("#fmr_editEtichetta"+i).val(e.data.etichetta),$("#fmr_etichettaTrascinabile"+i).prop("checked",e.dragging.enabled()),$("#marker_remove_button"+i).data("markerindex",e.markerIndex),this.infoWindow.streetViewArrow&&this.infoWindow.streetViewArrow.remove(),!t[s])switch(s){case"#immobile":this.setDatiCatastaliInfoWindow(e),this.setForMcaInfoWindow(e);break;case"#datiCatastali":this.setDatiCatastaliInfoWindow(e);break;case"#valoriOmi":this.setValoriOmiInfoWindow(o,r);break;case"#datiComune":this.setDatiComuneInfoWindow(o,r);break;case"#istat":this.setDatiIstatInfoWindow(o,r);break;case"#posizione":this.getMarkerCurrentAddress(e),$("#fmr_infowindow"+i+" .fmr_indirizzoRicercato").html(e.data.indirizzoRicercato),$("#fmr_infowindow"+i+" .fmr_latitudine").html(o),$("#fmr_infowindow"+i+" .fmr_longitudine").html(r);break;case"#streetView":this.setStreetViewInfoWindow(e);break;case"#icona":this.setArInfoWindowTabsLoadedTrue("#icona");break;case"#condividi":$("#fmr_shareByEmail"+i).prop("href","mailto:?body=https://www.formaps.it?mappa.coordinate="+o+","+r+"&subject=Mappa creata con STIMATRIX forMaps"),$("#fmr_shareByWhatsApp"+i).prop("href","https://"+(this.mobileCheck()?"api":"web")+".whatsapp.com/send?text="+encodeURIComponent("https://www.formaps.it/?mappa.coordinate="+o+","+r)),$("#fmr_shareByLink"+i).prop("href","https://www.formaps.it/?mappa.coordinate="+o+","+r),$("#fmr_shareByQR"+i).html("").qrcode({text:"https://www.formaps.it/?mappa.coordinate="+o+","+r,width:128,height:128})}},n.prototype.setArInfoWindowTabsLoadedTrue=function(e){t[e]=!0},n.prototype.setDatiComuneInfoWindow=function(t,e){var i=this,n=i.id,a="https://www.formaps.it/WS/Comuni/GetDatiComune?latitudine="+t+"&longitudine="+e;$("#fmr_infowindow"+n+" .fmr_denominazioneComune").html("-"),$("#fmr_infowindow"+n+" .fmr_provinciaComune").html("-"),$("#fmr_infowindow"+n+" .fmr_codiceIstatComune").html("-"),$("#fmr_infowindow"+n+" .fmr_codiceCatastaleComune").html("-"),$("#fmr_infowindow"+n+" .fmr_popolazioneComune").html("-"),$("#fmr_infowindow"+n+" .fmr_classificazioneSismica").html("-"),$("#fmr_infowindow"+n+" .fmr_tribunaleCompetenza").html("-"),$("#fmr_infowindow"+n+" .fmr_evoluzioneDemograficaComune").html("Non disponibile"),$("tbody","#fmr_AccordiTerritoriali_risultati"+n).html('<td colspan="3" style="text-align:center">Non disponibili</td>'),$.ajax({url:a,dataType:"jsonp",contentType:"application/json",context:this}).done((function(t){if($("#fmr_infowindow"+n+" .fmr_denominazioneComune").html(null!=t.Denominazione?t.Denominazione:"-"),$("#fmr_infowindow"+n+" .fmr_provinciaComune").html(null!=t.Provincia?t.Provincia:"-"),$("#fmr_infowindow"+n+" .fmr_codiceIstatComune").html(null!=t.CodiceIstat?t.CodiceIstat:"-"),$("#fmr_infowindow"+n+" .fmr_codiceCatastaleComune").html(null!=t.CodiceCatastale?t.CodiceCatastale:"-"),$("#fmr_infowindow"+n+" .fmr_popolazioneComune").html(null!=t.Popolazione?t.Popolazione:"-"),$("#fmr_infowindow"+n+" .fmr_classificazioneSismica").html(null!=t.ClassificazioneSismica?t.ClassificazioneSismica:"-"),$("#fmr_infowindow"+n+" .fmr_tribunaleCompetenza").html(null!=t.TribunaleCompetenza?t.TribunaleCompetenza:"-"),$("#fmr_infowindow"+n+" .fmr_evoluzioneDemograficaComune").html(null!=t.EvoluzioneDemograficaImgUrl?'<a href="'+t.EvoluzioneDemograficaUrl+'" title="Visualizza la sezione dedicata su Wikipedia" target="_blank"><img class="datiComune_EvoluzioneDemografica" src="'+t.EvoluzioneDemograficaImgUrl+'" alt="Evoluzione demografica" /></a>':"Non disponibile"),t.AccordiTerritoriali&&t.AccordiTerritoriali.length>0){var e=[];$.each(t.AccordiTerritoriali,(function(t,i){e.push("<tr>                                                <td>"+i.DataStipula+"</td>                                                <td>"+(i.Cipe?'<span class="fas fa-check"></span>':"")+'</td>                                                <td><a href="https://www.formaps.it/ws/AccordiTerritoriali/DownloadAccordoTerritoriale/'+i.Id+'" title="Scarica l\'accordo territoriale" target="_blank">'+i.Titolo+"</a></td>                                            </tr>")})),$("tbody","#fmr_AccordiTerritoriali_risultati"+n).html(e.join(""))}i.setArInfoWindowTabsLoadedTrue("#datiComune")})).fail((function(t,e,i){console.log(i)}))},n.prototype.getDatiCatastali=function(t,e,i,n){var a=this;null==i&&(i=!1);var s="https://wms.cartografia.agenziaentrate.gov.it/inspire/ajax/ajax.php?op=getDatiOggetto&lon="+e+"&lat="+t+"&callback=?";i&&(s="https://wcf.stimatrixcity.it/daticatastali.svc/daticatastaliget/?latitudine="+t+"&longitudine="+e);var o={};$.ajax({url:s,dataType:"jsonp",contentType:"application/json",context:this,success:function(s){var r,l,h,c,u,d,p,f=s.TIPOLOGIA;o.tipologia=f,i||"PARTICELLA"==f?(i?(r=s.IdProvincia,l=s.Comune,h=s.IdComune,c=s.Sezione,u=s.Foglio,d=s.Allegato,p=s.Particella):(r=s.SIGLA_PROV,l=s.DENOM.split(" (")[0],h=s.COD_COMUNE,c=s.SEZIONE,u=s.FOGLIO,d=s.ALLEGATO&&"null"!=s.ALLEGATO?s.ALLEGATO:"",p=s.NUM_PART)," "==c&&(c=""),o.result="ok",o.idProvincia=r,o.comune=l,o.idComune=h,o.sezione=c,o.foglio=u,o.allegato=d,o.particella=p,$.ajax({url:"https://www.formaps.it/WS/DatiCatastali/SetParticella?IdComune="+h+"&Comune="+l+"&Sezione="+c+"&Foglio="+u+"&Particella="+p+"&Centroide="+t+","+e+"&GeoJson=",dataType:"jsonp",contentType:"application/json"}).done((function(t){})),n(o)):null==f?a.getDatiCatastali(t,e,!0,n):(o.result="Non &egrave; stato possibile recuperare i dati dal database dell'Agenzia delle Entrate. Il riferimento &egrave; stato posizionato su: "+("undefined"==f?"NON ACCATASTATO":f),n(o))},error:function(s,r,l){i?(o.result="Non &egrave; stato possibile recuperare i dati dal database dell'Agenzia delle Entrate. Riposiziona il riferimento o riprova pi&ugrave; tardi.",n(o)):a.getDatiCatastali(t,e,!0,n)}})},n.prototype.setDatiCatastaliInfoWindow=function(t,e){var i=this,n=i.id,a=i.map,s=t.getLatLng().lat,o=t.getLatLng().lng;$("#fmr_infowindow"+n+" .fmr_idProvincia").html("-"),$("#fmr_infowindow"+n+" .fmr_comune").html("-"),$("#fmr_infowindow"+n+" .fmr_idComune").html("-"),$("#fmr_infowindow"+n+" .fmr_sezione").html("-"),$("#fmr_infowindow"+n+" .fmr_foglio").html("-"),$("#fmr_infowindow"+n+" .fmr_allegato").html("-"),$("#fmr_infowindow"+n+" .fmr_particella").html("-"),$("#fmr_infowindow"+n+" .fmr_datiCatastaliLoading").html('<span class="fas fa-spinner fa-pulse"></span> Caricamento dati dal database dell\'Agenzia delle Entrate.'),i.getDatiCatastali(s,o,!1,(function(e){"ok"==e.result?($("#fmr_infowindow"+n+" .fmr_idProvincia").html(e.idProvincia),$("#fmr_infowindow"+n+" .fmr_comune").html(e.comune),$("#fmr_infowindow"+n+" .fmr_idComune").html(e.idComune),$("#fmr_infowindow"+n+" .fmr_sezione").html(e.sezione),$("#fmr_infowindow"+n+" .fmr_foglio").html(e.foglio),$("#fmr_infowindow"+n+" .fmr_allegato").html(e.allegato),$("#fmr_infowindow"+n+" .fmr_particella").html(e.particella),$("#fmr_infowindow"+n+" .fmr_datiCatastaliLoading").html(""),i.setArInfoWindowTabsLoadedTrue("#datiCatastali")):$("#fmr_infowindow"+n+" .fmr_datiCatastaliLoading").html(e.result),t.data.datiCatastali=e,i.setDatiCatastaliSTIMATRIXCityUrl(t,a.getZoom())}))},n.prototype.setDatiCatastaliSTIMATRIXCityUrl=function(t,e){var i=this.id,n=t.getLatLng().lat,a=t.getLatLng().lng,s=t.data.datiCatastali,o=s.result,r=$("input[type=radio][name=fmr_datiCatastaliSTIMATRIXCityRadio"+i+"]:checked").val().split("-")[0],l=$("input[type=radio][name=fmr_datiCatastaliSTIMATRIXCityRadio"+i+"]:checked").val().split("-")[1];l=l||"";var h=s.idComune,c=s.sezione,u=s.foglio,d=s.particella;"ok"==o?($(".fmr_datiCatastaliSTIMATRIXCityErrore").html(""),$(".fmr_estrattoMappa_button"+i).button("option","disabled",!1),$(".fmr_estrattoMappa_button"+i).prop("href","https://ipv.stimatrixcity.it/Link/"+r+"?idTipoCatasto="+l+"&comuneCodiceCatastale="+h+"&sezioneCensuaria="+c+"&foglio="+u+"&particella="+d+"&sorgente=FORMAPS&latitudine="+n+"&longitudine="+a+"&zoom="+e),$(".fmr_estrattoMappa_button"+i).prop("title","Richiedi un estratto di mappa")):($(".fmr_datiCatastaliSTIMATRIXCityErrore").html("<p>Dati catastali necessari all'operazione non disponibili:<br>"+o),$(".fmr_estrattoMappa_button"+i).button("option","disabled",!0),$(".fmr_estrattoMappa_button"+i).prop("href","#"),$(".fmr_estrattoMappa_button"+i).prop("title","Dati insufficienti per ottenere un estratto di mappa. Sposta il riferimento o riprova in un altro momento."))},n.prototype.setValoriOmiInfoWindow=function(t,e){var i=this,n=i.id,a="https://www.formaps.it/WS/ValoriOmi/GetValoriOmi?latitudine="+t+"&longitudine="+e;$("#fmr_infowindow"+n+" .fmr_zonaOMIComune").html('<span class="fas fa-spinner fa-pulse"></span>'),$("#fmr_infowindow"+n+" .fmr_zonaOMI").html('<span class="fas fa-spinner fa-pulse"></span>');var s=$("#valoriOmiValoriMercato"+n+" table tbody"),o=$("#valoriOmiValoriLocazione"+n+" table tbody"),r=$("#valoriOmiSaggioAnnuo"+n+" table tbody");s.html(""),o.html(""),r.html(""),$.ajax({url:a,dataType:"jsonp",contentType:"application/json",success:function(t){t.length>0?($("#fmr_infowindow"+n+" .fmr_zonaOMIComune").html(t[0].ZonaOMIComune),$("#fmr_infowindow"+n+" .fmr_zonaOMI").html(t[0].ZonaOMI),$.each(t,(function(t,e){var i=e.ValoreOmiMin,n=e.ValoreOmiMax,a=e.ValoreLocazioneMin,l=e.ValoreLocazioneMax;s.append("<tr><td>"+e.TipologiaEdilizia+"</td><td>"+e.Stato+'</td><td class="valoriOmiValori">'+(i>0?i.formatta(0,",","."):"-")+'</td><td class="valoriOmiValori">'+(n>0?n.formatta(0,",","."):"-")+"</td></tr>"),o.append("<tr><td>"+e.TipologiaEdilizia+"</td><td>"+e.Stato+'</td><td class="valoriOmiValori">'+(a>0?a.formatta(1,",","."):"-")+'</td><td class="valoriOmiValori">'+(l>0?l.formatta(1,",","."):"-")+"</td></tr>");var h="-";i>0&&a>0&&(h=(12*a/i*100).formatta(2,",",".")+"%");var c="-";n>0&&l>0&&(c=(12*l/n*100).formatta(2,",",".")+"%"),r.append("<tr><td>"+e.TipologiaEdilizia+"</td><td>"+e.Stato+'</td><td class="valoriOmiValori">'+h+'</td><td class="valoriOmiValori">'+c+"</td></tr>")}))):(s.append('<tr><td colspan="4" style="text-align:center">Nessun risultato</td></tr>'),o.append('<tr><td colspan="4" style="text-align:center">Nessun risultato</td></tr>'),o.append('<tr><td colspan="4" style="text-align:center">Nessun risultato</td></tr>')),i.setArInfoWindowTabsLoadedTrue("#valoriOmi")}})},n.prototype.setDatiIstatInfoWindow=function(t,e){var i=this,n=i.id,a="https://www.formaps.it/WS/Istat/GetDatiIstat?latitudine="+t+"&longitudine="+e;$("#datiIstat"+n).html(""),$.ajax({url:a,dataType:"jsonp",contentType:"application/json",context:this}).done((function(t){$.each(t,(function(t,e){$("#datiIstat"+n).append("<li><label>"+e.Etichetta+"</label><span>"+e.Valore+"</span></li>")})),i.setArInfoWindowTabsLoadedTrue("#istat")})).fail((function(t,e,i){console.log(i)}))},n.prototype.setStreetViewInfoWindow=function(){var t=this,e=t.id,i=t.map,n=L.icon({iconUrl:"https://www.formaps.it/Images/markers/arrow.png",iconSize:[25,25],iconAnchor:[12,12],className:"streetViewArrow"}),a=t.infoWindow.marker.data.heading?t.infoWindow.marker.data.heading:0,s=t.infoWindow.marker.data.pitch?t.infoWindow.marker.data.pitch:0,o=new google.maps.StreetViewService,r=new google.maps.LatLng(t.infoWindow.marker.getLatLng().lat,t.infoWindow.marker.getLatLng().lng);if(o.getPanoramaByLocation(r,50,(function(t,i){i===google.maps.StreetViewStatus.OK?($("#streetViewPano_"+e).show(),$("#streetViewNonDisponibile_"+e).hide()):($("#streetViewPano_"+e).hide(),$("#streetViewNonDisponibile_"+e).show())})),t.infoWindow.streetView)t.infoWindow.streetViewSyncActive=!1,t.infoWindow.streetView.setPosition(new google.maps.LatLng(t.infoWindow.marker.getLatLng().lat,t.infoWindow.marker.getLatLng().lng)),t.infoWindow.streetView.setPov({heading:a,pitch:s}),t.infoWindow.streetViewArrow.setLatLng(t.infoWindow.marker.getLatLng()).addTo(i),t.infoWindow.streetViewSyncCheck.prop("checked")&&(t.infoWindow.streetViewSyncActive=!0);else{t.infoWindow.streetView=new google.maps.StreetViewPanorama(document.getElementById("streetViewPano_"+e),{position:{lat:t.infoWindow.marker.getLatLng().lat,lng:t.infoWindow.marker.getLatLng().lng},pov:{heading:a,pitch:s},controlSize:30,clickToGo:!0,scrollwheel:!0,motionTrackingControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},fullscreenControl:!0}),t.infoWindow.streetView.addListener("position_changed",(function(){t.infoWindow.streetViewSyncActive&&(t.infoWindow.marker.setLatLng(L.latLng(t.infoWindow.streetView.getPosition().lat(),t.infoWindow.streetView.getPosition().lng())),t.infoWindow.streetViewArrow.setLatLng(t.infoWindow.marker.getLatLng()))}));var l=document.createElement("div");l.classList="streetViewSync",l.innerHTML='<input type="checkbox" id="streetViewSyncCheck_'+t.id+'">Sincronizza la posizione del riferimento',t.infoWindow.streetView.controls[google.maps.ControlPosition.LEFT_TOP].push(l),t.infoWindow.streetViewSyncCheck=$("input",l),t.infoWindow.streetViewSyncActive=t.infoWindow.streetViewSyncCheck.prop("checked"),t.infoWindow.streetViewSyncCheck.on("change",(function(){$(this).prop("checked")&&(t.infoWindow.marker.setLatLng(L.latLng(t.infoWindow.streetView.getPosition().lat(),t.infoWindow.streetView.getPosition().lng())),t.infoWindow.streetViewArrow.setLatLng(t.infoWindow.marker.getLatLng())),t.infoWindow.streetViewSyncActive=$(this).prop("checked")})),t.infoWindow.streetViewArrow=L.marker(t.infoWindow.marker.getLatLng(),{icon:n,interactive:!1,draggable:!1,riseOnHover:!1,rotationOrigin:"center center"}).addTo(i)}t.infoWindow.marker.on("drag",(function(e){t.infoWindow.streetViewArrow.setLatLng(t.infoWindow.marker.getLatLng())})),t.infoWindow.streetView.addListener("pov_changed",(function(){t.infoWindow.streetViewArrow.setRotationAngle(t.infoWindow.streetView.getPov().heading),t.infoWindow.marker.data.heading=t.infoWindow.streetView.getPov().heading,t.infoWindow.marker.data.pitch=t.infoWindow.streetView.getPov().pitch}))},n.prototype.setForMcaInfoWindow=function(t){var e=this,i=e.id;if($("#fmr_forMcaBottoneInizia_"+i).hide(),$("#fmr_forMcaValutazione_"+i).hide(),t.data.prezzo)$("#fmr_forMcaLabel_"+i).html('Questo immobile dispone di un <a href="#" class="evidenziaElemento" data-id-elemento="fmr_editPrezzo'+i+'" title="Visualizza il prezzo nella casella apposita">Prezzo (â¬)</a> e <strong>puÃ² essere utilizzato come comparabile</strong> di un altro immobile.');else if(t.data.forMca){$("#fmr_forMcaLabel_"+i).html("Seleziona i comparabili tra gli altri riferimenti valorizzati presenti in mappa:"),$("#fmr_forMcaValutazione_"+i).css("display","flex"),$("#fmr_forMcaComparabili_"+i).html("");var n=e.state.Markers.filter((function(t){return t&&t.data.prezzo}));n.length>0?($("#fmr_forMcaComparabili_"+i).append('<ul class="fmr_forMcaComparabiliList"></ul>'),$.each(n,(function(n,a){if(a!=t&&a.data.prezzo){var s=e.getIcona(a.data.icona),o=e.getIconaImage(s),r=!1;e.infoWindow.marker.data.forMca&&e.infoWindow.marker.data.forMca.comparabili&&(r=e.infoWindow.marker.data.forMca.comparabili.some((function(t){return t==a.id}))),$("#fmr_forMcaComparabili_"+i+" ul").append('<li>                                                                                    <label data-id="'+a.id+'">                                                                                        <div class="fmr_forMcaComparabiliHeader">'+(a.data.data?"<span>"+a.data.data.toLocaleDateString()+"</span>":"")+'<span class="fmr_forMcaComparabiliPrezzo">â¬ '+a.data.prezzo.formatta(2,",",".")+'</span>                                                                                        </div>                                                                                        <div class="fmr_forMcaComparabiliIcona">'+o+'</div>                                                                                        <div class="fmr_forMcaComparabiliDescrizione">                                                                                            <div>'+a.data.denominazione+"</div>                                                                                            <span>"+(a.data.superficie?a.data.superficie.formatta(2,",",".")+" m&sup2;":"")+(a.data.numeroLocali?" | "+a.data.numeroLocali+" locali":"")+("annuncioVendita"==a.data.provenienza&&a.data.superficie?" | â¬ "+(a.data.prezzo/a.data.superficie).formatta(2,",",".")+" / m&sup2; ":"")+(a.data.url?' | <a href="'+a.data.url+'" title="Vai alla pagina dedicata" target="_blank"><span class="fas fa-external-link-alt"></span></a>':"")+'</span>                                                                                        </div>                                                                                        <div class="fmr_forMcaCheckboxContainer">                                                                                            <input type="checkbox" id="fmr_forMcaCheckbox'+a.id+'" class="fmr_forMcaCheckbox" value="'+a.id+'"'+(r?' checked="checked"':"")+">                                                                                        </div>                                                                                    </label>                                                                                </li>"),$("#fmr_forMcaCheckbox"+a.id).on("change",(function(){var t=$(this).val();this.checked?e.infoWindow.marker.data.forMca.comparabili.push(t):e.infoWindow.marker.data.forMca.comparabili=e.infoWindow.marker.data.forMca.comparabili.filter((function(e){return e!==t}))})),$("#fmr_forMcaComparabili_"+i+" ul>li>label").on("mouseover",(function(){var t=$(this).data("id");$.each(e.state.Markers,(function(e,i){i&&(i.id==t?$(i._icon).addClass("blinking"):$(i._icon).removeClass("blinking"))}))})),$("#fmr_forMcaComparabili_"+i+" ul>li>label").on("mouseout",(function(){$.each(e.state.Markers,(function(t,e){e&&$(e._icon).removeClass("blinking")}))}))}}))):($("#fmr_forMcaLabel_"+i).html("Comparabili non disponibili."),$("#fmr_forMcaComparabili_"+i).append('<p>Utilizza la <a href="#" title="Ricerca annunci" id="apToolTip'+i+'">funzione di ricerca Asking Price (AP)</a> e converti gli annunci individuati in <strong>riferimenti</strong> per poterli utilizzare come <strong>comparabili</strong>.</p>                                                                    <p>In alternativa, aggiungi <strong>riferimenti</strong> sulla mappa tramite <a href="#" title="Aggiungi riferimenti" id="riferimentiToolTip'+i+"\">l'apposito strumento</a> e assegna loro un <strong>Prezzo (â¬)</strong>.</p>"),$("#riferimentiToolTip"+i).on("click",(function(t){t.preventDefault();var e=new Tour({orphan:!1,template:'<div class="popover tour">\t\t\t\t\t\t\t\t        <div class="arrow"></div>\t\t\t\t\t\t\t\t        <h3 class="popover-title"></h3>\t\t\t\t\t\t\t\t        <div class="popover-content"></div>\t\t\t\t\t\t\t\t        <div class="popover-navigation">\t\t\t\t\t\t\t\t\t        <button class="btn btn-default" data-role="end">Chiudi</button>\t\t\t\t\t\t\t\t        </div>\t\t\t\t\t\t\t\t    </div>',steps:[{element:".forMapsMarkerContainer>a:first-child",title:"Riferimenti su mappa",content:"Aggiungi sulla mappa un riferimento. Una volta specificato il Prezzo (â¬) nella sezione Immobile, potrÃ  essere utilizzato come comparabile in forMCA."}]});e.init(),e.restart()})),$("#apToolTip"+i).on("click",(function(t){t.preventDefault();var e=new Tour({orphan:!1,template:'<div class="popover tour">\t\t\t\t\t\t\t\t        <div class="arrow"></div>\t\t\t\t\t\t\t\t        <h3 class="popover-title"></h3>\t\t\t\t\t\t\t\t        <div class="popover-content"></div>\t\t\t\t\t\t\t\t        <div class="popover-navigation">\t\t\t\t\t\t\t\t\t        <button class="btn btn-default" data-role="end">Chiudi</button>\t\t\t\t\t\t\t\t        </div>\t\t\t\t\t\t\t\t    </div>',steps:[{element:".apTab",title:"Ricerca annunci immobiliari",content:"Cerca e visualizza su mappa gli annunci immobiliari e convertili in riferimenti utilizzabili come comparabili in forMCA"}]});e.init(),e.restart()})))}else $("#fmr_forMcaLabel_"+i).html('<strong>Valuta questo immobile</strong>, oppure assegnagli un <em>Prezzo (â¬)</em> <a href="#" class="evidenziaElemento" data-id-elemento="fmr_editPrezzo'+i+'" title="Inserisci il prezzo nella casella evidenziata">nella casella apposita</a> per utilizzarlo come comparabile di un altro immobile.'),$("#fmr_forMcaBottoneInizia_"+i).show();e.evidenziaElemento()},n.prototype.getMarkerCurrentAddress=function(t){var e=this,i=e.id,n=t.getLatLng().lat,a=t.getLatLng().lng;$.getJSON("https://nominatim.openstreetmap.org/reverse?format=json&lat="+n+"&lon="+a+"&zoom=18&addressdetails=0",(function(t){var e="Nessun risultato";t.display_name&&(e=t.display_name),$("#fmr_infowindow"+i+" .fmr_indirizzoAttuale").html(e)})).always((function(){e.setArInfoWindowTabsLoadedTrue(4)}))},n.prototype.getIconaImage=function(t){return"immagine"==t.Tipologia?'<img src="'+this.percorsoIcone+t.Icona+'" alt="'+t.Denominazione+'" class="iconaTitolo">':'<span class="iconaTitolo markerLabel markerLabel-'+t.Icona+'" alt="'+t.Denominazione+'">ICO</span>'},n.prototype.getLinkAnnuncio=function(t,e){var i="";if(t)switch(e){case"immobiliare.it":i="https://www.immobiliare.it/"+t+"-immobile.html"}return i},n.prototype.setEditUrlLink=function(t){$("#fmr_EditUrlLink"+this.id).prop("href",t||"#")},n.prototype.getParentDomain=function(){var t="";return window.location!=window.parent.location&&(t=new URL(document.referrer).host),t},n.prototype.coordinatesFromString=function(t){var e=t.split(/\s*,\s*/),i=41.8856460823679,n=12.4608743837683;return 2==e.length&&(i=parseFloat(e[0]),n=parseFloat(e[1])),new L.latLng(i,n)},n.prototype.boundsFromString=function(t){var e=t.split(/\s*,\s*/),i=this.coordinatesFromString(e[0]+","+e[1]),n=this.coordinatesFromString(e[2]+","+e[3]);return L.latLngBounds(i,n)},n.prototype.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},n.prototype.guid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},n.prototype.getCrs=function(t){var e;switch(t){case"3857":e=L.CRS.EPSG3857;break;case"4326":e=L.CRS.EPSG4326;break;case"4258":e=new L.Proj.CRS("EPSG:4258","+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",{resolutions:[8192,4096,2048,1024,512,256,128]});break;case"25832":e=new L.Proj.CRS("EPSG:25832","+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",{resolutions:[8192,4096,2048,1024,512,256,128]});break;case"32632":e=new L.Proj.CRS("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs",{resolutions:[8192,4096,2048,1024,512,256,128]});break;default:e=L.CRS.EPSG4326}return e},n.prototype.getRandomInt=function(){return Math.floor(Math.random()*(1e6-1))+1},n.prototype.pad=function(t,e){return("000000000"+t).substr(-e)},n.prototype.mobileCheck=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},n.prototype.getEncodedMapStyles=function(t){for(var e="",i={all:"0",administrative:"1","administrative.country":"17","administrative.land_parcel":"21","administrative.locality":"19","administrative.neighborhood":"20","administrative.province":"18",landscape:"5","landscape.man_made":"81","landscape.natural":"82",poi:"2","poi.attraction":"37","poi.business":"33","poi.government":"34","poi.medical":"36","poi.park":"40","poi.place_of_worship":"38","poi.school":"35","poi.sports_complex":"39",road:"3","road.arterial":"50","road.highway":"49","road.local":"51",transit:"4","transit.line":"65","transit.station":"66",water:"6"},n={all:"a",geometry:"g","geometry.fill":"g.f","geometry.stroke":"g.s",labels:"l","labels.icon":"l.i","labels.text":"l.t","labels.text.fill":"l.t.f","labels.text.stroke":"l.t.s"},a={color:"p.c",gamma:"p.g",hue:"p.h",invert_lightness:"p.il",lightness:"p.l",saturation:"p.s",visibility:"p.v",weight:"p.w"},s=0;s<t.length;s++){if(t[s].featureType&&(e+="s.t:"+i[t[s].featureType]+"|"),t[s].elementType&&(n[t[s].elementType]||console.log("style element transcription unkown:"+t[s].elementType),e+="s.e:"+n[t[s].elementType]+"|"),t[s].stylers)for(var o=0;o<t[s].stylers.length;o++){var r=t[s].stylers[o];for(var l in r)"color"==l&&(7==r[l].length?r[l]="#ff"+r[l].slice(1):9!=r[l].length&&console.log("malformed color:"+r[l])),e+=a[l]+":"+r[l]+"|"}e=e.slice(0,e.length-1),e+=","}return encodeURIComponent(e.slice(0,e.length-1))},n.prototype.getParameterByName=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},n.prototype.evidenziaElemento=function(){$(".evidenziaElemento").on("click",(function(t){"#"==$(this).prop("href")&&t.preventDefault()})),$(".evidenziaElemento").hover((function(t){var e=$(this).data("idElemento");$("#"+e).addClass("elementoEvidenziato")}),(function(t){var e=$(this).data("idElemento");$("#"+e).removeClass("elementoEvidenziato")}))};var a=a||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,i=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in n,s=t.webkitRequestFileSystem,o=t.requestFileSystem||s||t.mozRequestFileSystem,r=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},l=0,h=function(e){var n=function(){"string"==typeof e?i().revokeObjectURL(e):e.remove()};t.chrome?n():setTimeout(n,10)},c=function(t,e,i){for(var n=(e=[].concat(e)).length;n--;){var a=t["on"+e[n]];if("function"==typeof a)try{a.call(t,i||t)}catch(s){r(s)}}},u=function(r,u){var d,p,f,m,g=this,_=r.type,v=!1,y=function(){c(g,"writestart progress write writeend".split(" "))},b=function(){!v&&d||(d=i().createObjectURL(r)),p?p.location.href=d:null==t.open(d,"_blank")&&"undefined"!=typeof safari&&(t.location.href=d),g.readyState=g.DONE,y(),h(d)},w=function(t){return function(){if(g.readyState!==g.DONE)return t.apply(this,arguments)}},M={create:!0,exclusive:!1};if(g.readyState=g.INIT,u||(u="download"),a)return d=i().createObjectURL(r),n.href=d,n.download=u,f=n,(m=e.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),f.dispatchEvent(m),g.readyState=g.DONE,y(),void h(d);t.chrome&&_&&"application/octet-stream"!==_&&(r=(r.slice||r.webkitSlice).call(r,0,r.size,"application/octet-stream"),v=!0),s&&"download"!==u&&(u+=".download"),("application/octet-stream"===_||s)&&(p=t),o?o(t.TEMPORARY,l+=r.size,w((function(t){t.root.getDirectory("saved",M,w((function(t){var e=function(){t.getFile(u,M,w((function(t){t.createWriter(w((function(e){e.onwriteend=function(e){p.location.href=t.toURL(),g.readyState=g.DONE,c(g,"writeend",e),h(t)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&b()},"writestart progress write abort".split(" ").forEach((function(t){e["on"+t]=g["on"+t]})),e.write(r),g.abort=function(){e.abort(),g.readyState=g.DONE},g.readyState=g.WRITING})),b)})),b)};t.getFile(u,{create:!1},w((function(t){t.remove(),e()})),w((function(t){t.code===t.NOT_FOUND_ERR?e():b()})))})),b)})),b):b()},d=u.prototype;return d.abort=function(){this.readyState=this.DONE,c(this,"abort")},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(t,e){return new u(t,e)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);return"undefined"!=typeof module&&null!==module?module.exports=a:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],(function(){return a})),n}();"object"==typeof module&&(module.exports=ForMaps);var circleToGeoJSON=L.Circle.prototype.toGeoJSON;L.Circle.include({toGeoJSON:function(){var t=circleToGeoJSON.call(this);return t.properties={point_type:"circle",radius:this.getRadius(),color:this.options.color,fillColor:this.options.fillColor},t}});var polylineToGeoJSON=L.Polyline.prototype.toGeoJSON;L.Polyline.include({toGeoJSON:function(){var t=polylineToGeoJSON.call(this);return t.properties={color:this.options.color,fillColor:this.options.fillColor},t}});var polygonToGeoJSON=L.Polygon.prototype.toGeoJSON;L.Polygon.include({toGeoJSON:function(){var t=polygonToGeoJSON.call(this);return t.properties={color:this.options.color,fillColor:this.options.fillColor},t}}),Boolean.prototype.toYesNo=function(){return this.valueOf()?"SÃ¬":"No"},Number.prototype.formatta=function(t,e,i){var n=this,a=(t=isNaN(t=Math.abs(t))?2:t,e=null==e?".":e,i=null==i?",":i,n<0?"-":""),s=parseInt(n=Math.abs(+n||0).toFixed(t))+"",o=(o=s.length)>3?o%3:0;return a+(o?s.substr(0,o)+i:"")+s.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?e+Math.abs(n-s).toFixed(t).slice(2):"")},Date.prototype.formatoFile=function(){var t=this.getFullYear().toString(),e=(this.getMonth()+1).toString(),i=this.getDate().toString(),n=this.getHours().toString(),a=this.getMinutes().toString(),s=this.getSeconds().toString();return t+"-"+(e[1]?e:"0"+e[0])+"-"+(i[1]?i:"0"+i[0])+"_"+n+"-"+a+"-"+s},$.fn.sidebar=function(t){var e=this,i=e.find("ul.sidebar-tabs, .sidebar-tabs > ul"),n=e.children(".sidebar-content").first();function a(){var t=0;$.each(i,(function(e,i){t+=$(this).height()})),e.height()<t?i.css("position","static"):i.css("position","absolute")}return i.children("li").children('a[href^="#"]').unbind(),i.children("li").children('a[href^="#"]').on("click",(function(t){t.preventDefault();var i=$(this).closest("li");i.hasClass("active")?e.close():i.hasClass("disabled")||this.hash.length>1&&e.open(this.hash.slice(1),i)})),e.find(".sidebar-close").on("click",(function(){e.close()})),e.open=function(t,a){void 0===a&&(a=i.find('li > a[href="#'+t+'"]').parent()),n.children(".sidebar-pane.active").removeClass("active"),n.children("#"+t).addClass("active"),i.children("li.active").removeClass("active"),a.addClass("active"),e.trigger("content",{id:t}),e.hasClass("collapsed")?(e.trigger("opening",a),e.removeClass("collapsed")):e.trigger("tabChanged",a)},e.close=function(){i.children("li.active").removeClass("active"),e.hasClass("collapsed")||(e.trigger("closing"),e.addClass("collapsed"))},this.forMapsResize(a),a(),e},function(t){var e,i,n=document.attachEvent,a=!1,s=t.fn.forMapsResize;if(t.fn.forMapsResize=function(t){return this.each((function(){this==window?s.call(jQuery(this),t):addResizeListener(this,t)}))},t.fn.forMapsRemoveResize=function(t){return this.each((function(){removeResizeListener(this,t)}))},!n){var o=(i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(t){return i(t)}),r=(e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(t){return e(t)});function l(t){var e=t.__resizeTriggers__,i=e.firstElementChild,n=e.lastElementChild,a=i.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,a.style.width=i.offsetWidth+1+"px",a.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight}function h(t){var e=this;l(this),this.__resizeRAF__&&r(this.__resizeRAF__),this.__resizeRAF__=o((function(){(function(t){return t.offsetWidth!=t.__resizeLast__.width||t.offsetHeight!=t.__resizeLast__.height})(e)&&(e.__resizeLast__.width=e.offsetWidth,e.__resizeLast__.height=e.offsetHeight,e.__resizeListeners__.forEach((function(i){i.call(e,t)})))}))}var c=!1,u="",d="animationstart",p="Webkit Moz O ms".split(" "),f="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(c=!0),!1===c)for(var g=0;g<p.length;g++)if(void 0!==m.style[p[g]+"AnimationName"]){u="-"+p[g].toLowerCase()+"-",d=f[g],c=!0;break}var _="resizeanim",v="@"+u+"keyframes "+_+" { from { opacity: 0; } to { opacity: 0; } } ",y=u+"animation: 1ms "+_+"; "}window.addResizeListener=function(t,e){n?t.attachEvent("onresize",e):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),function(){if(!a){var t=(v||"")+".resize-triggers { "+(y||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),e.appendChild(i),a=!0}}(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),l(t),t.addEventListener("scroll",h,!0),d&&t.__resizeTriggers__.addEventListener(d,(function(e){e.animationName==_&&l(t)}))),t.__resizeListeners__.push(e))},window.removeResizeListener=function(t,e){n?t.detachEvent("onresize",e):(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",h),t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__)))}}(jQuery),function(t){t.fn.extend({forMapsMarker:function(e){return e=t.extend({},{position:"topleft",markerImage:"https://www.formaps.it/Images/markers/goccia_rossa.png"},e),this.each((function(){var t=this.getRandomInt();this.forMapsMarker=new ForMapsMarkerControl(this,t,e)}))}}),ForMapsMarkerControl=function(e,i,n){var a,s,o,r,l=e.map,h=!1,c=t(l.getContainer()),u=document.createElement("img");u.className="forMapsMarker-image",u.src=n.markerImage,c.append(u);var d=L.Control.extend({options:{position:n.position},onAdd:function(){(a=L.DomUtil.create("div","forMapsMarkerContainer leaflet-bar leaflet-control leaflet-control-custom")).id="forMapsMarker"+i,(s=L.DomUtil.create("a")).href="#",s.title="Aggiungi riferimenti alla mappa",s.style.backgroundImage="url("+n.markerImage+")",s.className="forMapsMarker-buttonLink",(o=L.DomUtil.create("a")).href="#",o.title="Visualizza una lista dei riferimenti aggiunti alla mappa",o.innerHTML='<span class="fas fa-list"></span>',o.className="forMapsMarker-buttonLink",(r=L.DomUtil.create("a")).href="#",r.title="Rimuovi tutti i riferimenti dalla mappa",r.innerHTML='<span class="far fa-trash-alt"></span>',r.className="forMapsMarker-buttonLink";var c=L.DomUtil.create("div");return c.id="markersListContainer"+i,c.className="markersListContainer",c.innerHTML='<table id="markersListTable'+i+'" class="markersListTable display" style="width:100%;"></table>',a.appendChild(s),a.appendChild(o),a.appendChild(r),a.appendChild(c),s.onclick=function(t){t.preventDefault(),L.DomEvent.stopPropagation(t),h?g():m(t)},o.onclick=function(n){var a=[];t.each(e.state.Markers,(function(t,i){if(null!=i){var n=[];n.push(e.getIconaImage(e.getIcona(i.data.icona))),n.push(i.data.denominazione),n.push(i.getLatLng()),n.push(i.id),a.push(n)}})),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"alt-string-pre":function(t){return t.match(/alt="(.*?)"/)[1].toLowerCase()},"alt-string-asc":function(t,e){return t<e?-1:t>e?1:0},"alt-string-desc":function(t,e){return t<e?1:t>e?-1:0}}),t("#markersListTable"+i).DataTable({destroy:!0,scrollY:"200px",scrollCollapse:!0,data:a,autoWidth:!1,order:[[1,"asc"]],columns:[{title:"Icona",width:"15px",type:"alt-string",className:"text-center"},{title:"Denominazione"},{title:"Coordinate",visible:!1}],paging:!1,language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Italian.json"},createdRow:function(i,n,a){t(i).attr("title","Clicca per andare alla posizione del riferimento "+n[1]),t(i).on("click",(function(){s.close(),l.flyTo(n[2],17),t.each(e.state.Markers,(function(t,e){null!=e&&e.id==n[3]&&e.fire("click")}))}))}});var s=lity("#markersListContainer"+i);t("#markersListContainer"+i).show(),t(document).on("lity:close",(function(e,n){t("#markersListContainer"+i).hide()}))},r.onclick=function(t){t.preventDefault(),L.DomEvent.stopPropagation(t),e.removeAllMarkers()},a}}),p=function(t){_(t.originalEvent.clientX,t.originalEvent.clientY)},f=function(t){e.addMarker({latLng:t.latlng}),g()},m=function(t){h=!0,s.classList.add("active"),c.css("cursor","crosshair"),l.addEventListener("click",f),c.on("keyup",g),L.Browser.mobile||(_(t.clientX,t.clientY),u.style.display="block",l.addEventListener("mousemove",p))},g=function(t){null!=t&&27!=t.keyCode||(h=!1,s.classList.remove("active"),c.css("cursor",""),l.removeEventListener("click",f),u.style.display="none",L.Browser.mobile||l.removeEventListener("mousemove",p))};function _(t,e){u.style.left=t-u.width/2+"px",u.style.top=e-u.height+"px"}l.addControl(new d)}}(jQuery),function(t){t.fn.extend({forMapsSearch:function(e){return e=t.extend({},{},e),this.each((function(){var t=this.getRandomInt();this.ForMapsSearch=new ForMapsSearchControl(this,t,e)}))}}),ForMapsSearchControl=function(e,i,n){var a=e.map,s=document.createElement("div");s.id="forMapsSearch_Container"+i,s.className="forMapsSearch_Container";var o=document.createElement("div");o.id="forMapsSearch_Controls"+i,o.className="forMapsSearch_Controls",t(s).append(e.getBanner()),t(s).append(o);var r=document.createElement("input");r.id="forMapsSearch_Input"+i,r.className="forMapsSearch_Input",r.type="search",r.placeholder="Inserisci un indirizzo o delle coordinate e premi invio",t(o).append(r);var l=document.createElement("div");l.id="forMapsSearch_searchButton"+i,l.className="forMapsSearch_searchButton",t(l).html('<span class="fas fa-search fa-fw"></span>'),t(r).after(l);var h=document.createElement("ul");h.id="forMapsSearch_Results"+i,h.className="forMapsSearch_Results",t(s).append(h);var c=document.createElement("div");function u(e){if(t(h).is(":visible")){if(t(h).find("li.selected").length>0){var i,n=t(h).find("li.selected").first();(i=e?t(n).next("li"):t(n).prev("li")).length>0&&(t(n).removeClass("selected"),t(i).addClass("selected"))}else e&&t("li",h).first().addClass("selected");t(r).val(t(h).find("li.selected").first().html())}}function d(t,i){var n,s;i?(n=e.coordinatesFromString(t),s=t):(n=e.coordinatesFromString(t.data("lat")+","+t.data("lng")),s=t.html());var o="ricerca"+e.getRandomInt();e.addMarker({denominazione:s,latLng:n,idRicerca:o}),e.aggiungiRicerca(o,s),e.SideBar.close(),a.flyTo(n,17),f()}function p(){var e=t(r).val();if(e){var i=new RegExp(/^\s*-?\d+\.\d+\,\s?-?\d+\.\d+\s*$/).test(e);t(h).find("li.selected").length>0?d(t(h).find("li.selected").first(),!1):(t(h).html(""),t("span",l).removeClass("fa-search").addClass("fa-times"),i?d(e,!0):t.getJSON("https://www.formaps.it/WS/Geocode/GetCoordinatesFromAddress?address="+e+"&callback=?",(function(e){if(result=e,result.Response.View.length>0){var i=result.Response.View[0].Result;i.length>0?t.each(i,(function(e,i){t(h).append('<li data-lat="'+i.Location.DisplayPosition.Latitude+'" data-lng="'+i.Location.DisplayPosition.Longitude+'">'+i.Location.Address.Label+"</li>")})):t(h).append("<li>Nessun risultato</li>")}else t(h).append("<li>Nessun risultato</li>");t(h).show()})))}else alert("Inserisci un indirizzo o delle coordinate per proseguire")}function f(){t("span",l).removeClass("fa-times").addClass("fa-search"),t(h).hide(),t(h).html(""),t(r).val("")}c.id="forMapsSearch_ResultsList"+i,c.className="forMapsSearch_ResultsList",t(s).append(c),e.addSideBar(i,"forMapsSearch","Ricerca per indirizzo",'<span class="fa fa-search"></span>',s),e.SideBar.on("opening",(function(){t("#forMapsSearch_Input"+i).focus(),t("#forMapsSearch_Input"+i).val("")})),t(r).on("keyup",(function(e){switch(e.keyCode||e.which){case 13:p();break;case 27:f();break;case 40:u(!0);break;case 38:u(!1);break;default:t(h).find("li.selected").removeClass("selected")}})),t(h).on("click","li",(function(e){t(this).data("lat")&&t(this).data("lng")&&d(t(this),!1)})),t(l).on("click",(function(e){t("span",this).hasClass("fa-times")?f():p()}))}}(jQuery),function(t){var e="",i=[{crs:"4326",key:"sfondo",tileSize:256,title:"Sfondo",internalName:"sfondo",urlBase:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQECAQECAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgAAQABAwERAAIRAQMRAf/EAEoAAQAAAAAAAAAAAAAAAAAAAAoBAQAAAAAAAAAAAAAAAAAAAAAQAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AH8A/9k=",version:"1.3.0",minZoomLevel:1,maxScaleDenominator:"",sfondo:!0},{crs:"4258",key:"acque",tileSize:1024,title:"Acque",internalName:"acque",urlBase:"https://wms.cartografia.agenziaentrate.gov.it/inspire/wms/ows01.php?",version:"1.1.1",minZoomLevel:12,maxScaleDenominator:"200000"},{crs:"4258",key:"strade",tileSize:1024,title:"Strade",internalName:"strade",urlBase:"https://wms.cartografia.agenziaentrate.gov.it/inspire/wms/ows01.php?",version:"1.1.1",minZoomLevel:12,maxScaleDenominator:"200000"},{crs:"4258",key:"CP.CadastralParcel",tileSize:1024,title:"Particelle",internalName:"particelle",urlBase:"https://wms.cartografia.agenziaentrate.gov.it/inspire/wms/ows01.php?",version:"1.1.1",minZoomLevel:17,maxScaleDenominator:"5000"},{crs:"4258",key:"fabbricati",tileSize:1024,title:"Fabbricati",internalName:"fabbricati",urlBase:"https://wms.cartografia.agenziaentrate.gov.it/inspire/wms/ows01.php?",version:"1.1.1",minZoomLevel:17,maxScaleDenominator:"5000"},{crs:"4258",key:"CP.CadastralZoning",tileSize:1024,title:"Fogli",internalName:"fogli",urlBase:"https://wms.cartografia.agenziaentrate.gov.it/inspire/wms/ows01.php?",version:"1.1.1",minZoomLevel:14,maxScaleDenominator:"200000"},{crs:"4258",key:"codice_plla",tileSize:1024,title:"Numero particella",internalName:"numeroParticella",urlBase:"https://wms.cartografia.agenziaentrate.gov.it/inspire/wms/ows01.php?",version:"1.1.1",minZoomLevel:18,maxScaleDenominator:"2000"},{crs:"4258",key:"simbolo_graffa",tileSize:1024,title:"Simbolo Graffa",internalName:"simboloGraffa",urlBase:"https://wms.cartografia.agenziaentrate.gov.it/inspire/wms/ows01.php?",version:"1.1.1",minZoomLevel:18,maxScaleDenominator:"2000"}];t.fn.extend({forMapsCatasto:function(e){return e=t.extend({},{experimental:!1,urlBase:"https://www.formaps.it/WS/DatiCatastali/"},e),this.each((function(){var t=this.getRandomInt();this.ForMapsCatasto=new ForMapsCatastoControl(this,t,e)}))}}),ForMapsCatastoControl=function(n,a,s){var o=n.map,r=t(document.createElement("div")).html('<div id="forMapsCatasto_container'+a+'" class="forMapsCatasto_container">'+n.getBanner()+'<p style="padding:5px;border:1px solid red; background-color:rgba(255,0,0,.1);color:red;">A causa di lavori di manutenzione da parte dell\'Agenzia delle Entrate, i servizi di visualizzazione dei <strong>Livelli catastali</strong> e di <strong>Ricerca particelle</strong> potrebbero subire dei malfunzionamenti.</p>                                                                    <h2>Livelli catastali</h2>                                                                    <p>Livelli forniti tramite il servizio di <a href="http://www.agenziaentrate.gov.it/wps/content/Nsilib/Nsi/Schede/FabbricatiTerreni/Consultazione+cartografia+catastale/Servizio+Consultazione+cartografia/?page=schedefabbricatieterreni" title="Vai al sito dell\'Agenzia delle Entrate" target="_blank">Consultazione cartografia catastale - WMS</a> dell\'Agenzia delle Entrate.<br>La licenza di utilizzo dei livelli forniti dall\'Agenzia delle Entrate vieta l\'uso commerciale e la produzione di opere derivate. Utilizzando il servizio dichiari di aver compreso tali limitazioni d\'uso.</p>                                                                    <ul id="forMapsCatasto_ul'+a+'" class="wms_container"></ul>                                                                    <p>Salva un\'immagine basata sui livelli catastali attivi (la disponibilit&#224; potrebbe dipendere dal livello di zoom applicato alla mappa)</p>                                                                    <button id="forMapsCatasto_estratto'+a+'" type="button" style="margin-bottom:20px;">Salva immagine</button>                                                                    <div id="forMapsCatasto_ricercaFogliParticelle'+a+'" class="forMapsCatasto_ricercaFogliParticelle">                                                                        <h2>Ricerca particelle'+(s.experimental?'<button id="forMapsCatasto_ricercaVocale'+a+'" type="button" style="float:right;"><span class="fas fa-microphone"></span></button>':"")+'</h2>                                                                        \x3c!--<p style="color:red;margin-bottom:30px;">Servizio temporaneamente sospeso</p>--\x3e                                                                        <p>Provincia catastale</p>                                                                        <div id="forMapsCatasto_provinceCatastali'+a+'" class="forMapsCatasto_ricercaParticelleSelect"></div>                                                                        <p>Comune catastale</p>                                                                        <div id="forMapsCatasto_comuniCatastali'+a+'" class="forMapsCatasto_ricercaParticelleSelect"></div>                                                                        <div id="forMapsCatasto_FogliParticelle'+a+'" class="forMapsCatasto_FogliParticelle">                                                                            <p>Foglio catasto terreni</p>                                                                            <input type="text" id="forMapsCatasto_fogliCatastali'+a+'" class="forMapsCatasto_ricercaParticelleInput" disabled="disabled" placeholder="Specifica il foglio">                                                                            <p>Particella</p>                                                                            <input type="text" id="forMapsCatasto_particelleCatastali'+a+'" class="forMapsCatasto_ricercaParticelleInput" disabled="disabled" placeholder="Specifica la particella">                                                                            <div id="forMapsCatasto_captchaContainer'+a+'" class="forMapsCatasto_captchaContainer">                                                                                <p>Per proseguire, inserisci il testo che visualizzi nell\'immagine</p>                                                                                <div id="forMapsCatasto_captcha'+a+'" class="forMapsCatasto_captcha">                                                                                    <div class="forMapsCatasto_captchaImmagine">                                                                                        <img src="" alt="Codice di verifica" id="forMapsCatasto_codiceVerifica'+a+'" style="max-width:100px;">                                                                                        <a href="#" title="Ricarica l\'immagine" id="forMapsCatasto_codiceVerificaReload'+a+'">Ricarica l\'immagine</a>                                                                                    </div>                                                                                    <div class="forMapsCatasto_captchaConferma">                                                                                        <input type="text" id="forMapsCatasto_codiceVerificaInput'+a+'" class="forMapsCatasto_codiceVerificaInput">                                                                                        <button id="forMapsCatasto_codiceVerificaConferma'+a+'">Conferma</button>                                                                                    </div>                                                                                </div>                                                                            </div>                                                                            <div class="forMapsCatasto_cercaParticellaContainer">                                                                                <button id="forMapsCatasto_cercaParticella'+a+'" type="button" style="vertical-align:middle;">Cerca</button>                                                                                <span id="forMapsCatasto_cercaParticellaLoading'+a+'" class="fas fa-spinner fa-pulse" style="display:none;"></span>                                                                            </div>                                                                        </div>                                                                    </div>                                                                    <h2>Quadro unione</h2>                                                                    <p>Salva il quadro unione dei fogli catastali di un comune ottenuto tramite il servizio di <a href="http://www.agenziaentrate.gov.it/wps/content/Nsilib/Nsi/Schede/FabbricatiTerreni/Consultazione+cartografia+catastale/Servizio+Consultazione+cartografia/?page=schedefabbricatieterreni" title="Vai al sito dell\'Agenzia delle Entrate" target="_blank">Consultazione cartografia catastale - WMS</a> dell\'Agenzia delle Entrate.<br>La licenza di utilizzo dei livelli forniti dall\'Agenzia delle Entrate vieta l\'uso commerciale e la produzione di opere derivate. Utilizzando il servizio dichiari di aver compreso tali limitazioni d\'uso.</p>                                                                    \x3c!--<div id="forMapsCatasto_quadro_province'+a+'" class="remoteSelect"></div>--\x3e                                                                    <div id="forMapsCatasto_quadro_comuni'+a+'" class="remoteSelect"></div>                                                                    <button id="forMapsCatasto_quadro'+a+'" type="button">Salva il quadro unione</button>                                                                </div>');function l(){h()}function h(){t("#forMapsCatasto_cercaParticella"+a).prop("disabled",!0),t("#forMapsCatasto_codiceVerificaInput"+a).val(""),t("#forMapsCatasto_captchaContainer"+a).show();var e=new Date;t("#forMapsCatasto_codiceVerifica"+a).prop("src",s.urlBase+"GetCaptcha?"+e.getTime())}function c(){!function(i,r,h,c){t("#forMapsCatasto_cercaParticellaLoading"+a).show(),t("#forMapsCatasto_cercaParticella"+a).prop("disabled",!0);var u="",d="",p="";h&&(u="Foglio "+(t.isNumeric(h)?h:t("#forMapsCatasto_fogliCatastali"+a).val()),p=s.urlBase+"GetFoglio?idProvincia="+i+"&idComune="+r+"&foglio="+h+"&etichettaFoglio="+u+"&token="+e),h&&c&&(d="Particella "+(t.isNumeric(c)?c:t("#forMapsCatasto_particelleCatastali"+a).val()),p=s.urlBase+"GetParticella?idProvincia="+i+"&idComune="+r+"&foglio="+h+"&particella="+c+"&etichettaParticella="+d+"&token="+e),p?t.ajax({url:p,dataType:"jsonp",contentType:"application/json"}).done((function(e){if(t("#forMapsCatasto_cercaParticella"+a).prop("disabled",!1),"ok"==e.Result){var i=e.Comune+" - Foglio "+e.Foglio+(e.Particella?" - Particella "+e.Particella:""),s=n.coordinatesFromString(e.Centroide);if(e.GeoJson){var r=L.geoJSON(e.GeoJson,{style:function(t){return{color:t.properties.fill,stroke:t.properties.stroke,strokeWidth:t.properties.strokeWidth,strokeOpacity:t.properties.strokeOpacity,fill:t.properties.fill,fillOpacity:t.properties.fillOpacity}}});c||r.addTo(o);var h=r.getLayers()[0].feature;if(h){r.on("click",(function(t){confirm("Vuoi davvero eliminare "+i+" dalla mappa?")&&this.remove()}));var u=h.properties.centroide?h.properties.centroide:e.Centroide,d="https://wcf.stimatrixcity.it/daticatastali.svc/daticatastaliget/?latitudine="+u.split(",")[0]+"&longitudine="+u.split(",")[1];!function(t,e){o.flyToBounds(t.getBounds())}(r),t.ajax({url:d,dataType:"jsonp",contentType:"application/json",context:this,success:function(t){t.Particella!=h.properties.numero&&(c?n.pad(t.Particella,5):t.Foglio)!=h.properties.numero&&(c&&r.addTo(o),alert("Attenzione! Il riferimento Ã¨ stato posizionato sul centroide "+(c?"della ":"del ")+h.properties.etichetta+" che ricade perÃ² "+(c?"sulla Particella "+t.Particella:"sul Foglio "+t.Foglio)))},error:function(t,e,i){}})}}var p="catRicerca"+n.getRandomInt();n.aggiungiRicerca(p,i,1),n.addMarker({idIcona:"red",draggable:!1,etichetta:e.Particella?"Fg."+e.Foglio+"/Pt."+(t.isNumeric(e.Particella)&&"."!=e.Particella.substring(0,1)?Number(e.Particella):e.Particella):"Fg."+e.Foglio,denominazione:i,latLng:s,idRicerca:p}),c?(t.each(n.state.WMSOverlays,(function(t,e){switch(e.NomeInterno){case"particelle":f=e.Id,_=e.Active;break;case"numeroParticella":m=e.Id,v=e.Active;break;case"simboloGraffa":g=e.Id,y=e.Active}})),0!=_&&0!=v&&0!=y||confirm("Vuoi visualizzare anche i livelli catastali relativi alle Particelle?\nPuoi sempre disabilitarli successivamente nella sezione CAT.")&&(0==_&&t("#wms_check"+f).click(),0==v&&t("#wms_check"+m).click(),0==y&&t("#wms_check"+g).click())):t.each(n.state.WMSOverlays,(function(e,i){"fogli"==i.NomeInterno&&(t("#wms_check"+i.Id).prop("checked")||confirm("Vuoi visualizzare anche i livelli catastali relativi ai Fogli?\nPuoi sempre disabilitarli successivamente nella sezione CAT.")&&t("#wms_check"+i.Id).click())})),e.GeoJson||o.flyTo(s,17)}else switch(e.Result){case"NCR":case"ERRX - tk expired":l();break;case"[]":alert("Nessun risultato per i parametri specificati. Prova a modificare i parametri di ricerca e ritenta");break;case"ERRX-2":default:alert("Si Ã¨ verificato un errore durante l'elaborazione, riprova successivamente"),l()}var f,m,g,_,v,y})).fail((function(t,e,i){l()})).always((function(){t("#forMapsCatasto_cercaParticellaLoading"+a).hide()})):(alert("Selezionare almeno un foglio o una particella"),t("#forMapsCatasto_cercaParticellaLoading"+a).hide(),t("#forMapsCatasto_cercaParticella"+a).prop("disabled",!1))}(t("#forMapsCatasto_provinceCatastali"+a).val(),t("#forMapsCatasto_comuniCatastali"+a).val(),t("#forMapsCatasto_fogliCatastali"+a).val(),t("#forMapsCatasto_particelleCatastali"+a).val())}function u(){var e=t("#forMapsCatasto_fogliCatastali"+a);t("#forMapsCatasto_cercaParticella"+a).text("Cerca"),e.val(""),e.prop("disabled",!0),function(){var e=t("#forMapsCatasto_particelleCatastali"+a);e.val(""),""==t("#forMapsCatasto_fogliCatastali"+a).val()?(e.prop("disabled",!0),t("#forMapsCatasto_cercaParticella"+a).text("Cerca")):t("#forMapsCatasto_cercaParticella"+a).text("Cerca foglio")}()}return n.addSideBar(a,"cat","Catasto ordinario","CAT",r),t("#forMapsCatasto_quadro_comuni"+a).select2({placeholder:"Seleziona il comune",width:"100%",minimumInputLength:2,allowClear:!0,ajax:{url:"https://www.formaps.it/ws/Comuni/ListaComuni?includiSoppressi=false&tavolare=false&codCatastale=true",dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.Items}}}}),t.each(i,(function(t,e){n.caricaWMS(o,e,"#forMapsCatasto_ul"+a,"cat")})),t("#forMapsCatasto_estratto"+a).button().click((function(){var e=o.getBounds(),i=[];if(t.each(n.state.WMSOverlays,(function(t,e){"cat"==e.Category&&e.Active&&i.push(e.Layers)})),i.length>0){var a=s.urlBase+"SalvaMappa?zoom="+o.getZoom()+"&width="+o.getContainer().offsetWidth+"&height="+o.getContainer().offsetHeight+"&south="+e.getSouth()+"&west="+e.getWest()+"&north="+e.getNorth()+"&east="+e.getEast()+"&layers="+i;window.location=a}else alert("Ã necessario selezionare almeno un livello catastale per proseguire!")})),t("#forMapsCatasto_quadro"+a).button().click((function(){var e=t("#forMapsCatasto_quadro_comuni"+a).val();if(""!=e){var i=s.urlBase+"SalvaQuadrounionePdf/"+e,n=t('<span class="loading fas fa-spinner fa-pulse" style="margin-left:5px;"></span>');t(this).append(n),t.ajax({url:i,context:t(this),dataType:"jsonp",contentType:"application/json",success:function(t){"ok"==t.status?window.location=t.url:alert("Non Ã¨ stato possibile recuperare il quadro unione, riprovare piÃ¹ tardi.")}}).always((function(){t(".loading",this).remove()}))}else alert("Ã necessario specificare un comune prima di proseguire")})),t("#forMapsCatasto_provinceCatastali"+a).select2({placeholder:"Seleziona la provincia",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:s.urlBase+"GetProvinceCatastali",dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){var i,n;""!=t(this).val()?(n=t("#forMapsCatasto_provinceCatastali"+a).val(),t("#forMapsCatasto_comuniCatastali"+a).select2({placeholder:"Seleziona il comune",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:s.urlBase+"GetComuniCatastali?idProvincia="+n,dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){""!=t(this).val()?(t("#forMapsCatasto_fogliCatastali"+a).prop("disabled",!1),t("#forMapsCatasto_particelleCatastali"+a).prop("disabled",!1)):u()})),t("#forMapsCatasto_comuniCatastali"+a).select2("enable",!0)):((i=t("#forMapsCatasto_comuniCatastali"+a)).select2("val",""),i.select2("enable",!1),u())})),t("#forMapsCatasto_fogliCatastali"+a).on("keyup",(function(e){var i=t("#forMapsCatasto_particelleCatastali"+a),n=t("#forMapsCatasto_cercaParticella"+a);""!=t(this).val()?""==i.val()?n.html("Cerca foglio"):n.html("Cerca particella"):n.html("Cerca"),t("#forMapsCatasto_cercaParticella"+a).prop("disabled",!1),t("#forMapsCatasto_captchaContainer"+a).hide()})),t("#forMapsCatasto_particelleCatastali"+a).on("keyup",(function(e){var i=t("#forMapsCatasto_fogliCatastali"+a),n=t("#forMapsCatasto_cercaParticella"+a);""!=t(this).val()?n.html("Cerca particella"):""==i.val()?n.html("Cerca"):n.html("Cerca foglio"),t("#forMapsCatasto_cercaParticella"+a).prop("disabled",!1),t("#forMapsCatasto_captchaContainer"+a).hide()})),t("#forMapsCatasto_codiceVerificaConferma"+a).button().click((function(){t("#forMapsCatasto_comuniCatastali"+a).val()?t("#forMapsCatasto_codiceVerificaInput"+a).val()?t.ajax({url:s.urlBase+"GetToken/"+t("#forMapsCatasto_codiceVerificaInput"+a).val(),contentType:"application/json",dataType:"jsonp",context:t(this)}).done((function(i){var n=JSON.parse(i);1==n.result?(e=n.token,t("#forMapsCatasto_captchaContainer"+a).hide(),c(),t("#forMapsCatasto_cercaParticella"+a).prop("disabled",!1)):(h(),alert("Inserire il nuovo codice per proseguire"))})).fail((function(t,e,i){})).always((function(){})):alert("Inserisci il testo contenuto nell'immagine per proseguire"):alert("Seleziona un comune per proseguire")})),t("#forMapsCatasto_codiceVerificaReload"+a).click((function(t){t.preventDefault(),h()})),t("#forMapsCatasto_cercaParticella"+a).button().click((function(){c()})),{AccendiLayerWMS:function(e,i,a){t.each(n.state.WMSOverlays,(function(n,s){s.NomeInterno==e&&(t("#wms_check"+s.Id).prop("checked",i).change(),a&&t("#wms_range"+s.Id).slider("value",a))}))}}}}(jQuery),function(t){var e=[{crs:"4326",key:"Provincia Trento Particelle Catastali",tileSize:256,title:"Provincia Trento",internalName:"provinciaTrentoParticelleCatastali",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Cartografia_Catastale_Trentino_Alto_Adige/wms?",version:"1.3.0",minZoomLevel:15,maxScaleDenominator:"25000"},{crs:"4326",key:"Provincia Bolzano Particelle Catastali",tileSize:256,title:"Provincia Bolzano",internalName:"provinciaBolzanoParticelleCatastali",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Cartografia_Catastale_Trentino_Alto_Adige/wms?",version:"1.3.0",minZoomLevel:15,maxScaleDenominator:"25000"}];t.fn.extend({forMapsTavolare:function(i){return i=t.extend({},{urlComuni:"https://wcf.stimatrixcity.it/daticatastali.svc/elencocomuniget",urlParticelle:"https://wcf.stimatrixcity.it/daticatastali.svc/elencoparticelleget",marker:null},i),this.each((function(){!function(i,n,a){var s=i.map,o=i.getBanner()+'<div id="wmsCatastoTavolare_container'+n+'" class="wmsCatastoTavolare_container">                                    <h2>Livelli particelle catasto tavolare</h2>                                    <ul id="wmsCatastoTavolare_ul'+n+'" class="wms_container"></ul>                                </div>',r='<div id="ricercaParticelle_container'+n+'" class="ricercaParticelle_container">                                    <h2>Ricerca particelle</h2>                                    <label for="rp_comuni" class="rp_labelComuni">Comune catastale: </label>\t\t\t\t\t                <select id="rp_comuni'+n+'" class="remoteSelect">\t\t\t\t\t\t                <option value="">Seleziona un comune</option>\t\t\t\t\t                </select>\t\t\t\t\t                <label for="rp_particella" class="rp_labelParticella">Particella: </label>\t\t\t\t\t                <input type="text" id="rp_particella'+n+'">\t\t\t\t\t                <button type="button" id="rp_aggiungiParticella'+n+'">Visualizza particella in mappa</button>                                </div>',l=t(document.createElement("div")).html('<div id="tavolare_container'+n+'" class="tavolare_container">'+o+r+"</div>");function h(e){e.length>0?t.each(e,(function(t,e){var n=e.Particella,a=e.Titolo,o=L.latLng(e.Latitudine,e.Longitudine);idRicerca="tavRicerca"+i.getRandomInt(),i.aggiungiRicerca(idRicerca,"Particella "+a,1),i.addMarker({idIcona:"red",draggable:!1,etichetta:n,denominazione:"Particella "+a,latLng:o,idRicerca:idRicerca}),s.flyTo(o,15)})):alert("Nessun risultato disponibile")}i.addSideBar(n,"tav","Catasto tavolare","TAV",l),t("#ricercaParticelle_container"+n+" button").button(),t.each(e,(function(t,e){i.caricaWMS(s,e,"#wmsCatastoTavolare_ul"+n)})),1==t("#rp_comuni"+n+" option").length&&t.getJSON(a.urlComuni+"?callback=?",(function(e){var i=[];t.each(e,(function(t,e){var n="";e.CatastoTavolare&&(n=' class="tavolare"'),i.push('<option value="'+e.Id+'"'+n+">"+e.Denominazione+"</option>")})),t("#rp_comuni"+n).append(i.join("")).select2()})),t("#rp_aggiungiParticella"+n).click((function(){var e="";if(""==t("#rp_comuni"+n).val()&&(e+="Selezionare un comune\n"),""==t("#rp_particella"+n).val()&&(e+="Specificare una particella\n"),""==e){var i=a.urlParticelle+"?comune="+t("#rp_comuni"+n).val()+"&foglio=&particella="+t("#rp_particella"+n).val()+"&callback=?";t.getJSON(i,h)}else alert(e)}))}(this,this.getRandomInt(),i)}))}})}(jQuery),function(t){var e=[{crs:"4326",key:"ZoneOMIFasce",tileSize:512,title:"Fasce",internalName:"zoneOmiFasce",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Zone_OMI_Italia/wms?",version:"1.3.0",minZoomLevel:12,maxScaleDenominator:"250000"},{crs:"4326",key:"ZoneOMIConfini",tileSize:512,title:"Zone",internalName:"zoneOmiConfini",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Zone_OMI_Italia/wms?",version:"1.3.0",minZoomLevel:12,maxScaleDenominator:"250000"},{crs:"4326",key:"ZoneOMIEtichette",tileSize:512,title:"Codici identificativi",internalName:"zoneOmiEtichette",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Zone_OMI_Italia/wms?",version:"1.3.0",minZoomLevel:12,maxScaleDenominator:"250000"}];t.fn.extend({forMapsOmi:function(e){return e=t.extend({},{baseUrl:"https://www.formaps.it/WS/ValoriOmi/"},e),this.each((function(){var t=this.getRandomInt();this.ForMapsOmi=new ForMapsOmiControl(this,t,e)}))}}),ForMapsOmiControl=function(i,n,a){var s=i.map,o=t(document.createElement("div")).html('<div id="omi_container'+n+'" class="omi_container">'+i.getBanner()+'<div id="wmsOmi_container'+n+'" class="wmsOmi_container">                                                                        <h2>Livelli zone OMI 2018/2</h2>                                                                        <ul id="wmsOmi_ul'+n+'" class="wms_container"></ul>                                                                    </div>                                                                    <div id="ricercaOmi_container'+n+'" class="ricercaOmi_container">                                                                        <h2>Ricerca valori OMI 2018/2</h2>                                                                        <p>Provincia catastale</p>                                                                        <div id="ricercaOmi_provinceCatastali'+n+'" class="ricercaOmi_select"></div>                                                                        <p>Comune catastale</p>                                                                        <div id="ricercaOmi_comuniCatastali'+n+'" class="ricercaOmi_select"></div>                                                                        <p>Zona OMI</p>                                                                        <div id="ricercaOmi_zoneOmi'+n+'" class="ricercaOmi_select"></div>                                                                        <p>Destinazione</p>                                                                        <div id="ricercaOmi_destinazioni'+n+'" class="ricercaOmi_select"></div>                                                                        <p>Categoria catastale/Tipologia edilizia</p>                                                                        <div id="ricercaOmi_tipologieEdilizie'+n+'" class="ricercaOmi_select"></div>                                                                        <div class="ricercaOmi_button">                                                                            <button id="ricercaOmi_cercaOmi'+n+'" type="button">Cerca</button>                                                                            <div class="ricercaOmi_individuaZonaContainer">                                                                                <input id="ricercaOmi_individuaZona'+n+'" type="checkbox">                                                                                <label for="ricercaOmi_individuaZona'+n+'">Individua la zona OMI sulla mappa</label>                                                                            </div>                                                                        </div>                                                                        <div id="ricercaOmiRisultati'+n+'" class="ricercaOmiRisultati">                                                                            <h3>Risultati</h3>                                                                            <div class="ricercaOmiRisultati_tabs">\t\t                                                                        <ul>\t\t\t                                                                        <li><a href="#risultatiOmiValoriMercato'+n+'">Prezzo <small>(â¬/mq)</small></a></li>\t\t\t                                                                        <li><a href="#risultatiOmiValoriLocazione'+n+'">Reddito <small>(â¬/mq x mese)</small></a></li>                                                                                    <li><a href="#risultatiOmiSaggioAnnuo'+n+'">Saggio annuo <small>(i=R/P)</small></a></li>\t\t                                                                        </ul>                                                                                <div id="risultatiOmiValoriMercato'+n+'">                                                                                    <table class="valoriMercato forMapsRicercaRisultati">                                                                                        <thead>                                                                                            <tr><th style="width:40%">Tipologia edilizia</th><th style="width:30%">Stato</th><th class="ricercaOmiRisultatiValori">Min</th><th class="ricercaOmiRisultatiValori">Max</th></tr>                                                                                        </thead>                                                                                        <tbody></tbody>                                                                                    </table>                                                                                </div>                                                                                <div id="risultatiOmiValoriLocazione'+n+'">                                                                                    <table class="valoriLocazione forMapsRicercaRisultati">                                                                                        <thead>                                                                                            <tr><th style="width:40%">Tipologia edilizia</th><th style="width:30%">Stato</th><th class="ricercaOmiRisultatiValori">Min</th><th class="ricercaOmiRisultatiValori">Max</th></tr>                                                                                        </thead>                                                                                        <tbody></tbody>                                                                                    </table>                                                                                </div>                                                                                <div id="risultatiOmiSaggioAnnuo'+n+'">                                                                                    <table class="saggioAnnuo forMapsRicercaRisultati">                                                                                        <thead>                                                                                            <tr><th style="width:40%">Tipologia edilizia</th><th style="width:30%">Stato</th><th class="ricercaOmiRisultatiValori">Min</th><th class="ricercaOmiRisultatiValori">Max</th></tr>                                                                                        </thead>                                                                                        <tbody></tbody>                                                                                    </table>                                                                                </div>                                                                            </div>                                                                        </div>                                                                    </div>                                                                </div>');function r(){var e=t("#ricercaOmi_zoneOmi"+n);e.select2("val",""),e.select2("enable",!1),l()}function l(){var e=t("#ricercaOmi_destinazioni"+n);e.select2("val",""),e.select2("enable",!1),h()}function h(){var e=t("#ricercaOmi_tipologieEdilizie"+n);e.select2("val",""),e.select2("enable",!1)}return i.addSideBar(n,"omi","Valori OMI","OMI",o),t(".ricercaOmiRisultati_tabs").tabs(),t.each(e,(function(t,e){i.caricaWMS(s,e,"#wmsOmi_ul"+n)})),t("#ricercaOmi_provinceCatastali"+n).select2({placeholder:"Seleziona la provincia",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:a.baseUrl+"GetProvince",dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){if(""!=t(this).val()){var i=t("#ricercaOmi_comuniCatastali"+n);i.data("select2")?i.select2("val","",!0):t("#ricercaOmi_comuniCatastali"+n).select2({placeholder:"Seleziona il comune",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:function(){return a.baseUrl+"GetComuni?idProvincia="+t("#ricercaOmi_provinceCatastali"+n).val()},dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){if(""!=t(this).val()){var i=t("#ricercaOmi_zoneOmi"+n);i.data("select2")?i.select2("val","",!0):t("#ricercaOmi_zoneOmi"+n).select2({placeholder:"Seleziona la zona OMI",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:function(){return a.baseUrl+"GetZoneOmi?idComune="+t("#ricercaOmi_comuniCatastali"+n).val()},dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){if(""!=t(this).val()){var i=t("#ricercaOmi_destinazioni"+n);i.data("select2")?i.select2("val","",!0):t("#ricercaOmi_destinazioni"+n).select2({placeholder:"Seleziona la destinazione",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:a.baseUrl+"GetDestinazioni",dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){if(""!=t(this).val()){var i=t("#ricercaOmi_tipologieEdilizie"+n);i.data("select2")?i.select2("val","",!0):t("#ricercaOmi_tipologieEdilizie"+n).select2({placeholder:"Seleziona la tipologia edilizia",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:function(){return a.baseUrl+"GetTipologieEdilizie?destinazione="+t("#ricercaOmi_destinazioni"+n).val()},dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}),i.select2("enable",!0)}else h()})),i.select2("enable",!0)}else l()})),i.select2("enable",!0)}else r()})),i.select2("enable",!0)}else(s=t("#ricercaOmi_comuniCatastali"+n)).select2("val",""),s.select2("enable",!1),r();var s})),t("#ricercaOmi_cercaOmi"+n).button().click((function(){var e;e=t("#ricercaOmiRisultati"+n),t("#ricercaOmiRisultati"+n+" table tbody").html(""),e.hide();var o=t("#ricercaOmi_comuniCatastali"+n).val(),r=t("#ricercaOmi_zoneOmi"+n).val(),l=t("#ricercaOmi_destinazioni"+n).val(),h=t("#ricercaOmi_tipologieEdilizie"+n).val(),c=a.baseUrl+"GetValoriOmi?idComune="+o+"&linkZona="+r+"&destinazione="+l+"&tipologiaEdilizia="+h;r?(t("#ricercaOmi_individuaZona"+n).prop("checked")&&t.ajax({url:a.baseUrl+"GetZonaOmi?linkZona="+r,dataType:"jsonp",contentType:"application/json",success:function(e){!function(){var e,n;t.each(i.state.WMSOverlays,(function(t,i){switch(i.NomeInterno){case"zoneOmiConfini":e=i.Id;break;case"zoneOmiEtichette":n=i.Id}}));var a=t("#wms_check"+e).prop("checked"),s=t("#wms_check"+n).prop("checked");0!=a&&0!=s||confirm("Vuoi visualizzare anche i livelli relativi alle zone OMI?\nPuoi sempre disabilitarlo successivamente nella sezione OMI.")&&(0==a&&t("#wms_check"+e).click(),0==s&&t("#wms_check"+n).click())}();var n=[],a=L.latLng(e.LatitudineMin,e.LongitudineMin);n.push(a);var o=L.latLng(e.LatitudineMax,e.LongitudineMax);n.push(o),s.fitBounds(n)}}),t.ajax({url:c,dataType:"jsonp",contentType:"application/json",success:function(e){var i=t("#risultatiOmiValoriMercato"+n+" table tbody"),a=t("#risultatiOmiValoriLocazione"+n+" table tbody"),s=t("#risultatiOmiSaggioAnnuo"+n+" table tbody");e.length>0?t.each(e,(function(t,e){var n=e.ValoreOmiMin,o=e.ValoreOmiMax,r=e.ValoreLocazioneMin,l=e.ValoreLocazioneMax;i.append("<tr><td>"+e.TipologiaEdilizia+"</td><td>"+e.Stato+'</td><td class="ricercaOmiRisultatiValori">'+(n>0?n.formatta(0,",","."):"-")+'</td><td class="ricercaOmiRisultatiValori">'+(o>0?o.formatta(0,",","."):"-")+"</td></tr>"),a.append("<tr><td>"+e.TipologiaEdilizia+"</td><td>"+e.Stato+'</td><td class="ricercaOmiRisultatiValori">'+(r>0?r.formatta(1,",","."):"-")+'</td><td class="ricercaOmiRisultatiValori">'+(l>0?l.formatta(1,",","."):"-")+"</td></tr>");var h="-";n>0&&r>0&&(h=(12*r/n*100).formatta(2,",",".")+"%");var c="-";o>0&&l>0&&(c=(12*l/o*100).formatta(2,",",".")+"%"),s.append("<tr><td>"+e.TipologiaEdilizia+"</td><td>"+e.Stato+'</td><td class="ricercaOmiRisultatiValori">'+h+'</td><td class="ricercaOmiRisultatiValori">'+c+"</td></tr>")})):(i.append('<tr><td colspan="4" style="text-align:center">Nessun risultato</td></tr>'),a.append('<tr><td colspan="4" style="text-align:center">Nessun risultato</td></tr>'),a.append('<tr><td colspan="4" style="text-align:center">Nessun risultato</td></tr>')),t("#ricercaOmiRisultati"+n).show()}})):alert("Selezionare almeno una zona OMI")})),{AccendiLayerWMS:function(e,i,n){t.each(overlayWMSOmi,(function(a,s){s.NomeInterno==e&&(t("#wmsOmi_check"+s.Id).prop("checked",i).change(),n&&t("#wmsOmi_range"+s.Id).slider("value",n))}))}}}}(jQuery),function(t){var e,i=[{crs:"3857",key:"Limiti amministrativi regionali",tileSize:512,title:"Limiti regionali",internalName:"limitiRegionali",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Limiti_Amministrativi_Italia_3857/wms?",version:"1.3.0",minZoomLevel:6,maxScaleDenominator:"10000000"},{crs:"3857",key:"Limiti amministrativi provinciali",tileSize:1024,title:"Limiti provinciali",internalName:"limitiProvinciali",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Limiti_Amministrativi_Italia_3857/wms?",version:"1.3.0",minZoomLevel:6,maxScaleDenominator:"10000000"},{crs:"3857",key:"Limiti amministrativi comunali",tileSize:1024,title:"Limiti comunali",internalName:"limitiComunali",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Limiti_Amministrativi_Italia_3857/wms?",version:"1.3.0",minZoomLevel:6,maxScaleDenominator:"10000000"},{crs:"4326",key:"Sezioni censuarie 2011",tileSize:512,title:"Sezioni censuarie 2011",internalName:"sezioniCensuarie2011",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Istat_Italia/wms?",version:"1.3.0",minZoomLevel:15,maxScaleDenominator:"25000"}];t.fn.extend({forMapsLivelliAmministrativi:function(e){return e=t.extend({},{sideBar:!1},e),this.each((function(){var t=this.getRandomInt();this.ForMapsLivelliAmministrativi=new ForMapsLivelliAmministrativiControl(this,t,e)}))}}),ForMapsLivelliAmministrativiControl=function(n,a,s){var o=n.map,r=t(document.createElement("div")).html('<div id="forMapsLivelliAmministrativi_container'+a+'" class="forMapsLivelliAmministrativi_container">'+n.getBanner()+'<h2>Livelli amministrativi</h2>                                                                    <ul id="forMapsLivelliAmministrativi_ul'+a+'" class="wms_container"></ul>                                                                    <div class="forMapsAccordiTerritoriali">                                                                        <h2>Accordi Territoriali</h2>                                                                        <ul id="forMapsAccordiTerritoriali_ul'+a+'" class="wms_container forMapsAccordiTerritoriali_ul"></ul>                                                                        <div id="forMapsAccordiTerritoriali_comuni'+a+'" class="remoteSelect"></div>                                                                        <table id="forMapsAccordiTerritoriali_risultati'+a+'" class="forMapsAccordiTerritoriali_risultati forMapsRicercaRisultati"><thead><tr><th>Data stipula</th><th>Comune ad alta intensitÃ  abitativa</th><th>Accordo Territoriale</th></tr></thead><tbody></tbody></table>                                                                    </div>                                                                    <div class="forMapsUfficiGiudiziari">                                                                        <h2>Territori di competenza dei tribunali</h2>                                                                        <div id="forMapsUfficiGiudiziari_tribunali'+a+'" class="remoteSelect"></div>                                                                        <ul id="forMapsUfficiGiudiziari_ul'+a+'" class="wms_container forMapsUfficiGiudiziari_ul"></ul>                                                                    </div>                                                                    <h2>Evidenzia comuni su mappa</h2>                                                                    <div style="display:flex;">                                                                        <div id="forMapsLivelliAmministrativi_comuni'+a+'" class="remoteSelect"></div>                                                                        <div class="forMapsLivelliAmministrativi_negativo_container"><input type="checkbox" id="forMapsLivelliAmministrativi_negativo'+a+'" checked="checked" value="true"><label for="forMapsLivelliAmministrativi_negativo'+a+'">Negativo</label></div>                                                                    </div>                                                                    <ul id="forMapsLivelliAmministrativi_evidenziaComuni'+a+'" class="wms_container"></ul>                                                                </div>');n.addSideBar(a,"amm","Livelli amministrativi","AMM",r),t.each([{crs:"3857",key:"Comuni Alta Intensita Abitativa",tileSize:1024,title:"Comuni ad alta intensitÃ  abitativa",internalName:"comuniAltaIntensitaAbitativa",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Limiti_Amministrativi_Italia_3857/wms?",version:"1.3.0",minZoomLevel:6,maxScaleDenominator:"10000000"},{crs:"3857",key:"Accordi Territoriali",tileSize:1024,title:"Accordi Territoriali disponibili",internalName:"accordiTerritorialiSunia",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Limiti_Amministrativi_Italia_3857/wms?",version:"1.3.0",minZoomLevel:6,maxScaleDenominator:"10000000",styles:"sunia"}],(function(t,e){n.caricaWMS(o,e,"#forMapsAccordiTerritoriali_ul"+a)})),t("#forMapsAccordiTerritoriali_comuni"+a).select2({placeholder:"Seleziona un comune per ottenere l'accordo territoriale",width:"100%",minimumInputLength:3,allowClear:!0,ajax:{url:"https://www.formaps.it/ws/AccordiTerritoriali/GetComuni",dataType:"jsonp",contentType:"application/json",quietMillis:1e3,data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){t.ajax({url:"https://www.formaps.it/ws/AccordiTerritoriali/GetAccordiTerritorialiAjax/"+t(this).val(),dataType:"jsonp",contentType:"application/json",context:this,success:function(e){var i=[];t.each(e,(function(t,e){i.push("<tr>                                                <td>"+e.DataStipula+"</td>                                                <td>"+(e.Cipe?'<span class="fas fa-check"></span>':"")+'</td>                                                <td><a href="https://www.formaps.it/ws/AccordiTerritoriali/DownloadAccordoTerritoriale/'+e.Id+'" title="Scarica l\'accordo territoriale" target="_blank">'+e.Titolo+"</a></td>                                            </tr>")})),t("tbody","#forMapsAccordiTerritoriali_risultati"+a).html(i.join("")),t("#forMapsAccordiTerritoriali_risultati"+a).show()},error:function(t,e,i){console.log(i)}})}));var l={crs:"3857",key:"Tribunali",tileSize:512,title:"Competenza territoriale tribunale",internalName:"tribunali",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Limiti_Amministrativi_Italia_3857/wms?",version:"1.3.0",minZoomLevel:6,maxScaleDenominator:"10000000"},h=l.urlBase;idWmsTribunali=n.caricaWMS(o,l,"#forMapsUfficiGiudiziari_ul"+a);var c=n.getLayerWMS(o,idWmsTribunali),u=t("#wms_check"+idWmsTribunali),d=t("#forMapsUfficiGiudiziari_tribunali"+a);d.select2({placeholder:"Seleziona un tribunale per visualizzarne il territorio di competenza",width:"100%",allowClear:!0,ajax:{url:"https://www.formaps.it/ws/UfficiGiudiziari/GetTribunali",dataType:"jsonp",contentType:"application/json",quietMillis:1e3,data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){var i=t(this).select2("data"),s=i;if(u.prop("checked",s?"checked":""),s)if(t("#forMapsUfficiGiudiziari_ul"+a).show(),c.UrlBase=h+"idUfficioGiudiziario="+t(this).val()+"&",c.Overlay.setUrl(c.UrlBase),i.bbox){var r=i.bbox.split(","),l=n.coordinatesFromString(r[0]+","+r[1]),d=n.coordinatesFromString(r[2]+","+r[3]),p=L.latLngBounds(l,d);o.flyToBounds(p)}else alert("Competenza territoriale non disponibile.\nIl tribunale potrebbe non essere piÃ¹ attivo.");else t("#forMapsUfficiGiudiziari_ul"+a).hide();n.toggleLayerWMS(o,idWmsTribunali,!!s)})),t.each(i,(function(t,e){n.caricaWMS(o,e,"#forMapsLivelliAmministrativi_ul"+a)}));var p={crs:"3857",key:"Comune evidenziato",tileSize:512,title:"Comuni evidenziati",internalName:"comuniEvidenziati",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Limiti_Amministrativi_Italia_3857/wms?",version:"1.3.0",minZoomLevel:7,maxScaleDenominator:"5000000",styles:"negativo"},f=p.urlBase;e=n.caricaWMS(o,p,"#forMapsLivelliAmministrativi_evidenziaComuni"+a);var m=n.getLayerWMS(o,e),g=t("#wms_check"+e),_=t("#forMapsLivelliAmministrativi_comuni"+a);function v(i,a){if(i.length>0){g.prop("disabled",""),n.toggleLayerWMS(o,e,g.prop("checked"));var s=[];if(t.each(i,(function(t,e){s.push(parseInt(e.id))})),m.UrlBase=f+"comuni="+s.join(",")+"&",m.Overlay.setUrl(m.UrlBase),a){var r=new L.LatLngBounds;t.each(i,(function(t,e){if(e.BBox){var i=n.boundsFromString(e.BBox);r.extend(i)}})),o.flyToBounds(r)}}else n.toggleLayerWMS(o,e,!1),g.prop("disabled","disabled"),g.prop("checked",""),m.UrlBase=f,m.Overlay.setUrl(m.UrlBase)}return g.prop("checked",""),g.prop("disabled","disabled"),_.select2({placeholder:"Seleziona il comune",minimumInputLength:3,allowClear:!0,multiple:!0,ajax:{url:"https://www.formaps.it/WS/Comuni/ListaComuni?bbox=true",dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t,page:e,pageLimit:10}},results:function(t,e){return{results:t.Items,more:10*e<t.Total}}}}).on("change",(function(e){var i=t(this).select2("data");g.prop("checked",i.length>0?"checked":""),v(i,!0)})),t("#forMapsLivelliAmministrativi_negativo"+a).on("change",(function(e){var i="positivo";t(this).prop("checked")&&(i="negativo"),m.Overlay.setParams({styles:i})})),{EvidenziaComune:function(i,n,s,o,r){null==o&&(o=!0),null==r&&(r=!0),t("#forMapsLivelliAmministrativi_negativo"+a).prop("checked",r).trigger("change"),i.length>0?(g.prop("checked",n?"checked":""),s&&t("#wms_range"+e).slider("value",s),"object"==typeof i?i.length>0&&(_.select2("data",i),v(i,o)):t.ajax({url:"https://www.formaps.it/WS/Comuni/ListaComuni?term="+i,context:t(this),dataType:"jsonp",contentType:"application/json",success:function(t){t.Items.length>0&&(_.select2("data",t.Items),v(t.Items,o))}})):_.select2("data",[]).trigger("change")},EvidenziaTribunale:function(e,i,n,a){null==a&&(a=!0),e?(u.prop("checked",i?"checked":""),n&&t("#wms_range"+idWmsTribunali).slider("value",n),d.select2("data",e).trigger("change")):d.select2("data","").trigger("change")},GetComuniEvidenziati:function(){return{Active:t("#wms_check"+e).prop("checked"),Opacity:t("#wms_range"+e).slider("value"),Comuni:_.select2("data"),Negativo:t("#forMapsLivelliAmministrativi_negativo"+a).prop("checked")}},GetTribunaleEvidenziato:function(){return{Active:t("#wms_check"+idWmsTribunali).prop("checked"),Opacity:t("#wms_range"+idWmsTribunali).slider("value"),Tribunale:d.select2("data")}}}}}(jQuery),function(t){var e={children:[{crs:"4326",key:"Punti fiduciali",tileSize:1024,title:"Punti fiduciali",internalName:"puntiFiduciali",urlBase:"https://wms.stimatrixcity.it/cgi-bin/STI_Punti_Fiduciali_Italia/wms?",version:"1.3.0",minZoomLevel:15,maxScaleDenominator:"25000"}]};function i(i,n,a){var s=i.map,o="pf_container"+n,r=t(document.createElement("div")).html('<div class="pf_container" id="'+o+'" class="pf_container">'+i.getBanner()+'<div id="wmsPuntiFiduciali_container'+n+'" class="wmsPuntiFiduciali_container">                                                                        <h2>Livello punti fiduciali</h2>                                                                        <ul id="wmsPuntiFiduciali_ul'+n+'" class="wms_container"></ul>                                                                    </div>                                                                    <div id="ricercaPuntiFiduciali_container'+n+'" class="ricercaPuntiFiduciali_container">                                                                        <h2>Ricerca punti fiduciali</h2>                                                                        <p>Comune</p>                                                                        <div class="ricercaPf_select" id="pf_comuneCodiceNazionale'+n+'"></div>                                                                        <p>Foglio</p>                                                                        <div class="ricercaPf_select" id="pf_foglio'+n+'"></div>                                                                        <p>Punto fiduciale</p>                                                                        <div class="ricercaPf_select" id="pf_puntoFiduciale'+n+'"></div>                                                                        <button type="button" id="pf_puntoFiducialeBtn'+n+'">Aggiungi a mappa</button>                                                                    </div>                                                                </div>');function l(){var e=t("#pf_puntoFiduciale"+n);e.select2("val",""),e.select2("enable",!1)}t("#wmsPuntiFiduciali_container"+n),i.addSideBar(n,"pf","Punti fiduciali","PF",r),t("#"+o+" button").button(),t.each(e.children,(function(t,e){i.caricaWMS(s,e,"#wmsPuntiFiduciali_ul"+n)})),t("#pf_comuneCodiceNazionale"+n).select2({placeholder:"Seleziona il comune",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:a.urlComuniLista,dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){if(""!=t(this).val()){var i=t("#pf_foglio"+n);i.data("select2")?i.select2("val","",!0):t("#pf_foglio"+n).select2({placeholder:"Seleziona il foglio",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:function(){return a.urlWebService+"/GetFogli?idComune="+t("#pf_comuneCodiceNazionale"+n).val()},dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}).on("change",(function(e){if(""!=t(this).val()){var i=t("#pf_puntoFiduciale"+n);i.data("select2")?i.select2("val","",!0):t("#pf_puntoFiduciale"+n).select2({placeholder:"Seleziona il punto fiduciale",width:"100%",minimumInputLength:0,allowClear:!0,ajax:{url:function(){var e=t("#pf_comuneCodiceNazionale"+n).val(),i=t("#pf_foglio"+n).val().split("|");return a.urlWebService+"/GetPuntiFiduciali?idComune="+e+"&foglio="+i[0]+"&sezione="+i[1]},dataType:"jsonp",contentType:"application/json",data:function(t,e){return{term:t}},results:function(t,e){return{results:t.items}}}}),i.select2("enable",!0)}else l()})),i.select2("enable",!0)}else(s=t("#pf_foglio"+n)).select2("val",""),s.select2("enable",!1),l();var s})),t("#pf_puntoFiducialeBtn"+n).on("click",(function(e){if(""!=t("#pf_puntoFiduciale"+n).val()){var a=t("#pf_puntoFiduciale"+n).val().split("|");o=a[3],r=L.latLng(a[0],a[1]),idRicerca="pfRicerca"+i.getRandomInt(),i.aggiungiRicerca(idRicerca,"Punto fiduciale "+t.trim(o),1),i.addMarker({idIcona:"green",draggable:!1,etichetta:o,denominazione:"Punto fiduciale "+t.trim(o),latLng:r,idRicerca:idRicerca}),s.flyTo(r,15)}else alert("Ã necessario specificare un punto fiduciale per proseguire con l'operazione");var o,r}))}t.fn.extend({forMapsPuntiFiduciali:function(e){return e=t.extend({},{urlWebService:"https://www.formaps.it/WS/PuntiFiduciali",urlComuniLista:"https://www.formaps.it/WS/Comuni/ListaComuniStimatrixCity"},e),this.each((function(){new i(this,this.getRandomInt(),e)}))}})}(jQuery),function(t){var e=[],i=[{title:"Scuole",internalName:"scuole",icon:"school.png",features:[{title:"UniversitÃ ",internalName:"universita",icon:"",type:"amenity",key:"university"},{title:"Istituto",internalName:"istituto",icon:"",type:"amenity",key:"colleges"},{title:"Asilo",internalName:"asilo",icon:"",type:"amenity",key:"kindergarten"},{title:"Scuola",internalName:"scuola",icon:"",type:"amenity",key:"school"},{title:"Scuola di musica",internalName:"scuolaDiMusica",icon:"",type:"amenity",key:"music_school"},{title:"Biblioteca",internalName:"biblioteca",icon:"",type:"amenity",key:"library"}]},{title:"Luoghi di ristoro",internalName:"luoghiDiRistoro",icon:"restaurant.png",features:[{title:"Ristorante",internalName:"ristorante",icon:"",type:"amenity",key:"restaurant"},{title:"Bar",internalName:"bar",icon:"",type:"amenity",key:"bar"},{title:"CaffÃ¨",internalName:"caffe",icon:"",type:"amenity",key:"cafe"},{title:"Gelateria",internalName:"gelateria",icon:"",type:"amenity",key:"ice_cream"},{title:"Fast food",internalName:"fastFood",icon:"",type:"amenity",key:"fast_food"},{title:"Pub",internalName:"pub",icon:"",type:"amenity",key:"pub"}]},{title:"Banche",internalName:"banche",icon:"bank.png",features:[{title:"Banca",internalName:"banca",icon:"",type:"amenity",key:"bank"},{title:"Bancomat",internalName:"bancomat",icon:"",type:"amenity",key:"atm"}]},{title:"Salute",internalName:"salute",icon:"medicine.png",features:[{title:"Clinica",internalName:"clinica",icon:"",type:"amenity",key:"clinic"},{title:"Dentista",internalName:"dentista",icon:"",type:"amenity",key:"dentist"},{title:"Dentista",internalName:"dentista",icon:"",type:"amenity",key:"dentist"},{title:"Ambulatorio medico",internalName:"ambulatorioMedico",icon:"",type:"amenity",key:"doctors"},{title:"Ospedale",internalName:"ospedale",icon:"",type:"amenity",key:"hospital"},{title:"Farmacia",internalName:"farmacia",icon:"",type:"amenity",key:"pharmacy"},{title:"Veterinario",internalName:"veterinario",icon:"",type:"amenity",key:"veterinary"}]},{title:"Svago e cultura",internalName:"svagoCultura",icon:"theater.png",features:[{title:"Teatro",internalName:"teatro",icon:"",type:"amenity",key:"theatre"},{title:"Cinema",internalName:"cinema",icon:"",type:"amenity",key:"cinema"},{title:"Centro sociale",internalName:"centroSociale",icon:"",type:"amenity",key:"social_centre"},{title:"Centro comunitario",internalName:"centroComunitario",icon:"",type:"amenity",key:"community_centre"},{title:"Polo artistico",internalName:"poloArtistico",icon:"",type:"amenity",key:"arts_centre"},{title:"Planetario",internalName:"planetario",icon:"",type:"amenity",key:"planetarium"},{title:"Discoteca",internalName:"discoteca",icon:"",type:"amenity",key:"nightclub"},{title:"Balera",internalName:"balera",icon:"",type:"leisure",key:"dance"}]},{title:"Centri commerciali",internalName:"centriCommerciali",icon:"supermarket.png",features:[{title:"Mercato",internalName:"mercato",icon:"",type:"amenity",key:"marketplace"},{title:"Supermercato",internalName:"supermercato",icon:"",type:"shop",key:"supermarket"}]},{title:"Trasporti",internalName:"trasporti",icon:"busstop.png",features:[{title:"Fermata autobus",internalName:"fermataAutobus",icon:"",type:"highway",key:"bus_stop"},{title:"Stazione",internalName:"stazione",icon:"",type:"public_transport",key:"station"},{title:"Stazione dei treni",internalName:"stazioneTreni",icon:"",type:"building",key:"train_station"}]},{title:"All'aperto",internalName:"allAperto",icon:"tree.png",features:[{title:"Parco",internalName:"parco",icon:"",type:"leisure",key:"park"},{title:"Giardino",internalName:"giardino",icon:"",type:"leisure",key:"garden"},{title:"Parco giochi",internalName:"parcoGiochi",icon:"",type:"leisure",key:"playground"},{title:"Lido",internalName:"lido",icon:"",type:"leisure",key:"beach_resort"}]}];t.fn.extend({forMapsPoi:function(e){return e=t.extend({},{},e),this.each((function(){var t=this.getRandomInt();this.ForMapsPoi=new ForMapsPoiControl(this,t,e)}))}}),ForMapsPoiControl=function(n,a,s){var o,r,l,h=n.map,c=t(document.createElement("div")).html('<div id="poi_container'+a+'" class="poi_container">'+n.getBanner()+'<h2>Ricerca punti di interesse (POI)</h2>                                                                    <p>I punti di interesse sono forniti tramite il servizio <a href="http://www.overpass-api.de/" title="Maggiori informazioni" target="_blank">Overpass API</a> basato sui dati "Â© OpenStreetMap contributors" distribuiti con licenza <a href="https://opendatacommons.org/licenses/odbl/" title="Maggiori informazioni" target="_blank">Open Data Commons Open Database License (ODbL)</a> dalla <a href="https://www.openstreetmap.org/copyright" title="Maggiori informazioni" target="_blank">OpenStreetMap Foundation (OSMF)</a>.</p>                                                                    <ul id="ricercaPoi_ul'+a+'" class="ricercaPoi"></ul>                                                                    <div id="poiCircle'+a+'" class="poiCircle">                                                                        <select id="poiCircleRadius'+a+'" class="poiCircleRadius">                                                                            <option value="250">Cerca nel raggio di 250 m</option>                                                                            <option value="400">Cerca nel raggio di 400 m (5 min. a piedi)</option>                                                                            <option value="500">Cerca nel raggio di 500 m</option>                                                                            <option value="800">Cerca nel raggio di 800 m (10 min. a piedi)</option>                                                                            <option value="1000">Cerca nel raggio di 1000 m</option>                                                                            <option value="1500">Cerca nel raggio di 1500 m</option>                                                                            <option value="2000">Cerca nel raggio di 2000 m</option>                                                                        </select>                                                                        <button id="poiCircleButton'+a+'" class="poiCircleButton" title="Riposiziona l\'area di ricerca al centro della mappa"><span class="fas fa-crosshairs"></span></button>                                                                    </div>                                                                    <button id="ricerca_poi'+a+'" type="button" style="margin-bottom:20px;">Cerca</button>                                                                    <button id="resettaRicerca_poi'+a+'" class="resettaRicerca_poi" type="button" style="margin-bottom:20px;">Resetta la ricerca</button>                                                                    <div id="ricercaPoiRisultati'+a+'" class="ricercaPoiRisultati">                                                                        <h3>Risultati</h3>                                                                    </div>                                                                </div>');function u(){var t,e=!1;return t=r.getBounds(),h.getBounds().intersects(t)?e=!0:confirm("L'area di ricerca POI non Ã¨ visibile sulla mappa attuale, desideri riposizionarla al centro della mappa?")&&(l.setLatLng(h.getCenter()),h.flyToBounds(r.getBounds()),e=!0),e}function d(){var i=t("#ricercaPoiRisultati"+a);t("ul",i).remove(),i.hide(),e.length>0&&(t.each(e,(function(t,i){i&&(e[t].remove(),e[t]=null)})),h.poiAggiunti=e)}n.addSideBar(a,"poi","Ricerca punti di interesse","POI",c),t.each(i,(function(e,i){t("#ricercaPoi_ul"+a).append('<li><input type="checkbox" id="checkCategoriaPoi_'+i.internalName+'" value="'+i.internalName+'" name="checkCategoriaPoi'+a+'"> '+i.title+"</li>")})),t("#poiCircleButton"+a).button().click((function(){l.setLatLng(h.getCenter())})),t("#resettaRicerca_poi"+a).button().click((function(){d()})),t("#ricerca_poi"+a).button().click((function(){d(),u();var s=[];t("input[name=checkCategoriaPoi"+a+"]:checked").each((function(){s.push(t(this).val())})),s.length>0?(t("#ricercaPoiRisultati"+a).show(),t("#ricercaPoiRisultati"+a).append("<ul/>"),t("#resettaRicerca_poi"+a).hide(),function i(s,o,l){var c=s[l];if(o.includes(c.internalName)){if(0==t("#ricercaPoiRisultatiCategoryLi_"+c.internalName).length){var u=t("<li/>").appendTo("#ricercaPoiRisultati"+a+">ul");u.attr("id","ricercaPoiRisultatiCategoryLi_"+c.internalName);var d=t('<input type="checkbox" id="ricercaPoiRisultatiCheck_'+c.internalName+'" value="'+c.internalName+"_"+a+'" checked="checked">').appendTo(u);u.append('<label><img src="'+n.percorsoIcone+"poi/"+c.icon+'" alt="'+c.title+'"> '+c.title+'</label><span id="ricercaPoiRisultatiCount_'+c.internalName+'" class="ricercaPoiRisultatiCount"><span class="loading fas fa-spinner fa-pulse"></span><span>'),d.on("click change",(function(){var i=t(this).val(),n=this.checked;t.each(e,(function(t,e){e&&e.options.searchKey==i&&(n?e.addTo(h):e.remove())}))}))}var p=[];t.each(c.features,(function(t,e){p.push('node["'+e.type+'" = "'+e.key+'"](around:'+r.getRadius()+","+r.getLatLng().lat+","+r.getLatLng().lng+');way["'+e.type+'" = "'+e.key+'"](around:'+r.getRadius()+","+r.getLatLng().lat+","+r.getLatLng().lng+');relation["'+e.type+'" = "'+e.key+'"](around:'+r.getRadius()+","+r.getLatLng().lat+","+r.getLatLng().lng+");")}));var f=p.join("");t.ajax({url:"https://overpass-api.de/api/interpreter?data=[out:json];("+f+");out center;",contentType:"application/json",context:t(this)}).done((function(r){var d=0;t.each(r.elements,(function(t,i){var s,o;"node"==i.type?(s=i.lat,o=i.lon):"way"!=i.type&&"relation"!=i.type||(s=i.center.lat,o=i.center.lon);var r=L.latLng(s,o);if(i.tags.name){d++;var l=L.marker(r,{icon:L.icon({iconUrl:n.percorsoIcone+"poi/"+c.icon,iconSize:[32,37],iconAnchor:[16,35]}),pmIgnore:!0,title:i.tags.name,searchKey:c.internalName+"_"+a}).bindPopup(i.tags.name,{offset:L.point(0,-25)}).addTo(h);e.push(l)}})),t(".loading",u).remove(),t("#ricercaPoiRisultati"+a+" #ricercaPoiRisultatiCount_"+c.internalName).html(d),l<s.length-1&&i(s,o,++l)})).fail((function(t,e,n){console.log(n),l<s.length-1&&i(s,o,l)})).always((function(){}))}else l<s.length-1&&i(s,o,++l)}(i,s,0),h.poiAggiunti=e,t("#resettaRicerca_poi"+a).show()):alert("Selezionare almeno una categoria di ricerca")})),t("#poiCircleRadius"+a).select2({minimumResultsForSearch:-1}),t("#poiCircleRadius"+a).on("change",(function(){r.setRadius(parseInt(this.value)),u()&&h.flyToBounds(r.getBounds())})),n.SideBar.on("tabChanged opening",(function(e,i){var n,s;t(i).hasClass("poiTab")?t(".sidebar-content").addClass("transparent"):t(".sidebar-content").removeClass("transparent"),o?t(i).hasClass("poiTab")?(o.addTo(h),u()):o.remove():t(i).hasClass("poiTab")&&(n=parseInt(t("#poiCircleRadius"+a).val()),s=L.divIcon({className:"poiCircleMarkerIcon",iconSize:L.point(30,30)}),(l=L.marker(h.getCenter(),{icon:s,draggable:!0,pmIgnore:!0})).on("drag move",(function(){r.setLatLng(this.getLatLng())})),r=L.circle(l.getLatLng(),{radius:n,color:"#FF0000",opacity:.5,weight:2,fillColor:"#FF0000",fillOpacity:.05,interactive:!1,pmIgnore:!0}),o=L.layerGroup([l,r]).addTo(h),h.flyToBounds(r.getBounds()))})),n.SideBar.on("closing",(function(){o&&o.remove()}))}}(jQuery);var annuncioImmobiliareStimatrixResult="";!function(t){var e=L.markerClusterGroup(),i=[],n=[];t.fn.extend({forMapsAnnunci:function(e){return e=t.extend({},{conversioneAnnunci:!0,conversioneAnnunciTipo:"riferimento",urlImmaginiXXL:!1,agenzia:!1,urlBase:"https://www.formaps.it/WS/AnnunciImmobiliari/"},e),this.each((function(){var t=this.getRandomInt();this.ForMapsAnnunci=new ForMapsAnnunciControl(this,t,e)}))}}),ForMapsAnnunciControl=function(a,s,o){var r,l,h,c=a.map,u=t(document.createElement("div")).html('<div id="annunci_container'+s+'" class="annunci_container">'+a.getBanner()+'<h2>Ricerca annunci immobiliari</h2>                                                                    <div id="annunciCategorie'+s+'" class="remoteSelect"></div>                                                                    <div id="annunciTipologie'+s+'" class="remoteSelect"></div>                                                                    <div id="annunciSottoTipologie'+s+'" class="remoteSelect"></div>                                                                    <div id="annunciStati'+s+'" class="remoteSelect"></div>                                                                    <div class="forMapsInputRangeContainer">                                                                        <div class="forMapsInputRange"><span class="prefix">da</span><input id="annunciPrezzoMinimo'+s+'" type="text" /><span class="suffix">â¬</span></div>                                                                        <div class="forMapsInputRange"><span class="prefix">a</span><input id="annunciPrezzoMassimo'+s+'" type="text" /><span class="suffix">â¬</span></div>                                                                    </div >                                                                    <div class="forMapsInputRangeContainer">                                                                        <div class="forMapsInputRange"><span class="prefix">da</span><input id="annunciSuperficieMinima'+s+'" type="text" /><span class="suffix">m&sup2;</span></div>                                                                        <div class="forMapsInputRange"><span class="prefix">a</span><input id="annunciSuperficieMassima'+s+'" type="text" /><span class="suffix">m&sup2;</span></div>                                                                    </div >                                                                    <div class="forMapsInputRangeContainer">                                                                        <div class="forMapsInputRange"><span class="prefix">da</span><input id="annunciLocaliMinimo'+s+'" type="text" /><span class="suffix">locali</span></div>                                                                        <div class="forMapsInputRange"><span class="prefix">a</span><input id="annunciLocaliMassimo'+s+'" type="text" /><span class="suffix">locali</span></div>                                                                    </div >                                                                    <div id="annunciCircle'+s+'" class="annunciCircle">                                                                        <select id="annunciCircleRadius'+s+'" class="annunciCircleRadius">                                                                            <option value="100">Nel raggio di 100 m</option>                                                                            <option value="250">Nel raggio di 250 m</option>                                                                            <option value="500">Nel raggio di 500 m</option>                                                                            <option value="1000">Nel raggio di 1000 m</option>                                                                        </select>                                                                        <button id="annunciCircleButton'+s+'" class="annunciCircleButton" title="Riposiziona l\'area di ricerca al centro della mappa"><span class="fas fa-crosshairs"></span></button>                                                                    </div>                                                                    <div class="forMapsInputRangeContainer annunciContratto">                                                                        <div>                                                                            <input type="radio" id="annunciVendita'+s+'" name="idContratto'+s+'" value="1" checked="checked"/><label for="annunciVendita'+s+'">In vendita</label>                                                                            <input type="radio" id="annunciAsta'+s+'" name="idContratto'+s+'" value="3"/><label for="annunciAsta'+s+'">In asta</label>                                                                            <input type="radio" id="annunciAffitto'+s+'" name="idContratto'+s+'" value="2"/><label for="annunciAffitto'+s+'">In affitto</label>                                                                        </div>                                                                        <div>                                                                            <input type="checkbox" id="annunciSoloPrivati'+s+'"/><label for="annunciSoloPrivati'+s+'">Solo privati</label>                                                                        </div>                                                                    </div>                                                                    <div class="annunciRicerca">                                                                        <button id="ricerca_annunci'+s+'" type="button">Cerca</button>                                                                        <button id="resettaRicerca_annunci'+s+'" class="resettaRicerca_annunci" type="button">Resetta <span class="hidden-mobile">la ricerca</span></button>                                                                        <input type="checkbox" id="annunciSovrascriviRisultati'+s+'" checked="checked"/><label for="annunciSovrascriviRisultati'+s+'">Sovrascrivi i risultati</label>                                                                    </div>                                                                    <div id="ricercaAnnunciRisultati'+s+'" class="ricercaAnnunciRisultati">                                                                        <h3>Risultati</h3>                                                                    </div>                                                                    <div id="annunciImmobiliariListContainer'+s+'" class="annunciImmobiliariListContainer">                                                                        <table id="annunciImmobiliariListTable'+s+'" class="annunciImmobiliariListTable display"></table>                                                                    </div>                                                                </div>');a.addSideBar(s,"ap","Asking Price","AP",u);var d={scale:0,mask:Number,min:0,thousandsSeparator:"."},p=IMask(document.getElementById("annunciPrezzoMinimo"+s),d),f=IMask(document.getElementById("annunciPrezzoMassimo"+s),d),m=IMask(document.getElementById("annunciSuperficieMinima"+s),d),g=IMask(document.getElementById("annunciSuperficieMassima"+s),d),_=IMask(document.getElementById("annunciLocaliMinimo"+s),d),v=IMask(document.getElementById("annunciLocaliMassimo"+s),d);function y(e){var i=t("#annunciCategorie"+s);e&&e.items.length>0?i.select2({placeholder:"Seleziona una categoria",width:"100%",minimumResultsForSearch:-1,data:e.items}).on("change",(function(e){k(),b("");var i=t(this).val();i?(M(""),1==i?t("#annunciStati"+s).select2("enable",!0):t("#annunciStati"+s).select2("enable",!1),t.ajax({url:o.urlBase+"GetAnnunciImmobiliariTipologie/"+i,dataType:"jsonp",contentType:"application/json",context:this}).done((function(t){b(t)})).fail((function(t,e,i){b("")}))):b("")})).select2("val","1").trigger("change"):(i.select2("val",""),i.select2("destroy"),b(""))}function b(e){var i=t("#annunciTipologie"+s);e&&e.items.length>0?i.select2({placeholder:"Tutte le tipologie",width:"100%",allowClear:!0,data:e.items}).on("change",(function(e){k(),w("");var i=t(this).val();i?t.ajax({url:o.urlBase+"GetAnnunciImmobiliariSottoTipologie/"+i,dataType:"jsonp",contentType:"application/json",context:this}).done((function(t){w(t)})).fail((function(t,e,i){w("")})):w("")})).select2("val","2"==t("#annunciCategorie"+s).val()?"63":"").trigger("change").show():(i.select2("val",""),i.select2("destroy"),w(""))}function w(e){var i=t("#annunciSottoTipologie"+s);e&&e.items.length>0?(i.select2({placeholder:"Tutte le sottotipologie",width:"100%",allowClear:!0,data:e.items}),i.show()):(i.select2("val",""),i.select2("destroy"))}function M(e){var i=t("#annunciStati"+s);e&&e.items.length>0?i.select2({placeholder:"Qualsiasi stato",width:"100%",minimumResultsForSearch:-1,data:e.items,allowClear:!0}).on("change",(function(t){})):i.select2("val","")}function C(){var n=t("#ricercaAnnunciRisultati"+s);t("div",n).remove(),n.hide(),i.length=0,e.clearLayers()}function x(){var t,e=!1;return t=l.getBounds(),c.getBounds().intersects(t)?e=!0:confirm("L'area di ricerca Annunci immobiliari non Ã¨ visibile sulla mappa attuale, desideri riposizionarla al centro della mappa?")&&(h.setLatLng(c.getCenter()),c.flyToBounds(l.getBounds()),e=!0),e}function k(){var e=[100,250,500,1e3],i=[500,1e3,2500,5e3],n=t("#annunciCircleRadius"+s).val(),a=10==t("#annunciCategorie"+s).val()||28==t("#annunciTipologie"+s).val();t("#annunciCircleRadius"+s).html(function(e){var i="";return t.each(e,(function(t,e){i+='<option value="'+e+'">Nel raggio di '+(e<1e3?e+" m":e/1e3+" km")+"</option>"})),i}(a?i:e)).select2("val",function(t,e){var i=Number(t);return e.includes(i)||(i=e[0]),i}(n,a?i:e)).trigger("change")}t("#annunciCircleButton"+s).button().click((function(){h.setLatLng(c.getCenter())})),t("#resettaRicerca_annunci"+s).button().click((function(){t("#annunciCategorie"+s).select2("val","1").trigger("change"),t("#annunciStati"+s).val("").trigger("change").select2("enable",!0),p.value="",f.value="",m.value="",g.value="",_.value="",v.value="",t("#annunciCircleRadius"+s).val("100").trigger("change"),t("#annunciVendita"+s).prop("checked","checked"),C()})),t("#ricerca_annunci"+s).button().click((function(){C(),x(),t("#ricercaAnnunciRisultati"+s).show(),t("#resettaRicerca_annunci"+s).hide(),t("#ricerca_annunci"+s).prop("disabled",!0),function(){var r=t('input[name="idContratto'+s+'"]:checked').val(),h=t("#annunciCategorie"+s).val(),u=t("#annunciSovrascriviRisultati"+s).prop("checked");if(h){var d=t('<div id="annunciRisultati'+s+'" class="annunciRisultati"></div>').appendTo("#ricercaAnnunciRisultati"+s),y=t('<input type="checkbox" id="annunciRisultatiCheckbox'+s+'" checked="checked">').appendTo(d),b="";switch(r){case"1":b=" in vendita";break;case"2":b=" in affitto";break;case"3":b=" in asta"}d.append('<label>                                            <img src="'+a.percorsoIcone+'annunci/annuncio.png" alt="Annunci immobiliari"> Annunci'+b+'                                        </label>                                        <div id="ricercaAnnunciRisultatiDettagli'+s+'" class="ricercaAnnunciRisultatiDettagli">                                            <div id="ricercaAnnunciRisultatiCount'+s+'" class="ricercaAnnunciRisultatiCount">                                                <span class="loading fas fa-spinner fa-pulse"></span>                                            </div>                                        </div>'),y.on("click change",(function(){this.checked?e.addTo(c):e.remove()}));var w=t("#annunciTipologie"+s).val(),M=t("#annunciSottoTipologie"+s).val(),C=t("#annunciStati"+s).val(),x=l.getBounds().toBBoxString(),k=l.getLatLng().lat.toString()+","+l.getLatLng().lng.toString(),S=t("#annunciCircleRadius"+s).val(),T=p.unmaskedValue,A=f.unmaskedValue,I=m.unmaskedValue,P=g.unmaskedValue,E=_.unmaskedValue,z=v.unmaskedValue,D=3!=r,O=t("#annunciSoloPrivati"+s).prop("checked");t.ajax({url:o.urlBase+"/GetAnnunciImmobiliari?coordinate="+k+"&raggio="+S+"&bbox="+x+"&prezzoMinimo="+T+"&prezzoMassimo="+A+"&superficieMinima="+I+"&superficieMassima="+P+"&localiMinimo="+E+"&localiMassimo="+z+"&idCategoria="+h+"&idTipologia="+w+"&idSottoTipologia="+M+"&idStato="+C+"&idContratto="+r+"&escludiAste="+D+"&soloPrivati="+O,dataType:"jsonp",contentType:"application/json",context:this}).done((function(r){u?n=r:t.each(r,(function(e,i){var a=!1;t.each(n,(function(t,e){e.Id==i.Id&&(a=!0)})),a||n.push(i)})),t.each(n,(function(n,s){var r=L.latLng(s.Latitudine,s.Longitudine),l='<div class="annuncioImmobiliarePopup">                                                        <div id="annuncioImmobiliareData'+s.Id+'" class="annuncioImmobiliareData">'+s.DataCreazione+'</div>                                                        <div id="annuncioImmobiliareImmagini'+s.Id+'" class="annuncioImmobiliareImmagini owl-carousel owl-theme"></div>                                                        <div class="annuncioImmobiliareDettagli">                                                            <h1>'+s.Titolo+"<small>â¬ "+s.Prezzo+'</small></h1>                                                            <h2 id="annuncioImmobiliareSottotitolo'+s.Id+'"></h2>';(s.Superficie||s.NumeroLocali)&&(l+="<p><span>"+(s.Superficie?s.Superficie.toString()+" m&sup2;":"")+(s.NumeroLocali?" | "+s.NumeroLocali+" locali":"")+"</span>"+("Vendita"==s.Contratto&&s.Superficie?"<span>â¬ "+(s.Prezzo.replace(/\./g,"")/s.Superficie.replace(/\./g,"")).formatta(2,",",".")+"/m&sup2;</span>":"")+"</p>"),l+='<p class="annuncioImmobiliareFooter'+(o.conversioneAnnunci?"":" annuncioImmobiliareFooterCenter")+'">',o.conversioneAnnunci&&(l+='<span id="annuncioImmobiliareConvertiLoading'+s.Id+'" class="loading fas fa-spinner fa-pulse"></span><button title="Converti l\'annuncio in un riferimento standard forMaps" id="annuncioImmobiliareConverti'+s.Id+'" class="forMapsIcoButton forMapsIcoButtonSmall forMapsIcoMarker" style="visibility:hidden">Converti<span class="hidden-mobile"> annuncio</span></button>'),l+='<a href="https://www.immobiliare.it/'+s.Id+'-immobile.html" title="Visualizza l\'annuncio completo su Immobiliare.it" target="_blank" class="forMapsIcoButton forMapsIcoButtonSmall forMapsIcoExtLink">Annuncio<span class="hidden-mobile"> completo</span></span></a>                                                            </p>                                                        </div>                                                    </div>';var h=L.marker(r,{icon:L.icon({iconUrl:a.percorsoIcone+"annunci/annuncio"+(s.Agenzia?"":"_noagenzia")+".png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-41]}),pmIgnore:!0,title:s.Titolo+(s.Prezzo?" | â¬ "+s.Prezzo:"")+(s.Superficie?" | "+s.Superficie+"mq":"")+(s.NumeroLocali?" | "+s.NumeroLocali+" locali":"")}).bindPopup(l,{minWidth:t(window).width()>767?300:200,className:"forMapsGalleryPopup"}).on("popupopen",(function(i){t.ajax({url:o.urlBase+"GetAnnuncioImmobiliareDetail/"+s.Id+"?latitudine="+s.Latitudine+"&longitudine="+s.Longitudine+"&immaginiXXL="+o.urlImmaginiXXL+"&agenzia="+o.agenzia,dataType:"jsonp",contentType:"application/json",context:this}).done((function(i){if(i.Sottotitolo?t("#annuncioImmobiliareSottotitolo"+s.Id).html(i.Sottotitolo):t("#annuncioImmobiliareSottotitolo"+s.Id).remove(),t("#annuncioImmobiliareConverti"+s.Id).css("visibility","visible"),t("#annuncioImmobiliareConvertiLoading"+s.Id).css("display","none"),t("#annuncioImmobiliareConverti"+s.Id).on("click",(function(){var n;if(t(this).prop("disabled",!0),s.DataCreazione){var l=s.DataCreazione.split("/");n=new Date(l[2],l[1]-1,l[0])}var c="";switch(s.Contratto){case"Vendita":c="Aste"==s.Categoria?"annuncioAsta":"annuncioVendita";break;case"Affitto":c="annuncioAffitto"}var u={};for(var d in s)u[d]=s[d];for(var d in i)u[d]=i[d];if(u.Prezzo=Number(u.Prezzo.replace(/\./g,"")),u.Superficie=Number(u.Superficie.replace(/\./g,"")),u.Coordinate=r,u.Provenienza=c,u.Url="https://www.immobiliare.it/annunci/"+s.Id,u.UrlAgenzia=i.IdAgenzia?"https://www.immobiliare.it/agenzie-immobiliari/"+i.IdAgenzia:"",u.DataFormattata=n,o.conversioneAnnunci){switch(o.conversioneAnnunciTipo){case"riferimento":a.addMarker({idAnnuncio:u.Id,linkAnnuncio:u.Id,draggable:!0,denominazione:u.Titolo+" - "+u.Sottotitolo,provenienza:c,prezzo:u.Prezzo,superficie:u.Superficie,numeroLocali:u.NumeroLocali,data:u.DataFormattata,latLng:u.Coordinate,infoWindowOpened:!0,url:u.Url});break;case"stimatrixImmobile":annuncioImmobiliareStimatrixResult=JSON.stringify(u),location.href="#convertiAnnuncio"}e.removeLayer(h),console.log(u)}})),i.Immagini.length>0||i.Planimetrie.length>0){var n=[];t.each(i.Immagini,(function(t,e){n.push('<img src="'+e.Url+'" alt="'+(e.Titolo?e.Titolo:s.Titolo)+'"/>')})),t.each(i.Planimetrie,(function(t,e){n.push('<img src="'+e.Url+'" alt="'+(e.Titolo?e.Titolo:s.Titolo)+'"/>')})),t("#annuncioImmobiliareImmagini"+s.Id).html(n.join("")).imagesLoaded((function(){t("#annuncioImmobiliareImmagini"+s.Id).owlCarousel({items:1,nav:!0,navText:['<i class="fas fa-chevron-left"></i>','<i class="fas fa-chevron-right"></i>'],dots:!1,autoHeight:!0,onInitialized:function(e){t("#annuncioImmobiliareData"+s.Id).show();var i=e.target;t(".owl-item",i).each((function(){var e=parseInt(t("img",this).css("width"));parseInt(t("img",this).css("height"))>=e&&(t("img",this).css("maxHeight",t(window).width()>767?225:150),t("img",this).css("width","auto"))})),t(".owl-stage-outer.owl-height",i).css("height",t(".owl-item",i).first().css("height"))}})}))}else t("#annuncioImmobiliareData"+s.Id).show(),t("#annuncioImmobiliareData"+s.Id).addClass("annuncioImmobiliareDataNoImages")})).fail((function(t,e,i){console.log(i)}))}));h.data={id:s.Id},i.push({Id:s.Id,Data:s.DataCreazione,Immagine:'<img src="https://pic.im-cdn.it/image/'+s.Immagine+'/listing.jpg" alt="'+s.Titolo+'" class="immagineAnnuncio"/>',Titolo:s.Titolo,Prezzo:s.Prezzo,Superficie:s.Superficie,NumeroLocali:s.NumeroLocali,Coordinate:r}),e.addLayer(h)})),c.addLayer(e),n.length>0&&(t('<div id="ricercaAnnunciRisultatiList'+s+'" class="ricercaAnnunciRisultatiList" title="Visualizza la lista degli annunci ricercati">                                <span class="fas fa-list-ul"></span>                            </div>').prependTo("#ricercaAnnunciRisultatiDettagli"+s).on("click",(function(n){jQuery.extend(jQuery.fn.dataTableExt.oSort,{"date-eu-pre":function(t){if(!(t=t.replace(" ","")))return 0;var e=t.split(/[\.\-\/]/),i=e[1];1==i.length&&(i=0+i);var n=e[0];return 1==n.length&&(n=0+n),1*((e[2]?e[2]:0)+i+n)},"date-eu-asc":function(t,e){return t<e?-1:t>e?1:0},"date-eu-desc":function(t,e){return t<e?1:t>e?-1:0}});var o=t("#annunciImmobiliariListTable"+s).DataTable({destroy:!0,stateSave:!0,autowidth:!1,responsive:{details:{type:"column"}},scrollY:"300px",scrollCollapse:!0,data:i,order:[[2,"desc"]],columns:[{className:"control",orderable:!1,data:null,render:function(){return""}},{title:"Immagine",width:"110px",data:"Immagine",orderable:!1},{title:"Data",data:"Data",responsivePriority:1,type:"date-eu"},{title:"Annuncio",data:"Titolo",responsivePriority:2},{title:"Prezzo (â¬)",data:"Prezzo",className:"dt-right",responsivePriority:3},{title:"Superficie (mq)",data:"Superficie",className:"dt-right"},{title:"Numero locali",data:"NumeroLocali",className:"dt-right"},{title:"Coordinate",data:"Coordinate",visible:!1}],paging:!1,language:{decimal:",",url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Italian.json"},createdRow:function(i,n,o){t(i).prop("title","Clicca per visualizzare l'annuncio su mappa"),t(i).on("click","td",(function(){a.SideBar.close(),0!=this.cellIndex&&(r.close(),c.flyTo(n.Coordinate,17),t("#annunciRisultatiCheckbox"+s).prop("checked")&&e.eachLayer((function(t){n.Id==t.data.id&&e.zoomToShowLayer(t,(function(){t.openPopup()}))})))}))}}),r=lity("#annunciImmobiliariListContainer"+s);t("#annunciImmobiliariListContainer"+s).show(),o.responsive.recalc(),t(document).on("lity:close",(function(e,i){t("#annunciImmobiliariListContainer"+s).hide()}))})),t('<div id="ricercaAnnunciRisultatiDownload'+s+'" class="ricercaAnnunciRisultatiDownload"title="Scarica la lista degli annunci ricercati in formato csv"><span class="fas fa-download"></span></div>').prependTo("#ricercaAnnunciRisultatiDettagli"+s).on("click",(function(e){var i=[];t.each(n,(function(t,e){i.push({Data:e.DataCreazione,Titolo:e.Titolo,Superficie:e.Superficie,Prezzo:e.Prezzo,NumeroLocali:e.NumeroLocali,Latitudine:e.Latitudine.replace(".",","),Longitudine:e.Longitudine.replace(".",","),Immagine:"https://pic.im-cdn.it/image/immagine_"+e.Immagine+".jpg",Link:"https://www.immobiliare.it/"+e.Id+"-immobile.html"})}));var a=new Date;!function(t,e,i){t&&e.unshift(t);var n="\ufeff"+function(t){for(var e="object"!=typeof t?JSON.parse(t):t,i="",n=0;n<e.length;n++){var a="";for(var s in e[n])""!=a&&(a+=";"),a+=e[n][s];i+=a+"\r\n"}return i}(JSON.stringify(e)),a=i+".csv"||"export.csv",s=new Blob([n],{type:"text/csv;"});if(navigator.msSaveBlob)navigator.msSaveBlob(s,a);else{var o=document.createElement("a");if(void 0!==o.download){var r=URL.createObjectURL(s);o.setAttribute("href",r),o.setAttribute("download",a),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}}({Data:"Data",Titolo:"Annuncio",Superficie:"Superficie (mÂ²)",Prezzo:"Prezzo (â¬)",NumeroLocali:"Numero locali",Latitudine:"Latitudine",Longitudine:"Longitudine",Immagine:"Immagine",Link:"Link"},i,"Annunci_Immobiliari_"+a.formatoFile())}))),t(".loading",d).remove(),t("#ricercaAnnunciRisultati"+s+" #ricercaAnnunciRisultatiCount"+s).html(n.length)})).fail((function(t,e,i){console.log(i)})).always((function(){t("#ricerca_annunci"+s).prop("disabled",!1)}))}else alert("Seleziona una categoria di ricerca")}(),t("#resettaRicerca_annunci"+s).show()})),t("#annunciCircleRadius"+s).select2({minimumResultsForSearch:-1}),t("#annunciCircleRadius"+s).on("change",(function(){l&&(l.setRadius(parseInt(this.value)),x()&&c.flyToBounds(l.getBounds()))})),a.SideBar.on("tabChanged opening",(function(e,i){var n,a;r?t(i).hasClass("apTab")?(r.addTo(c),x()):r.remove():t(i).hasClass("apTab")&&(n=parseInt(t("#annunciCircleRadius"+s).val()),a=L.divIcon({className:"annunciCircleMarkerIcon",iconSize:L.point(30,30)}),(h=L.marker(c.getCenter(),{icon:a,draggable:!0,pmIgnore:!0,title:"Clicca e trascina per spostare l'area di ricerca"})).on("drag move",(function(){l.setLatLng(this.getLatLng())})),l=L.circle(h.getLatLng(),{radius:n,color:"#FF0000",opacity:.5,weight:2,fillColor:"#FF0000",fillOpacity:.05,interactive:!1,pmIgnore:!0}),r=L.layerGroup([h,l]).addTo(c),c.flyToBounds(l.getBounds()))})),a.SideBar.on("closing",(function(){r&&r.remove()})),t.ajax({url:o.urlBase+"GetAnnunciImmobiliariCategorie",dataType:"jsonp",contentType:"application/json",context:this}).done((function(t){y(t)})).fail((function(t,e,i){y("")})),t.ajax({url:o.urlBase+"GetAnnunciImmobiliariStati",dataType:"jsonp",contentType:"application/json",context:this}).done((function(t){M(t)})).fail((function(t,e,i){M("")}))}}(jQuery);